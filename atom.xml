<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>iZheteng</title>
  <subtitle>Enjoy work, Enjoy life!</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://cuiqingwei.github.io/"/>
  <updated>2017-12-26T06:09:34.000Z</updated>
  <id>http://cuiqingwei.github.io/</id>
  
  <author>
    <name>cuiqingwei</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>SSH与SSM对比</title>
    <link href="http://cuiqingwei.github.io/2017/12/26/2017-12-26-SSH%E4%B8%8ESSM%E5%AF%B9%E6%AF%94/"/>
    <id>http://cuiqingwei.github.io/2017/12/26/2017-12-26-SSH与SSM对比/</id>
    <published>2017-12-26T06:12:08.000Z</published>
    <updated>2017-12-26T06:09:34.000Z</updated>
    
    <content type="html"><![CDATA[<p>当下流行的两种企业开发MVC开源框架，是我们Java程序猿必备知识能力。MVC，即模型(model)－视图(view)－控制器(controller)的缩写，一种软件设计典范，用一种业务逻辑、数据、界面显示分离的方法组织代码，将业务逻辑聚集到一个部件里面，在改进和个性化定制界面及用户交互的同时，不需要重新编写业务逻辑。框架之所以流行，在于其易复用和简化开发，精髓在思想，掌握了核心思想，我们掌握其他类似框架也不会有问题，建议大家有精力的话读一下框架源码，尤其是Spring。</p>
<a id="more"></a>
<h1 id="SSH和SSM定义"><a href="#SSH和SSM定义" class="headerlink" title="SSH和SSM定义"></a>SSH和SSM定义</h1><p><strong>SSH</strong> 通常指的是 Struts2 做控制器(controller)，spring 管理各层的组件，hibernate 负责持久化层。</p>
<p><strong>SSM</strong> 则指的是 SpringMVC 做控制器(controller)，Spring 管理各层的组件，MyBatis 负责持久化层。</p>
<p><strong>共同点</strong>：</p>
<ul>
<li>1.Spring依赖注入DI来管理各层的组件；</li>
<li>2.使用面向切面编程AOP管理事物、日志、权限等。</li>
</ul>
<p><strong>不同点</strong>：Struts2 和 SpringMVC 控制器(controller)控制视图和模型的交互机制的不同，Struts2是Action类级别，SpringMVC是方法级别，更容易实现RESTful风格。</p>
<h1 id="SSH-和-SSM-的实现原理"><a href="#SSH-和-SSM-的实现原理" class="headerlink" title="SSH 和 SSM 的实现原理"></a>SSH 和 SSM 的实现原理</h1><h2 id="1-Struts2-的实现原理"><a href="#1-Struts2-的实现原理" class="headerlink" title="1.Struts2 的实现原理"></a>1.Struts2 的实现原理</h2><p><img src="/img/20171226/f740001068a5c16f544.jpg" alt=""></p>
<p>Struts2框架执行步骤（Struts2使用Filter嵌入）：</p>
<ul>
<li>1、客户端初始化一个指向Servlet容器（例如Tomcat）的请求；</li>
<li>2、这个请求经过一系列的过滤器（Filter）（这些过滤器中有一个叫做ActionContextCleanUp的可选过滤器，这个过滤器对于Struts2和其他框架的集成很有帮助；</li>
<li>3、接着FilterDispatcher被调用，FilterDispatcher询问ActionMapper来决定这个请求是否需要调用某个Action；</li>
<li>4、如果ActionMapper决定需要调用某个Action，FilterDispatcher把请求的处理交给ActionProxy；</li>
<li>5、ActionProxy通过Configuration Manager询问框架的配置文件，找到需要调用的Action类；</li>
<li>6、ActionProxy创建一个ActionInvocation的实例；</li>
<li>7、ActionInvocation实例使用命名模式来调用，在调用Action的过程前后，涉及到相关拦截器（Intercepter）的调用；</li>
<li>8、一旦Action执行完毕，ActionInvocation负责根据struts.xml中的配置找到对应的返回结果。返回结果通常是（但不总是，也可 能是另外的一个Action链）一个需要被表示的JSP或者FreeMarker的模版；</li>
<li>9、将处理结果返回给客户端。</li>
</ul>
<h2 id="2-SpringMVC-的实现原理"><a href="#2-SpringMVC-的实现原理" class="headerlink" title="2.SpringMVC 的实现原理"></a>2.SpringMVC 的实现原理</h2><p><img src="/img/20171226/f7500089dc67ac93a17.jpg" alt=""></p>
<p>SpringMVC框架执行步骤（SpringMVC使用Servlet嵌入）：</p>
<ul>
<li>1、客户端发出一个http请求给web服务器，web服务器对http请求进行解析，如果匹配DispatcherServlet的请求映射路径（在web.xml中指定），web容器将请求转交给DispatcherServlet；</li>
<li>2、DipatcherServlet接收到这个请求之后将根据请求的信息（包括URL、Http方法、请求报文头和请求参数Cookie等）以及HandlerMapping的配置找到处理请求的处理器（Handler）；</li>
<li>3-4、DispatcherServlet根据HandlerMapping找到对应的Handler,将处理权交给Handler（Handler将具体的处理进行封装），再由具体的HandlerAdapter对Handler进行具体的调用；</li>
<li>5、Handler对数据处理完成以后将返回一个ModelAndView()对象给DispatcherServlet；</li>
<li>6、Handler返回的ModelAndView()只是一个逻辑视图并不是一个正式的视图，DispatcherSevlet通过ViewResolver将逻辑视图转化为真正的视图View；</li>
<li>7、Dispatcher通过model解析出ModelAndView()中的参数进行解析最终展现出完整的view并返回给客户端。</li>
</ul>
<h1 id="Hibernate-和-MyBatis-两种ORM框架对比"><a href="#Hibernate-和-MyBatis-两种ORM框架对比" class="headerlink" title="Hibernate 和 MyBatis 两种ORM框架对比"></a>Hibernate 和 MyBatis 两种ORM框架对比</h1><p><strong>两者的相同点</strong></p>
<ul>
<li>Hibernate与MyBatis都可以是通过SessionFactoryBuider由XML配置文件生成SessionFactory，然后由SessionFactory 生成Session，最后由Session来开启执行事务和SQL语句。其中SessionFactoryBuider，SessionFactory，Session的生命周期都是差不多的。</li>
<li>Hibernate和MyBatis都支持JDBC和JTA事务处理。</li>
</ul>
<p><strong>两者各自优势</strong></p>
<ul>
<li>MyBatis可以进行更为细致的SQL优化，可以减少查询字段。</li>
<li>MyBatis容易掌握，而Hibernate门槛较高。</li>
<li>Hibernate的DAO层开发比MyBatis简单，Mybatis需要维护SQL和结果映射。</li>
<li>Hibernate对对象的维护和缓存要比MyBatis好，对增删改查的对象的维护要方便。</li>
<li>Hibernate数据库移植性很好，MyBatis的数据库移植性不好，不同的数据库需要写不同SQL。</li>
<li>Hibernate有更好的二级缓存机制，可以使用第三方缓存。MyBatis本身提供的缓存机制不佳，更新操作不能指定刷新指定记录，会清空整个表，但是也可以使用第三方缓存。</li>
<li>Hibernate 封装性好，屏蔽了数据库差异，自动生成SQL语句，应对数据库变化能力较弱，SQL语句优化困难。</li>
<li>MyBatis仅实现了SQL语句和对象的映射，需要针对具体的数据库写SQL语句，应对数据库变化能力较强，SQL语句优化较为方便。</li>
</ul>
<h1 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h1><p>SSM和SSH不同主要在MVC实现方式，以及ORM持久化方面不同（Hiibernate与Mybatis）。SSM越来越轻量级配置，将注解开发发挥到极致，且ORM实现更加灵活，SQL优化更简便；而SSH较注重配置开发，其中的Hiibernate对JDBC的完整封装更面向对象，对增删改查的数据维护更自动化，但SQL优化方面较弱，且入门门槛稍高。</p>
<blockquote>
<p>附Spring家族：</p>
</blockquote>
<p><img src="/img/20171226/f750008ad20260cf3f2.jpg" alt=""></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;当下流行的两种企业开发MVC开源框架，是我们Java程序猿必备知识能力。MVC，即模型(model)－视图(view)－控制器(controller)的缩写，一种软件设计典范，用一种业务逻辑、数据、界面显示分离的方法组织代码，将业务逻辑聚集到一个部件里面，在改进和个性化定制界面及用户交互的同时，不需要重新编写业务逻辑。框架之所以流行，在于其易复用和简化开发，精髓在思想，掌握了核心思想，我们掌握其他类似框架也不会有问题，建议大家有精力的话读一下框架源码，尤其是Spring。&lt;/p&gt;
    
    </summary>
    
    
      <category term="Java" scheme="http://cuiqingwei.github.io/tags/Java/"/>
    
      <category term="SSH" scheme="http://cuiqingwei.github.io/tags/SSH/"/>
    
      <category term="SSM" scheme="http://cuiqingwei.github.io/tags/SSM/"/>
    
  </entry>
  
  <entry>
    <title>分布式文件系统 FastDFS 5 &amp; Linux CentOS 7 搭建</title>
    <link href="http://cuiqingwei.github.io/2017/12/05/2017-12-22-%E5%88%86%E5%B8%83%E5%BC%8F%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F-FastDFS-5-Linux-CentOS-7-%E6%90%AD%E5%BB%BA/"/>
    <id>http://cuiqingwei.github.io/2017/12/05/2017-12-22-分布式文件系统-FastDFS-5-Linux-CentOS-7-搭建/</id>
    <published>2017-12-05T06:12:08.000Z</published>
    <updated>2017-12-23T03:47:18.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h1><p>FastDFS是一个开源的轻量级分布式文件系统，由跟踪服务器（tracker server）、存储服务器（storage server）和客户端（client）三个部分组成，主要解决了海量数据存储问题，特别适合以中小文件（建议范围：<strong>4KB &lt; file_size &lt;500MB</strong> ）为载体的在线服务。</p>
<a id="more"></a>
<p>FastDFS的系统结构图如下：</p>
<p><img src="/img/20171222/20160922105102336.jpg" alt=""></p>
<p>如上图，FastDFS的两个核心概念分别是：</p>
<ul>
<li>Tracker（跟踪器）</li>
<li>Storage（存储节点）</li>
</ul>
<p>Tracker主要做调度工作，相当于mvc中的controller的角色，在访问上起负载均衡的作用。跟踪器和存储节点都可以由一台或多台服务器构成，跟踪器和存储节点中的服务器均可以随时增加或下线而不会影响线上服务，其中跟踪器中的所有服务器都是对等的，可以根据服务器的压力情况随时增加或减少。Tracker负责管理所有的Storage和group，每个storage在启动后会连接Tracker，告知自己所属的group等信息，并保持周期性的心跳，tracker根据storage的心跳信息，建立group==&gt;[storage server list]的映射表，Tracker需要管理的元信息很少，会全部存储在内存中；另外tracker上的元信息都是由storage汇报的信息生成的，本身不需要持久化任何数据，这样使得tracker非常容易扩展，直接增加tracker机器即可扩展为tracker cluster来服务，cluster里每个tracker之间是完全对等的，所有的tracker都接受stroage的心跳信息，生成元数据信息来提供读写服务。</p>
<p>Storage采用了分卷[Volume]（或分组[group]）的组织方式，存储系统由一个或多个组组成，组与组之间的文件是相互独立的，所有组的文件容量累加就是整个存储系统中的文件容量。一个卷[Volume]（组[group]）可以由一台或多台存储服务器组成，一个组中的存储服务器中的文件都是相同的，组中的多台存储服务器起到了冗余备份和负载均衡的作用，数据互为备份，存储空间以group内容量最小的storage为准，所以建议group内的多个storage尽量配置相同，以免造成存储空间的浪费。更多原理性的内容可以参考这篇blog，介绍的很详细：<a href="http://blog.chinaunix.net/uid-20196318-id-4058561.html" target="_blank" rel="external">分布式文件系统FastDFS设计原理</a></p>
<blockquote>
<p>Parallels安装Centos7</p>
</blockquote>
<p><img src="/img/20171222/WX20171222-173110@2x.png" alt=""></p>
<h1 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">wget https://github.com/happyfish100/fastdfs/archive/V5.11.tar.gz</div><div class="line">wget https://github.com/happyfish100/libfastcommon/archive/V1.0.36.tar.gz</div></pre></td></tr></table></figure>
<p><img src="/img/20171222/WX20171222-143233@2x.png" alt=""></p>
<p>如上图，由于FastDFS是纯C语言实现，只支持Linux、FreeBSD等UNIX系统，所以我们直接下载tar.gz的压缩包，同时FastDFS 5.11同以前版本相比将公共的一些函数等单独封装成了libfastcommon包，所以在安装FastDFS之前我们还必须安装libfastcommon，在余的GitHub首页可以看到：</p>
<p><img src="/img/20171222/20160922114506577.png" alt=""></p>
<p>下载完成后，就可以开始解压安装了：</p>
<p><img src="/img/20171222/WX20171222-143631@2x.png" alt=""></p>
<h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p>先要安装gcc编译器：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yum -y install gcc-c++</div></pre></td></tr></table></figure>
<h3 id="libfastcommon"><a href="#libfastcommon" class="headerlink" title="libfastcommon"></a>libfastcommon</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">tar -zxvf V1.0.36.tar.gz</div><div class="line">cd libfastcommon-1.0.36</div><div class="line">./make.sh</div><div class="line">./make.sh install</div></pre></td></tr></table></figure>
<h3 id="FastDFS"><a href="#FastDFS" class="headerlink" title="FastDFS"></a>FastDFS</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">tar -zxvf V5.11.tar.gz</div><div class="line">cd fastdfs-5.11</div><div class="line">./make.sh</div><div class="line">./make.sh install</div></pre></td></tr></table></figure>
<h3 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h3><p>安装成功后就会生成如上的3个.sample文件（示例配置文件），拷贝出3个后面用的配置文件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">cd /etc/fdfs</div><div class="line">cp client.conf.sample client.conf</div><div class="line">cp storage.conf.sample storage.conf</div><div class="line">cp tracker.conf.sample tracker.conf</div></pre></td></tr></table></figure>
<p>至此FastDFS已经安装完毕，接下来的工作就是依次配置Tracker和Storage了。</p>
<h1 id="Tracker"><a href="#Tracker" class="headerlink" title="Tracker"></a>Tracker</h1><p>在配置Tracker之前，首先需要创建Tracker服务器的文件路径，即用于存储Tracker的数据文件和日志文件等，我这里选择在 <strong>/opt</strong> 目录下创建一个 <strong>fastdfs_tracker</strong> 目录用于存放Tracker服务器的相关文件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mkdir /opt/fastdfs_tracker</div></pre></td></tr></table></figure>
<p>接下来就要重新编辑上一步准备好的 <strong>/etc/fdfs</strong> 目录下的 <strong>tracker.conf</strong> 配置文件，打开文件后依次做以下修改：</p>
<blockquote>
<p>disabled=false                  #启用配置文件（默认启用）<br>port=22122                      #设置tracker的端口号，通常采用22122这个默认端口<br>base_path=/opt/fastdfs_tracker  #设置tracker的数据文件和日志目录<br>http.server_port=6666           #设置http端口号，默认为8080</p>
</blockquote>
<p>配置完成后就可以启动Tracker服务器了，但首先依然要为启动脚本创建软引用，因为fdfs_trackerd等命令在/usr/local/bin中并没有，而是在/usr/bin路径下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">ln -s /usr/bin/fdfs_trackerd /usr/local/bin</div><div class="line">ln -s /usr/bin/stop.sh /usr/local/bin</div><div class="line">ln -s /usr/bin/restart.sh /usr/local/bin</div></pre></td></tr></table></figure>
<p>最后通过命令启动Tracker服务器：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">service fdfs_trackerd start</div></pre></td></tr></table></figure>
<p>如果启动命令执行成功，那么同时在刚才创建的tracker文件目录 <strong>/opt/fastdfs_tracker</strong> 中就可以看到启动后新生成的data和logs目录，tracker服务的端口也应当被正常监听，最后再通过netstat命令查看一下端口监听情况.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">netstat -unltp|grep fdfs</div></pre></td></tr></table></figure>
<p>Tracker至此就配置好了，接下来就可以配置FastDFS的另一核心——Storage。</p>
<h1 id="Storage"><a href="#Storage" class="headerlink" title="Storage"></a>Storage</h1><p>同理，步骤基本与配置Tracker一致，首先是创建Storage服务器的文件目录，需要注意的是同Tracker相比我多建了一个目录，因为Storage还需要一个文件存储路径，用于存放接收的文件：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">mkdir /opt/fastdfs_storage</div><div class="line">mkdir /opt/fastdfs_storage_data</div></pre></td></tr></table></figure>
<p>接下来修改/etc/fdfs目录下的storage.conf配置文件，打开文件后依次做以下修改：</p>
<blockquote>
<p>disabled=false    #启用配置文件（默认启用）<br>group_name=group1 #组名，根据实际情况修改<br>port=23000        #设置storage的端口号，默认是23000，同一个组的storage端口号必须一致<br>base_path=/opt/fastdfs_storage  #设置storage数据文件和日志目录<br>store_path_count=1              #存储路径个数，需要和store_path个数匹配<br>store_path0=/opt/fastdfs_storage_data #实际文件存储路径<br>tracker_server=10.211.55.8:22122   #tracker 服务器的 IP地址和端口号，如果是单机搭建，IP不要写127.0.0.1，否则启动不成功（此处的ip是我的CentOS虚拟机ip）<br>http.server_port=8888           #设置 http 端口号</p>
</blockquote>
<p>配置完成后同样要为Storage服务器的启动脚本设置软引用：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ln -s /usr/bin/fdfs_storaged /usr/local/bin</div></pre></td></tr></table></figure>
<p>接下来就可以启动Storage服务了：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">service fdfs_storaged start</div></pre></td></tr></table></figure>
<p>同理，如果启动成功，/opt/fastdfs_storage中就可以看到启动后新生成的 <strong>data</strong> 和 <strong>logs</strong> 目录，端口23000也应被正常监听，还有一点就是文件存储路径下会生成多级存储目录，那么接下来看看是否启动成功.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">netstat -unltp|grep fdfs</div></pre></td></tr></table></figure>
<p><img src="/img/20171222/WX20171222-162905@2x.png" alt=""></p>
<p>如上图，可以看到此时已经正常监听tracker的22122端口和storage的23000端口，至此storage服务器就已经配置完成，确定了storage服务器启动成功后，还有一项工作就是看看storage服务器是否已经登记到 tracker服务器（也可以理解为tracker与storage是否整合成功），运行以下命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/usr/bin/fdfs_monitor /etc/fdfs/storage.conf</div></pre></td></tr></table></figure>
<p><img src="/img/20171222/WX20171222-163212@2x.png" alt=""></p>
<p>如上所示，看到 <strong>ip_addr = 10.211.55.8 (centos-7.shared)  ACTIVE</strong> 字样即可说明storage服务器已经成功登记到了tracker服务器.</p>
<p>添加开机启动，检查一下rc.local是否具备可执行权限，若是无可执行权限则通过</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">chmod +x /etc/rc.d/rc.local</div></pre></td></tr></table></figure>
<p>进行授权，如下图：</p>
<p><img src="/img/20171222/WX20171222-163634@2x.png" alt=""></p>
<p>至此我们就已经完成了fastdfs的全部配置，此时也就可以用客户端工具进行文件上传下载的测试了。</p>
<h1 id="上传测试"><a href="#上传测试" class="headerlink" title="上传测试"></a>上传测试</h1><p>测试时需要设置客户端的配置文件，编辑 <strong>/etc/fdfs</strong> 目录下的 <strong>client.conf</strong> 文件，打开文件后依次做以下修改：</p>
<blockquote>
<p>base_path=/opt/fastdfs_tracker      #tracker服务器文件路径<br>tracker_server=10.211.55.8:22122    #tracker服务器IP地址和端口号<br>http.tracker_server_port=6666       #tracker服务器的http端口号，必须和tracker的设置对应起来</p>
</blockquote>
<p>配置完成后就可以模拟文件上传了，先通过scp向 <strong>/tmp</strong> 目录下传一下文件。</p>
<p>然后通过执行客户端上传命令尝试上传：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/usr/bin/fdfs_upload_file /etc/fdfs/client.conf /tmp/big.jpg</div></pre></td></tr></table></figure>
<p>运行后可以发现给我们返回了一个路径：</p>
<p><img src="/img/20171222/WX20171222-164154@2x.png" alt=""></p>
<p>这就表示我们的文件已经上传成功了，当文件存储到某个子目录后，即认为该文件存储成功，接下来会为该文件生成一个文件名，文件名由group、存储目录、两级子目录、fileid、文件后缀名（由客户端指定，主要用于区分文件类型）拼接而成，如下图：</p>
<p><img src="/img/20171222/20160923132829236.jpg" alt=""></p>
<p>同时在之前配置的storage服务器的实际文件存储路径中也可以根据返回的路径找到实际文件：</p>
<h1 id="HTTP访问文件"><a href="#HTTP访问文件" class="headerlink" title="HTTP访问文件"></a>HTTP访问文件</h1><p>因为FastDFS目前已不支持http协议，<strong>4.0.5</strong> 版本开始移除了自带的HTTP支持（因为之前自带的HTTP服务较为简单，无法提供负载均衡等高性能服务），所以余大提供了nginx上使用FastDFS的模块fastdfs-nginx-module，下载地址如下：<a href="https://github.com/happyfish100/fastdfs-nginx-module" target="_blank" rel="external">https://github.com/happyfish100/fastdfs-nginx-module</a>，这样做最大的好处就是提供了HTTP服务并且解决了group中storage服务器的同步延迟问题，接下是fastdfs-nginx-module的安装配置过程.</p>
<h3 id="fastdfs-nginx-module"><a href="#fastdfs-nginx-module" class="headerlink" title="fastdfs-nginx-module"></a>fastdfs-nginx-module</h3><p>先安装系统依赖</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yum -y install pcre pcre-devel zlib zlib-devel openssl openssl-devel git</div></pre></td></tr></table></figure>
<p>下载所需组件</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">cd /usr/local/src/</div><div class="line">git clone https://github.com/happyfish100/fastdfs-nginx-module.git</div><div class="line">wget http://nginx.org/download/nginx-1.8.1.tar.gz</div></pre></td></tr></table></figure>
<h3 id="storage-nginx"><a href="#storage-nginx" class="headerlink" title="storage nginx"></a>storage nginx</h3><p>首先是为storage服务器安装nginx</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">tar -zxvf nginx-1.8.1.tar.gz</div><div class="line">cd nginx-1.8.1</div><div class="line">./configure --prefix=/usr/local/nginx --add-module=/usr/local/src/fastdfs-nginx-module/src</div><div class="line">make &amp;&amp; make install</div></pre></td></tr></table></figure>
<p>接下来要修改一下nginx的配置文件，进入conf目录并打开 <strong>nginx.conf</strong> 修改，如下图：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vi /usr/local/nginx/conf/nginx.conf</div></pre></td></tr></table></figure>
<p><img src="/img/20171222/WX20171222-165331@2x.png" alt=""></p>
<p>然后进入FastDFS的安装目录 <strong>/usr/local/src/fastdfs-5.11</strong> 目录下的conf目录，将http.conf和mime.types拷贝到 <strong>/etc/fdfs</strong> 目录下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">cp -r /usr/local/src/fastdfs-5.11/conf/http.conf /etc/fdfs/</div><div class="line">cp -r /usr/local/src/fastdfs-5.11/conf/mime.types /etc/fdfs/</div></pre></td></tr></table></figure>
<p>接下来还需要把fastdfs-nginx-module安装目录中src目录下的mod_fastdfs.conf也拷贝到 <strong>/etc/fdfs</strong> 目录下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cp -r /usr/local/src/fastdfs-nginx-module/src/mod_fastdfs.conf /etc/fdfs/</div></pre></td></tr></table></figure>
<p>就需要编辑刚拷贝的这个mod_fastdfs.conf文件了，打开mod_fastdfs.conf并按顺序依次编译以下内容：</p>
<blockquote>
<p>base_path=/opt/fastdfs_storage        #保存日志目录<br>tracker_server=10.211.55.8:22122   #tracker服务器的IP地址以及端口号<br>storage_server_port=23000             #storage服务器的端口号<br>url_have_group_name = true            #文件 url 中是否有 group 名<br>store_path0=/opt/fastdfs_storage_data #存储路径<br>group_count = 3                       #设置组的个数，事实上这次只使用了group1</p>
</blockquote>
<p>设置了group_count = 3，接下来就需要在文件尾部追加这3个group setting：</p>
<blockquote>
<p>[group1]<br>group_name=group1<br>storage_server_port=23000<br>store_path_count=1<br>store_path0=/opt/fastdfs_storage_data</p>
<p>[group2]<br>group_name=group2<br>storage_server_port=23000<br>store_path_count=1<br>store_path0=/opt/fastdfs_storage_data</p>
<p>[group3]<br>group_name=group3<br>storage_server_port=23000<br>store_path_count=1<br>store_path0=/opt/fastdfs_storage_data</p>
</blockquote>
<p>接下来还需要建立 M00 至存储目录的符号连接：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ln  -s  /opt/fastdfs_storage_data/data  /opt/fastdfs_storage_data/data/M00</div></pre></td></tr></table></figure>
<p>最后启动nginx：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/usr/local/nginx/sbin/nginx</div></pre></td></tr></table></figure>
<p>通过浏览器访问 <a href="http://10.211.55.8:9999/" target="_blank" rel="external">http://10.211.55.8:9999/</a> 也可以看到nginx的主页：</p>
<h3 id="tracker-nginx"><a href="#tracker-nginx" class="headerlink" title="tracker nginx"></a>tracker nginx</h3><p>同理，再装一个nginx，目录命名为 <strong>nginx2</strong> ，安装路径依旧放在 <strong>/usr/local</strong> 下，由于和之前一样，此处就不再做详细解释：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">cd /usr/loca/src/nginx-1.8.1</div><div class="line">./configure --prefix=/usr/local/nginx2 --add-module=/usr/local/src/fastdfs-nginx-module/src</div><div class="line">make &amp;&amp; make install</div></pre></td></tr></table></figure>
<p>接下来依然是修改nginx2的配置文件，进入conf目录并打开nginx.conf文件加入以下配置，storage的nginx无需修改listen端口，即默认的80端口，并将upstream指向tracker的nginx地址：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vi /usr/local/nginx2/conf/nginx.conf</div></pre></td></tr></table></figure>
<p><img src="/img/20171222/WX20171222-170041@2x.png" alt=""></p>
<p>至此关于fastdfs就已经全部配置完毕了，再一次进行测试看看是否能正常上传文件并通过http访问文件。</p>
<p>上传文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">scp big.jpg root@10.211.55.8:/tmp/</div><div class="line">cd /tmp/</div><div class="line">/usr/bin/fdfs_upload_file /etc/fdfs/client.conf big.jpg</div><div class="line">/usr/bin/fdfs_upload_file /etc/fdfs/client.conf CADENCE+SPB+15.7工程实例入门.pdf</div><div class="line">/usr/bin/fdfs_upload_file /etc/fdfs/client.conf Step\ by\ Step_\ How\ to\ easily\ tie\ the\ FG\ Knot.mp4</div></pre></td></tr></table></figure></p>
<p>接下来的关键就是通过HTTP测试文件访问，打开浏览器输入ip地址+文件名看看是否能正常访问该图片：</p>
<p><a href="http://10.211.55.8:9999/group1/M00/00/00/CtM3CFo8ysuALXURAAyIkvltU0w661.jpg" target="_blank" rel="external">http://10.211.55.8:9999/group1/M00/00/00/CtM3CFo8ysuALXURAAyIkvltU0w661.jpg</a><br><a href="http://10.211.55.8:9999/group1/M00/00/00/CtM3CFo8ytGABqkAAnhI9lHEHhw379.pdf" target="_blank" rel="external">http://10.211.55.8:9999/group1/M00/00/00/CtM3CFo8ytGABqkAAnhI9lHEHhw379.pdf</a><br><a href="http://10.211.55.8:9999/group1/M00/00/00/CtM3CFo8ytaAZqEqA8pGTvhXcBQ424.mp4" target="_blank" rel="external">http://10.211.55.8:9999/group1/M00/00/00/CtM3CFo8ytaAZqEqA8pGTvhXcBQ424.mp4</a></p>
<p><img src="/img/20171222/WX20171222-170825@2x.png" alt=""></p>
<p>一切正常~ 至此关于FastDFS在CentOS 7下的部署测试就已经全部完成。</p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;简介&quot;&gt;&lt;a href=&quot;#简介&quot; class=&quot;headerlink&quot; title=&quot;简介&quot;&gt;&lt;/a&gt;简介&lt;/h1&gt;&lt;p&gt;FastDFS是一个开源的轻量级分布式文件系统，由跟踪服务器（tracker server）、存储服务器（storage server）和客户端（client）三个部分组成，主要解决了海量数据存储问题，特别适合以中小文件（建议范围：&lt;strong&gt;4KB &amp;lt; file_size &amp;lt;500MB&lt;/strong&gt; ）为载体的在线服务。&lt;/p&gt;
    
    </summary>
    
    
      <category term="FastDFS" scheme="http://cuiqingwei.github.io/tags/FastDFS/"/>
    
  </entry>
  
  <entry>
    <title>curl模拟http发送get或post接口测试</title>
    <link href="http://cuiqingwei.github.io/2017/12/05/2017-12-05-curl%E6%A8%A1%E6%8B%9Fhttp%E5%8F%91%E9%80%81get%E6%88%96post%E6%8E%A5%E5%8F%A3%E6%B5%8B%E8%AF%95/"/>
    <id>http://cuiqingwei.github.io/2017/12/05/2017-12-05-curl模拟http发送get或post接口测试/</id>
    <published>2017-12-05T06:12:08.000Z</published>
    <updated>2017-12-05T07:04:59.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="一、get请求"><a href="#一、get请求" class="headerlink" title="一、get请求"></a>一、get请求</h1><p>curl “<a href="http://www.baidu.com" target="_blank" rel="external">http://www.baidu.com</a>“     如果这里的URL指向的是一个文件或者一幅图都可以直接下载到本地<br>curl -i “<a href="http://www.baidu.com" target="_blank" rel="external">http://www.baidu.com</a>“  显示全部信息<br>curl -l “<a href="http://www.baidu.com" target="_blank" rel="external">http://www.baidu.com</a>“  只显示头部信息<br>curl -v “<a href="http://www.baidu.com" target="_blank" rel="external">http://www.baidu.com</a>“  显示get请求全过程解析<br>wget “<a href="http://www.baidu.com" target="_blank" rel="external">http://www.baidu.com</a>“     也可以</p>
<a id="more"></a>
<h1 id="二、post请求"><a href="#二、post请求" class="headerlink" title="二、post请求"></a>二、post请求</h1><p>curl -d “param1=value1&amp;param2=value2” “<a href="http://www.baidu.com" target="_blank" rel="external">http://www.baidu.com</a>“</p>
<h1 id="三、json格式的post请求"><a href="#三、json格式的post请求" class="headerlink" title="三、json格式的post请求"></a>三、json格式的post请求</h1><p>curl -l -H “Content-type: application/json” -X POST -d ‘{“phone”:”13521389587”,”password”:”test”}’ <a href="http://domain/apis/users.json" target="_blank" rel="external">http://domain/apis/users.json</a></p>
<blockquote>
<p>例如：curl -l -H “Content-type: application/json” -X POST -d ‘{“ver”: “1.0”,”soa”:{“req”:”123”},”iface”:”me.ele.lpdinfra.prediction.service.PredictionService”,”method”:”restaurant_make_order_time”,”args”:{“arg2”:”\”stable\””,”arg1”:”{\”code\”:[\”WIND\”],\”temperature\”:11.11}”,”arg0”:”{\”tracking_id\”:\”100000000331770936\”,\”eleme_order_id\”:\”100000000331770936\”,\”platform_id\”:\”4\”,\”restaurant_id\”:\”482571\”,\”dish_num\”:1,\”dish_info\”:[{\”entity_id\”:142547763,\”quantity\”:1,\”category_id\”:1,\”dish_name\”:\”[0xe7][0x89][0xb9][0xe4][0xbb][0xb7][0xe8][0x85][0x8a][0xe5][0x91][0xb3][0xe5][0x8f][0x89][0xe7][0x83][0xa7][0xe5][0x8f][0x8c][0xe6][0x8b][0xbc][0xe7][0x85][0xb2][0xe4][0xbb][0x94][0xe9][0xa5][0xad]\”,\”price\”:31.0}],\”merchant_location\”:{\”longitude\”:\”121.47831425\”,\”latitude\”:\”31.27576153\”},\”customer_location\”:{\”longitude\”:\”121.47831425\”,\”latitude\”:\”31.27576153\”},\”created_at\”:1477896550,\”confirmed_at\”:1477896550,\”dishes_total_price\”:0.0,\”food_boxes_total_price\”:2.0,\”delivery_total_price\”:2.0,\”pay_amount\”:35.0,\”city_id\”:\”1\”}”}}’ <a href="http://vpcb-lpdinfra-stream-1.vm.elenet.me:8989/rpc" target="_blank" rel="external">http://vpcb-lpdinfra-stream-1.vm.elenet.me:8989/rpc</a></p>
</blockquote>
<p>ps：json串内层参数需要格式化</p>
<h1 id="四、高级功能"><a href="#四、高级功能" class="headerlink" title="四、高级功能"></a>四、高级功能</h1><p>curl命令是一个功能强大的网络工具，它能够通过http、ftp等方式下载文件，也能够上传文件。其实curl远不止前面所说的那些功能，大家可以通过man curl阅读手册页获取更多的信息。类似的工具还有wget。</p>
<p>curl命令使用了libcurl库来实现，libcurl库常用在C程序中用来处理HTTP请求，curlpp是libcurl的一个C++封装，这几个东西可以用在抓取网页、网络监控等方面的开发，而curl命令可以帮助来解决开发过程中遇到的问题。</p>
<ul>
<li>1，抓取页面内容到一个文件中</li>
</ul>
<p>curl -o home.html <a href="http://www.baidu.com" target="_blank" rel="external">http://www.baidu.com</a>   –将百度首页内容抓下到home.html中<br>curl -o #2_#1.jpg<a href="http://cgi2.tky.3web.ne.jp/~{A,B}/[001-201].JPG" target="_blank" rel="external">http://cgi2.tky.3web.ne.jp/~{A,B}/[001-201].JPG</a></p>
<p>由于A/B下的文件名都是001，002…，201，下载下来的文件重名，这样，自定义出来下载下来的文件名，就变成了这样：原来： A/001.JPG —-&gt; 下载后： 001-A.JPG 原来： B/001.JPG —&gt; 下载后： 001-B.JPG</p>
<ul>
<li>2，用-O（大写的），后面的url要具体到某个文件，不然抓不下来。还可以用正则来抓取东西</li>
</ul>
<p>curl -O <a href="http://img.voidcn.com/vcimg/000/000/767/511_420_fe4.gif" target="_blank" rel="external">http://img.voidcn.com/vcimg/000/000/767/511_420_fe4.gif</a></p>
<p>运行结果如下：</p>
<p>% Total    % Received % Xferd  Average Speed   Time    Time     Time  Current<br>Dload  Upload   Total   Spent    Left  Speed<br>100  1575  100  1575    0     0  14940      0 –:–:– –:–:– –:–:– 1538k<br>会在当前执行目录中生成一张bdlogo.gif的图片。</p>
<p>curl -O <a href="http://XXXXX/screen[1-10].JPG" target="_blank" rel="external">http://XXXXX/screen[1-10].JPG</a>  –下载screen1.jpg~screen10.jpg</p>
<ul>
<li>3，模拟表单信息，模拟登录，保存cookie信息</li>
</ul>
<p>curl -c ./cookie_c.txt -F log=aaaa -F pwd=<strong>**</strong><a href="http://www.XXXX.com/wp-login.php" target="_blank" rel="external">http://www.XXXX.com/wp-login.php</a></p>
<ul>
<li>4，模拟表单信息，模拟登录，保存头信息</li>
</ul>
<p>curl -D ./cookie_D.txt -F log=aaaa -F pwd=<strong>**</strong><a href="http://www.XXXX.com/wp-login.php" target="_blank" rel="external">http://www.XXXX.com/wp-login.php</a></p>
<p>-c(小写)产生的cookie和-D里面的cookie是不一样的。</p>
<ul>
<li>5，使用cookie文件</li>
</ul>
<p>curl -b ./cookie_c.txt <a href="http://www.XXXX.com/wp-admin" target="_blank" rel="external">http://www.XXXX.com/wp-admin</a></p>
<ul>
<li>6，断点续传，-C(大写)</li>
</ul>
<p>curl -C -O <a href="http://img.voidcn.com/vcimg/000/000/767/511_420_fe4.gif" target="_blank" rel="external">http://img.voidcn.com/vcimg/000/000/767/511_420_fe4.gif</a></p>
<ul>
<li>7，传送数据,最好用登录页面测试，因为你传值过去后，curl回抓数据，你可以看到你传值有没有成功</li>
</ul>
<p>curl -d log=aaaa <a href="http://www.XXXX.com/wp-login.php" target="_blank" rel="external">http://www.XXXX.com/wp-login.php</a></p>
<ul>
<li>8，显示抓取错误，下面这个例子，很清楚的表明了。</li>
</ul>
<p>curl -f<a href="http://www.XXXX.com/asdf" target="_blank" rel="external">http://www.XXXX.com/asdf</a></p>
<p>curl: (22) The requested URL returned error: 404</p>
<p>curl<a href="http://www.XXXX.com/asdf" target="_blank" rel="external">http://www.XXXX.com/asdf</a></p>
<p><html><head><title>404,not found</title></head></html></p>
<ul>
<li>9，伪造来源地址，有的网站会判断，请求来源地址，防止盗链。</li>
</ul>
<p>curl -e<a href="http://localhosthttp://www.XXXX.com/wp-login.php" target="_blank" rel="external">http://localhosthttp://www.XXXX.com/wp-login.php</a></p>
<ul>
<li>10，当我们经常用curl去搞人家东西的时候，人家会把你的IP给屏蔽掉的,这个时候,我们可以用代理</li>
</ul>
<p>curl -x 24.10.28.84:32779 -o home.html<a href="http://www.XXXX.com" target="_blank" rel="external">http://www.XXXX.com</a></p>
<ul>
<li>11，比较大的东西，我们可以分段下载</li>
</ul>
<p>curl -r 0-100 -o img.part1<a href="http://www.XXXX.com/wp-content/uploads/2010/09/compare_varnish.jpg" target="_blank" rel="external">http://www.XXXX.com/wp-content/uploads/2010/09/compare_varnish.jpg</a></p>
<p>% Total    % Received % Xferd  Average Speed   Time    Time     Time  Current<br>Dload  Upload   Total   Spent    Left  Speed<br>100   101  100   101    0     0    105      0 –:–:– –:–:– –:–:–     0<br>curl -r 100-200 -o img.part2<a href="http://www.XXXX.com/wp-ontent/uploads/2010/09/compare_varnish.jpg" target="_blank" rel="external">http://www.XXXX.com/wp-ontent/uploads/2010/09/compare_varnish.jpg</a><br>% Total    % Received % Xferd  Average Speed   Time    Time     Time  Current<br>Dload  Upload   Total   Spent    Left  Speed<br>100   101  100   101    0     0     57      0  0:00:01  0:00:01 –:–:–     0<br>curl -r 200- -o img.part3<a href="http://www.XXXX.com/wp-content/uploads/2010/09/compare_varnish.jpg" target="_blank" rel="external">http://www.XXXX.com/wp-content/uploads/2010/09/compare_varnish.jpg</a><br>% Total    % Received % Xferd  Average Speed   Time    Time     Time  Current<br>Dload  Upload   Total   Spent    Left  Speed<br>100  104k  100  104k    0     0  52793      0  0:00:02  0:00:02 –:–:– 88961</p>
<p>ls |grep part | xargs du -sh</p>
<p>4.0K    one.part1<br>112K    three.part3<br>4.0K    two.part2</p>
<p>用的时候，把他们cat一下就OK,cat img.part* &gt;img.jpg</p>
<ul>
<li>12，不会显示下载进度信息</li>
</ul>
<p>curl -s -o aaa.jpg <a href="http://img.voidcn.com/vcimg/000/000/767/511_420_fe4.gif" target="_blank" rel="external">http://img.voidcn.com/vcimg/000/000/767/511_420_fe4.gif</a></p>
<ul>
<li>13，显示下载进度条</li>
</ul>
<p>curl  -0 <a href="http://img.voidcn.com/vcimg/000/000/767/511_420_fe4.gif" target="_blank" rel="external">http://img.voidcn.com/vcimg/000/000/767/511_420_fe4.gif</a>     (以http1.0协议请求)</p>
<p>####################################################################### 100.0%</p>
<ul>
<li>14,通过ftp下载文件</li>
</ul>
<p>curl -u用户名:密码 -O<a href="http://www.XXXX.com/demo/curtain/bbstudy_files/style.css" target="_blank" rel="external">http://www.XXXX.com/demo/curtain/bbstudy_files/style.css</a></p>
<p>% Total    % Received % Xferd  Average Speed   Time    Time     Time  Current<br>Dload  Upload   Total   Spent    Left  Speed<br>101  1934  101  1934    0     0   3184      0 –:–:– –:–:– –:–:–  7136</p>
<p>curl -u 用户名:密码 -O <a href="http://www.XXXX.com/demo/curtain/bbstudy_files/style.css" target="_blank" rel="external">http://www.XXXX.com/demo/curtain/bbstudy_files/style.css</a></p>
<p>% Total    % Received % Xferd  Average Speed   Time    Time     Time  Current<br>Dload  Upload   Total   Spent    Left  Speed<br>101  1934  101  1934    0     0   3184      0 –:–:– –:–:– –:–:–  7136</p>
<p>或者用下面的方式</p>
<p>curl -O ftp://用户名:密码@ip:port/demo/curtain/bbstudy_files/style.css<br>curl -O ftp://用户名:密码@ip:port/demo/curtain/bbstudy_files/style.css</p>
<ul>
<li>15，通过ftp上传</li>
</ul>
<p>curl -T test.sql ftp://用户名:密码@ip:port/demo/curtain/bbstudy_files/<br>curl -T test.sql ftp://用户名:密码@ip:port/demo/curtain/bbstudy_files/</p>
<ul>
<li>15,模拟浏览器头</li>
</ul>
<p>curl -A “Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.0)” -x 123.45.67.89:1080 -o page.html -D cookie0001.txt<a href="http://www.www.baidu.com" target="_blank" rel="external">http://www.www.baidu.com</a></p>
<ul>
<li>16,PUT、GET、POST</li>
</ul>
<p>比如 curl -T localfile <a href="http://cgi2.tky.3web.ne.jp/~zz/abc.cgi，这时候，使用的协议是HTTP的PUT" target="_blank" rel="external">http://cgi2.tky.3web.ne.jp/~zz/abc.cgi，这时候，使用的协议是HTTP的PUT</a> method<br>刚才说到PUT，自然想起来了其他几种methos－－GET和POST。<br>http提交一个表单，比较常用的是POST模式和GET模式<br>GET模式什么option都不用，只需要把变量写在url里面就可以了<br>比如：<br>curl <a href="http://www.yahoo.com/login.cgi?user=nick&amp;password=12345" target="_blank" rel="external">http://www.yahoo.com/login.cgi?user=nick&amp;password=12345</a><br>而POST模式的option则是 -d<br>比如，curl -d “user=nick&amp;password=12345” <a href="http://www.yahoo.com/login.cgi" target="_blank" rel="external">http://www.yahoo.com/login.cgi</a><br>就相当于向这个站点发出一次登陆申请<del>~</del><br>到底该用GET模式还是POST模式，要看对面服务器的程序设定。<br>一点需要注意的是，POST模式下的文件上的文件上传，比如</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&lt;form method=&quot;POST&quot; enctype=&quot;multipar/form-data&quot; action=&quot;http://cgi2.tky.3web.ne.jp/~zz/up_file.cgi&quot;&gt;</div><div class="line">&lt;input type=file name=upload&gt;</div><div class="line">&lt;input type=submit name=nick value=&quot;go&quot;&gt;</div><div class="line">&lt;/form&gt;</div></pre></td></tr></table></figure>
<p>这样一个HTTP表单，我们要用curl进行模拟，就该是这样的语法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">curl -F upload=@localfile -F nick=go http://cgi2.tky.3web.ne.jp/~zz/up_file.cgi</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;一、get请求&quot;&gt;&lt;a href=&quot;#一、get请求&quot; class=&quot;headerlink&quot; title=&quot;一、get请求&quot;&gt;&lt;/a&gt;一、get请求&lt;/h1&gt;&lt;p&gt;curl “&lt;a href=&quot;http://www.baidu.com&quot;&gt;http://www.baidu.com&lt;/a&gt;“     如果这里的URL指向的是一个文件或者一幅图都可以直接下载到本地&lt;br&gt;curl -i “&lt;a href=&quot;http://www.baidu.com&quot;&gt;http://www.baidu.com&lt;/a&gt;“  显示全部信息&lt;br&gt;curl -l “&lt;a href=&quot;http://www.baidu.com&quot;&gt;http://www.baidu.com&lt;/a&gt;“  只显示头部信息&lt;br&gt;curl -v “&lt;a href=&quot;http://www.baidu.com&quot;&gt;http://www.baidu.com&lt;/a&gt;“  显示get请求全过程解析&lt;br&gt;wget “&lt;a href=&quot;http://www.baidu.com&quot;&gt;http://www.baidu.com&lt;/a&gt;“     也可以&lt;/p&gt;
    
    </summary>
    
    
      <category term="curl" scheme="http://cuiqingwei.github.io/tags/curl/"/>
    
  </entry>
  
  <entry>
    <title>怎样的家居照明才有质感?</title>
    <link href="http://cuiqingwei.github.io/2017/12/04/2017-12-04-%E6%80%8E%E6%A0%B7%E7%9A%84%E5%AE%B6%E5%B1%85%E7%85%A7%E6%98%8E%E6%89%8D%E6%9C%89%E8%B4%A8%E6%84%9F/"/>
    <id>http://cuiqingwei.github.io/2017/12/04/2017-12-04-怎样的家居照明才有质感/</id>
    <published>2017-12-04T06:12:08.000Z</published>
    <updated>2017-12-04T06:39:55.000Z</updated>
    
    <content type="html"><![CDATA[<p>生活要有质感，这是很多人所追求的，也是很多人所向往的，但是，你真的懂质感吗?质感这种东西，重要的是感觉。怎样才能让自己的家变得有感觉呢?</p>
<p>答案当然是灯光!试想一下，当你回到家，看到明亮的、昏黄的、温暖的灯光，是不是都能让你的家有不一样的感觉?我们先来看一看，一个家的六大功能区。</p>
<a id="more"></a>
<p><img src="/img/20171204/640.jpeg" alt=""></p>
<p>一般人都会想，房间只要够亮就行了，于是就出现了下面这种“一盏荧光灯or吸顶灯走天下”的死板场景。</p>
<p><img src="/img/20171204/640-1.jpeg" alt=""></p>
<p>怎么样，是不是感觉看到了自己的家?</p>
<p>这样简单粗暴的照明设置，只能解决基本的照明需求。实际使用起来你会发现，其实有诸多不便，有解决办法吗?</p>
<p>当然有!这时候你就需要给家里做一个专业的灯光设计。</p>
<p><img src="/img/20171204/640-2.jpeg" alt=""></p>
<p>灯光100%、50%、10%、多种灯具互相配合，明暗张弛有度，提高房间品味的同时还能打造房间层次感。</p>
<p>那想打造一个生活与灯光协调的智能化住宅，具体应该怎么做呢?</p>
<p>首先你得认识灯光，了解灯光，才能合理的运用灯光。</p>
<h3 id="1、如何认识灯光"><a href="#1、如何认识灯光" class="headerlink" title="1、如何认识灯光?"></a>1、如何认识灯光?</h3><p><img src="/img/20171204/640-3.jpeg" alt=""></p>
<p>买灯具跟买家具一样，既麻烦又复杂，以下就是小编贴心为大家整理的两个步骤，学会它，选灯具似乎也很简单。</p>
<ul>
<li>1)确认你需要的灯光类别</li>
<li>2)确认你需要的照明方式</li>
</ul>
<p>灯光的类别分为：环境光、轮廓光、焦点光。</p>
<p><img src="/img/20171204/640-4.jpeg" alt=""></p>
<p>环境光是指照明范围最大的常规光源，看不清直接光源和方向，具有柔和的光照。</p>
<p>轮廓光主要是强调墙壁，天花板等的轮廓，营造空间的层次感，还可以增添室内的美感。</p>
<p>焦点光相对照明范围小，光照集中，主要用来营造局部的氛围</p>
<p>三种光的作用不一样当然照明方式也不一样。</p>
<blockquote>
<p>环境光照明方式↓</p>
</blockquote>
<p><img src="/img/20171204/640-5.jpeg" alt=""></p>
<blockquote>
<p>轮廓光照明方式↓</p>
</blockquote>
<p><img src="/img/20171204/640-6.jpeg" alt=""></p>
<blockquote>
<p>焦点光照明方式↓</p>
</blockquote>
<p><img src="/img/20171204/640-7.jpeg" alt=""></p>
<p>对灯光有了基本了解，接下来就看看灯光如何进行空间布局吧。</p>
<h3 id="2、玄关"><a href="#2、玄关" class="headerlink" title="2、玄关"></a>2、玄关</h3><p><img src="/img/20171204/640-8.jpeg" alt=""></p>
<p>传统的灯光只是起到了一个基础照明的作用，没有考虑到使用起来的方便性。人的身体会阻挡住焦点光，有限的光源也会让玄关柜的阴影阻挡视线。而且一进门，就要摸黑去找开关，导致来访，换鞋都很不方便。</p>
<p><img src="/img/20171204/640-9.jpeg" alt=""></p>
<p>人在玄关处停留的市价虽然不长，但是一个明亮的光线还是很重要的。</p>
<p>选用整体适合整体照明的嵌入式节能灯，光线平均且充分。在顶部设置红外感应开关，人一进家门就自动开启了回家模式，带来更好的居家体验。</p>
<p><img src="/img/20171204/640-10.jpeg" alt=""></p>
<h3 id="3、客厅"><a href="#3、客厅" class="headerlink" title="3、客厅"></a>3、客厅</h3><p><img src="/img/20171204/640-11.jpeg" alt=""></p>
<p>传统的客厅，用一盏吸顶灯或荧光灯管，就可以轻松的照亮整个空间。但是缺乏特色和可变性，不能根据空间使用者的行为变化做出对应调整。</p>
<p><img src="/img/20171204/640-12.jpeg" alt=""></p>
<p>采用点状光源，均匀分布于天花板，按需求调节亮度，节省用电，选用造型感强的漫射照明灯具，以满足核心区域的照明需求。</p>
<p><img src="/img/20171204/640-13.jpeg" alt=""></p>
<p>在墙面区域，可以增加光线更柔和、更均匀的间接照明灯饰。比如灯带或者一些小台灯。这样可以使人更放松。电视上方可以装灯槽，为整个空间提供漫反射光线，减少电视画面与背后的亮差，缓解视觉疲劳。</p>
<p><img src="/img/20171204/640-14.jpeg" alt=""></p>
<p>电视机旁的角落，可以加一盏落地灯，它能使客厅显得更有层次感，也能在你看电视的时候，提供柔和的中段视觉的光线，让你的眼睛有更舒服的体验。同时，一个颜值高的落地灯也是一个提升家庭格调的装饰物。</p>
<p><img src="/img/20171204/640-15.jpeg" alt=""></p>
<p>客厅的边缘区域一般会有装饰挂画，可以使用可调角度的轨道射灯提供照明，同时为附近的空间提供间接照明，客人来家里就可以清楚的欣赏你的挂画。</p>
<p><img src="/img/20171204/640-16.jpeg" alt=""></p>
<h3 id="4、餐厅"><a href="#4、餐厅" class="headerlink" title="4、餐厅"></a>4、餐厅</h3><p><img src="/img/20171204/640-17.jpeg" alt=""></p>
<p>你家的餐厅照明是不是这样?</p>
<p><img src="/img/20171204/640-18.jpeg" alt=""></p>
<p>一盏吸顶灯搞定全区照明，满足了日常使用，但是体验却不好。</p>
<p>餐厅在照明上需要满足的两个点：一是要看的见菜，而是要看得清楚人。设计照明的目的则是为了更好的展现食物和人的气色。</p>
<p>餐厅是最需要调光的，摩根可以通过全宅调光，增加空间的个性，突出食物的美味，打造一个光线柔和的空间。我们去高档餐厅吃饭，会发现里面的灯光都不会很亮，给人一种温馨，舒适的感觉。如果对餐厅做了调光的话，我们在家就可以享受到高档餐厅才有的灯光环境氛围。当节假日，比如情人节、结婚纪念日，生日，吃西餐时，我们把餐厅的灯光调至50%、10%，就可以打造出烛光晚餐的效果，这是一件多么浪漫的事情啊。</p>
<p><img src="/img/20171204/640-19.jpeg" alt=""></p>
<h3 id="5、厨房"><a href="#5、厨房" class="headerlink" title="5、厨房"></a>5、厨房</h3><p><img src="/img/20171204/640-20.jpeg" alt=""></p>
<p>厨房作为美食的生产地，也是整个家里最需要光的地方，大多数人却只是在天花中央安了一盏吸顶灯而已。</p>
<p>当你切菜煮饭的时候就会发现，你刚好挡住了吸顶灯下的光，面对的地方都是一片阴影。</p>
<p><img src="/img/20171204/640-21.jpeg" alt=""></p>
<p>是不是仿佛又看到了自己在厨房摸黑切菜的样子?</p>
<p>采用暖黄色灯光，在料理台和水槽的上方增加焦点光，安装小射灯用于局部和重点照明。厨房的收纳区域可以增加轮廓光补充照明，安装灯带便于取放物件。</p>
<p><img src="/img/20171204/640-22.jpeg" alt=""></p>
<p>如果是开放式厨房，摩根选用可调角度的窄光速角射灯照亮料理台，这样能更灵活地调节光线。</p>
<p><img src="/img/20171204/640-23.jpeg" alt=""></p>
<h3 id="6、卧室"><a href="#6、卧室" class="headerlink" title="6、卧室"></a>6、卧室</h3><p><img src="/img/20171204/640-24.jpeg" alt=""></p>
<p>这是我们的卧室，我们回到卧室主要是休息、睡觉的，我们可以把灯光调至10%，这种昏暗的灯光下，有助于我们快速入眠，有小孩的话，哄孩子入睡也会非常容易。尤其是小朋友，不敢关着灯睡觉时，可只留10%的亮光，睡着后会自动启动“睡眠模式”将灯光关闭。如果累了，想休息时，也只需按一下“睡眠模式”，不会影响睡眠质量。</p>
<p>卧室是我们休息的区域，卧室的照明除了要满足平时的活动，还要顾及到起夜的时候，光线对睡眼惺忪的人来说，会很刺眼。</p>
<p><img src="/img/20171204/640-25.jpeg" alt=""></p>
<p>卧室的照明其实可以分为两部分：</p>
<ul>
<li>A整体照明。</li>
<li>B局部照明。</li>
</ul>
<p><img src="/img/20171204/640-26.jpeg" alt=""></p>
<p>整体照明可以装在卧室中央(床尾的天花板上)，避开躺下时会让光线直接进入视线的位置。布置柔和灯带抬高天花板，并通过漫反射的间接照明为整个空间进行光照辅助，整体感觉很舒服。</p>
<p><img src="/img/20171204/640-27.jpeg" alt=""></p>
<p>局部照明是为了让人在床上进行税前活动和方便起夜设置的。可以在床头距地约1.8m的两段墙壁，安装不占空间的壁灯。或者设置床头柜台灯或者落地灯也可以。</p>
<p><img src="/img/20171204/640-28.jpeg" alt=""></p>
<p>如果比较怕黑的，可以学酒店，在床尾设置光线微弱的墙角灯，增加安全感。晚上睡觉时只需要开一盏小小的灯就够了。</p>
<p>喜欢大晚上看电视的，也要分散屏幕强光。在背景墙两边增加灯槽，拉近光暗对比，避免在昏暗环境下对视力造成伤害。</p>
<p><img src="/img/20171204/640-29.jpeg" alt=""></p>
<h3 id="7、卫生间"><a href="#7、卫生间" class="headerlink" title="7、卫生间"></a>7、卫生间</h3><p><img src="/img/20171204/640-30.jpeg" alt=""></p>
<p>卫生间别看面积不大，里面的灯光可是大有名堂。卫生间的灯光设置不合理，在镜子前人脸会出现阴影，不利于化妆、刮胡子等脸部清洁活动。</p>
<p><img src="/img/20171204/640-31.jpeg" alt=""></p>
<p>在镜前区增加镜前照明，光源均匀打在脸上，可以避免出现上述情况。镜柜下方放置洗浴用品的位置，同样可以增设灯带。浴缸上方采用灯带取代传统的直射吸顶灯，营造均匀柔和的光线。避免中央光源对眼睛的影响。</p>
<p><img src="/img/20171204/640-32.jpeg" alt=""></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;生活要有质感，这是很多人所追求的，也是很多人所向往的，但是，你真的懂质感吗?质感这种东西，重要的是感觉。怎样才能让自己的家变得有感觉呢?&lt;/p&gt;
&lt;p&gt;答案当然是灯光!试想一下，当你回到家，看到明亮的、昏黄的、温暖的灯光，是不是都能让你的家有不一样的感觉?我们先来看一看，一个家的六大功能区。&lt;/p&gt;
    
    </summary>
    
    
      <category term="智能家居" scheme="http://cuiqingwei.github.io/tags/%E6%99%BA%E8%83%BD%E5%AE%B6%E5%B1%85/"/>
    
  </entry>
  
  <entry>
    <title>CentOS7添加开机启动服务脚本</title>
    <link href="http://cuiqingwei.github.io/2017/11/29/2017-11-29-CentOS7%E6%B7%BB%E5%8A%A0%E5%BC%80%E6%9C%BA%E5%90%AF%E5%8A%A8%E6%9C%8D%E5%8A%A1%E8%84%9A%E6%9C%AC/"/>
    <id>http://cuiqingwei.github.io/2017/11/29/2017-11-29-CentOS7添加开机启动服务脚本/</id>
    <published>2017-11-29T01:02:08.000Z</published>
    <updated>2017-11-29T01:35:13.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="一、添加开机自启服务"><a href="#一、添加开机自启服务" class="headerlink" title="一、添加开机自启服务"></a>一、添加开机自启服务</h1><p>在CentOS 7中添加开机自启服务非常方便，只需要两条命令(以Jenkins为例)：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">systemctl enable jenkins.service  # 设置jenkins服务为自启动服务</div><div class="line">sysstemctl start  jenkins.service # 启动jenkins服务</div></pre></td></tr></table></figure>
<a id="more"></a>
<h1 id="二、添加开机自启脚本"><a href="#二、添加开机自启脚本" class="headerlink" title="二、添加开机自启脚本"></a>二、添加开机自启脚本</h1><p>在centos7中增加脚本有两种常用的方法，以脚本autostart.sh为例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">#!/bin/bash</div><div class="line">#description:开机自启脚本</div><div class="line">/usr/local/tomcat/bin/startup.sh  #启动tomcat</div></pre></td></tr></table></figure>
<h3 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h3><p>1、赋予脚本可执行权限（/opt/script/autostart.sh是你的脚本路径）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">chmod +x /opt/script/autostart.sh</div></pre></td></tr></table></figure>
<p>2、打开/etc/rc.d/rc/local文件，在末尾增加如下内容</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/opt/script/autostart.sh</div></pre></td></tr></table></figure>
<p>3、在centos7中，/etc/rc.d/rc.local的权限被降低了，所以需要执行如下命令赋予其可执行权限</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">chmod +x /etc/rc.d/rc.local</div></pre></td></tr></table></figure>
<h3 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h3><p>1、将脚本移动到/etc/rc.d/init.d目录下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">mv  /opt/script/autostart.sh /etc/rc.d/init.d</div></pre></td></tr></table></figure>
<p>2、增加脚本的可执行权限</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">chmod +x  /etc/rc.d/init.d/autostart.sh</div></pre></td></tr></table></figure>
<p>3、添加脚本到开机自动启动项目中</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">cd /etc/rc.d/init.d</div><div class="line">chkconfig --add autostart.sh</div><div class="line">chkconfig autostart.sh on</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;一、添加开机自启服务&quot;&gt;&lt;a href=&quot;#一、添加开机自启服务&quot; class=&quot;headerlink&quot; title=&quot;一、添加开机自启服务&quot;&gt;&lt;/a&gt;一、添加开机自启服务&lt;/h1&gt;&lt;p&gt;在CentOS 7中添加开机自启服务非常方便，只需要两条命令(以Jenkins为例)：&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;systemctl enable jenkins.service  # 设置jenkins服务为自启动服务&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;sysstemctl start  jenkins.service # 启动jenkins服务&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
      <category term="linux" scheme="http://cuiqingwei.github.io/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>基于红外阵列传感器的检测系统</title>
    <link href="http://cuiqingwei.github.io/2017/11/27/2017-11-27-%E5%9F%BA%E4%BA%8E%E7%BA%A2%E5%A4%96%E9%98%B5%E5%88%97%E4%BC%A0%E6%84%9F%E5%99%A8%E7%9A%84%E6%A3%80%E6%B5%8B%E7%B3%BB%E7%BB%9F/"/>
    <id>http://cuiqingwei.github.io/2017/11/27/2017-11-27-基于红外阵列传感器的检测系统/</id>
    <published>2017-11-27T07:02:08.000Z</published>
    <updated>2017-11-29T01:22:58.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="办公节能新技术"><a href="#办公节能新技术" class="headerlink" title="办公节能新技术"></a>办公节能新技术</h2><p>在提倡建设节约型社会的今天，建筑节能问题日益得到普遍关注，而降低新风及冷风负 荷也就成为主要的节能措施之一。建筑室内人员密度是新风量及冷风量合理确定需要考虑的重点因素也是难点因素。</p>
<p>近年来，基于摄像头的人数检测技术愈发成熟。然而，在办公室这样的环境中，摄像头的使用受到一定的限制。</p>
<p>本文介绍了一种基于阵列红外传感器的办公空间人员密度监控解决方案。在充分保护个人隐私及企业秘密的前提下，准确实时的检测人员密度，从而为新风及冷风控制提供准确的输入参书以达到节能之需求。</p>
<a id="more"></a>
<h2 id="红外阵列传感器"><a href="#红外阵列传感器" class="headerlink" title="红外阵列传感器"></a>红外阵列传感器</h2><p>PIR 即人体热释电红外传感器，被广泛的应用到电子防盗、人体探测领域中，这种传感器不会导致隐私和商业保密泄露，但是这种传感器从原理上，只能检测到运动中的人体目标，单独的 PIR 传感器不能检测出人员分布。</p>
<p>红外阵列传感器是一个包含多个像素的 IR 传感阵列组合，每个像素都具有低噪声放大器以及 ADC，包含一个数字 I2C 接口用于读取传感阵列 ADC 转化后存储在 RAM 中的测量结果、以及一片 EEPROM 用于存储温度计算和校准的参数。</p>
<p>AMG8853通过探测物体由于黑体辐射而产生的红外光而测量出物体表面温度的。根据黑体辐射原理，一切温度高于绝对零度的物体都在不停地向周围空间发出红外辐射能量。</p>
<p>物体的红外辐射能量的大小及其按波长的分布与它的表面温度有着十分密切的关系。</p>
<p>因此，通过对物体自身辐射的红外能量的测量，便能准确地测定它的表面温度，这就是红外辐射测温 所依据的客观基础。</p>
<div align="center"><br><img src="/img/20171127/AMG8853.jpg" alt=""><br></div>

<p>上图为AMG8853内部结构，数字有源热电堆阵列是由 64 个传感器探测单元（热电堆）组成，每个探测单元探测接收到的红外波段能量并将其转化为电信号，经过 ADC 转化后转化为数字信息，然后通过数字滤波写入传感器中的 RAM。</p>
<p>用户通过 I2C 界面可以访问 RAM并读取测量结果用于温度计算。</p>
<p>选用 120°×30°视场角的传感器，如果垂直安装高度为 2.5 米，那么单个 AMG8853检测 范围可以覆盖到 8.6m×1.3m 的地面。采用多个传感器拼接可以实现完整的室内区域覆盖。</p>
<h2 id="红外图像采集系统"><a href="#红外图像采集系统" class="headerlink" title="红外图像采集系统"></a>红外图像采集系统</h2><p>连接红外传感器的外部单片机读取不同地址的 RAM 数据，并参考 EEPROM 的校准数值，来补偿不同传感器之间的差异，以建立热图像，来计算图像中每点的温度。</p>
<p>同时考虑到 AMG8853传感器速度快，数据量大，多个传感器拼接成像时需要良好的管 理，因此，应用中需要可靠的数据通信方式，使用以太网通讯可以保证通信质量。</p>
<p>因此在该系统中，我们采用 MN103SFL7G 作为主控单片机来接收并处理相应的数据，同时负责最终计算结果的上传，同时采用 PoE 供电方式来实现系统供电及通信。系统架构图如下：</p>
<div align="center"><br><img src="/img/20171127/AMG8853-1.jpg" alt=""><br></div>

<blockquote>
<p>整个计算共需要如下几个步骤：</p>
<ul>
<li>计算传感器自身温度，从传感器中读取 PTAT 寄存器，得到值后与参数运算获得传感器温度；</li>
<li>补偿和校准。运算值用于补偿和校准每个传感像素单元的差异。这部分计算利用了若干公式，其中的参数是由 EEPROM 中的值二次计算而来;</li>
<li>发射率补偿。根据热辐射理论，物体不可能是一个“黑体”，即其发射率总是小于 1。 不同的材料具有不同的发射率，在应用中需要考虑被测物体表面的材料发射率，并加以补偿;</li>
<li>最后根据公式计算出被测物的表面温度。</li>
</ul>
</blockquote>
<div align="center"><br><img src="/img/20171127/AMG8853-2.jpg" alt=""><br></div>

<p>计算结果即为视场内的目标的表面温度。计算结束后，结果乘以 10 以后，以整数形式存储在 RAM 中。通过 UDP 以太网协议，将数据传送至上位机。</p>
<h2 id="红外图像处理算法"><a href="#红外图像处理算法" class="headerlink" title="红外图像处理算法"></a>红外图像处理算法</h2><p>计算机通过以太网与传感器建立 UDP 连接，并获取到传感器传回的温度信息。计算机将这些数据有序的拼接起来，还原出办公室内的温度信息。</p>
<p>然而这种温度信息并不能直观的反映出办公环境中的人数和位置信息，计算机可以通过一些算法，将人数以及人所在房间中的位置计算出来，这样的结果更直观，也更利于其他应用处理。</p>
<p>因此，计算机在获取到温度信息表之后，需要通过算法将办公室内人员数量计算出来并给出对应的位置坐标。</p>
<p>室内人员数量可以通过图像处理的算法确定。人数计算的算法过程如下图所示。</p>
<div align="center"><br><img src="/img/20171127/AMG8853-3.jpg" alt=""><br></div>

<p>图像处理算法的关键在于准确的将人体温度从温度矩阵中提取出来。</p>
<p>由于人体表面温度因人而异，而且受室温的影响较大，所以有效的提取人体表面温度遇到了诸多难题。经分析和试验，采用大津法进行阈值提取，可以将人体表面温度与环境温度区别开来。</p>
<p>处理矩阵的红外信息，工程上和学术界普遍使用灰度级、伪彩色等图像的方法表示，使用图像处理的方法表示、分析和处理红外图像是可行而有效的。</p>
<p>温度数据可以通过归一化后，落在对应的灰度级上，从而可以通过灰度图像表示也可以使用蓝色表示低的温度，红色表示高温，然后在色彩空间渐变，则是伪彩色的表示方法。</p>
<p>在我们的程序中，使用伪彩色来表示温度高低，使人可以直观的看到温度分布，从图中可以看出，红色部分代表温度要比周围环境高，则认为这部分办公室空间被人占用；蓝色部分代表温度要稍微低一点，认为这部分空间没有被占用。</p>
<h2 id="最终我们将得到如下的人员分布热图及人数统计值："><a href="#最终我们将得到如下的人员分布热图及人数统计值：" class="headerlink" title="最终我们将得到如下的人员分布热图及人数统计值："></a>最终我们将得到如下的人员分布热图及人数统计值：</h2><div align="center"><br><img src="/img/20171127/AMG8853-4.png" alt=""><br></div>

<p>界面的主要部分是将温度数据矩阵通过伪彩色方法显示出来，人眼便可以直观的看出温度的高低分布。程序通过之前所述算法，获得当前办公环境中的人数，并显示在界面上。</p>
<p>楼宇控制系统可以根据所获得的数据精确的控制空间中所需要的新风量及冷风量，从而达在节能与办公舒适性直接达到最佳的平衡。</p>
<p>综上所述，基于红外阵列传感器的室内人员分布检测系统具有配置灵活、硬件结构简单、保密性好、测量效果好的特点。为办公室节能控制提供了精确的，稳定的实时数据。</p>
<p>同时可以应用在流动办公室监控配置场合，管理人员可以通过直观的界面看出人员分布情况，从而合理规划办公室空间，得到最优的空间利用。</p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;办公节能新技术&quot;&gt;&lt;a href=&quot;#办公节能新技术&quot; class=&quot;headerlink&quot; title=&quot;办公节能新技术&quot;&gt;&lt;/a&gt;办公节能新技术&lt;/h2&gt;&lt;p&gt;在提倡建设节约型社会的今天，建筑节能问题日益得到普遍关注，而降低新风及冷风负 荷也就成为主要的节能措施之一。建筑室内人员密度是新风量及冷风量合理确定需要考虑的重点因素也是难点因素。&lt;/p&gt;
&lt;p&gt;近年来，基于摄像头的人数检测技术愈发成熟。然而，在办公室这样的环境中，摄像头的使用受到一定的限制。&lt;/p&gt;
&lt;p&gt;本文介绍了一种基于阵列红外传感器的办公空间人员密度监控解决方案。在充分保护个人隐私及企业秘密的前提下，准确实时的检测人员密度，从而为新风及冷风控制提供准确的输入参书以达到节能之需求。&lt;/p&gt;
    
    </summary>
    
    
      <category term="传感器" scheme="http://cuiqingwei.github.io/tags/%E4%BC%A0%E6%84%9F%E5%99%A8/"/>
    
  </entry>
  
  <entry>
    <title>松下Grid-EYE红外阵列传感器解析</title>
    <link href="http://cuiqingwei.github.io/2017/11/26/2017-11-26-%E6%9D%BE%E4%B8%8BGrid-EYE%E7%BA%A2%E5%A4%96%E9%98%B5%E5%88%97%E5%8C%BB%E7%96%97%E4%BC%A0%E6%84%9F%E5%99%A8%E8%A7%A3%E6%9E%90/"/>
    <id>http://cuiqingwei.github.io/2017/11/26/2017-11-26-松下Grid-EYE红外阵列医疗传感器解析/</id>
    <published>2017-11-26T15:02:08.000Z</published>
    <updated>2017-11-29T01:22:58.000Z</updated>
    
    <content type="html"><![CDATA[<p> 近年来，由于基于MEMS的独立式热隔离像素结构采用薄膜红外吸收层，使得非制冷红外传感器取得了显著进展。　　</p>
<p><img src="/img/20171126/W020160708332880615768.jpg" alt=""></p>
<a id="more"></a>
<p>　　人们利用红外传感技术开发了许多应用，例如热成像、人体探测以及夜视等。对于红外能量的量化，使用户能够确定目标的温度以及热行为。</p>
<p>　　红外热传感和成像仪实现了被动、非侵入式的物体表面温度测量，并能够绘制其温度分布图谱。随着物体表面温度的升高，其辐射光谱的强度也会相应增强。这使我们可以通过远程测量人体或目标物体发射出的能量来确定其温度。红外探测器主要分为两类——红外光子探测器和红外热探测器。</p>
<h1 id="红外光子探测器"><a href="#红外光子探测器" class="headerlink" title="红外光子探测器"></a>红外光子探测器</h1><p>　　红外光子探测器利用材料和电子间的相互作用，吸收被测物体表面发出的红外辐射。通过吸收电子产生的电能分布变化，输出红外探测信号。红外光子探测器每个单元对入射辐射能量的吸收具有波长选择性。红外光子探测器具有完美的信噪比和快速响应性能。但是，红外光子探测器的缺点是需要对其进行低温冷却。而冷却要求，是基于半导体光子探测器的红外系统获得广泛应用的主要障碍。因为这使得光子探测器红外系统变得庞大、笨重、昂贵，而且使用不便。</p>
<h1 id="红外热探测器"><a href="#红外热探测器" class="headerlink" title="红外热探测器"></a>红外热探测器</h1><p>　　一直以来，高成本问题严重限制了消费类市场红外系统的发展。红外热探测器优势包括宽广的波长响应范围、无需冷却、高温稳定性、高信噪比以及较低的成本。红外热探测器主要分为热释电、热电堆和微测辐射热计。（注：本文暂不介绍微测辐射热计，请参考：非制冷红外焦平面探测器及其技术发展动态）</p>
<h1 id="红外热释电传感器"><a href="#红外热释电传感器" class="headerlink" title="红外热释电传感器"></a>红外热释电传感器</h1><p>　　热释电材料吸收热辐射，在晶体材料间产生静态电压信号。但是，热释电材料在持续的红外辐射下，其输出的静态电压信号会减弱，需要对其进行周期性的刷新。热释电探测器可以实现大规模批量生产。它们凭借防盗系统和自动照明开关等应用，在消费类市场逐渐找到了切入口。热释电探测器也被应用于高性能气体分析、火焰探测器等科学仪器。另一方面，对于静态温度测量应用，热释电探测器仍然相对比较昂贵，需要包含一些机械部件。</p>
<h1 id="红外热电堆传感器"><a href="#红外热电堆传感器" class="headerlink" title="红外热电堆传感器"></a>红外热电堆传感器</h1><p>　　根据塞贝克效应，在两种不同材料的连接处，当它们的温度有差异时，会在这两种材料组成的闭环电路中产生电流。这种现象被广泛应用于热电偶的温度测量。热电堆或热电阵列由许多热敏元件组成，每个热敏元件都是一根由两种不同热敏活性材料组成的细丝。当细丝两端的温度出现差异时，便在细丝两端产生了电压（热张力）。热接点集中在一个非常薄的共同吸收区，而冷节点位于一个周边环绕高热质量的散热片上。</p>
<p>　　现代半导体技术实现了在几平方毫米内，制造包含数百个热电偶的红外热电堆传感器。这种红外传感器因其微小的尺寸，而具有极高的灵敏度和极快的响应时间，而且由于应用了半导体规模生产和光刻技术，使其成本也较低。</p>
<h1 id="什么是Grid-EYE"><a href="#什么是Grid-EYE" class="headerlink" title="什么是Grid-EYE"></a>什么是Grid-EYE</h1><p>　　松下Grid-EYE的8 x 8热电堆阵列红外传感器，开启了其红外阵列传感器业务。Grid-EYE是一款64像素红外摄像头，采用一体化的紧凑SMD封装。基于松下的MEMS技术，Grid-EYE包含一颗MEMS传感器芯片、一颗数字ASIC（I2C接口）以及一款硅基镜头。　　</p>
<p><img src="/img/20171126/XzhN6uEQ_4dfn.png" alt=""></p>
<p>　　Grid-EYE在一个8 x 8网格式布局内含有64个热电堆元件，能够在不接触被测物体的前提下探测物体表面的绝对温度。与传统的传感器不同，Grid-EYE采用了一款受专利保护的60°硅基镜头，该镜头在硅晶圆上通过刻蚀工艺制成，是市场上最小（高度低于0.3 mm）的镜头。所有这些技术的结合，使该款传感器的封装尺寸仅为11.6 mm x 8 mm x 4.3 mm。　　</p>
<p><img src="/img/20171126/W020160708332880629183.jpg" alt=""></p>
<blockquote>
<p>含有64个热电堆元件的Grid-EYE可以探测静止和运动的人体</p>
</blockquote>
<p>　　与单点热电堆红外传感器和热释电传感器相比，Grid-EYE不仅能够探测移动的人体和物体，还能够探测不动的人体和物体的出现和位置、运动方向以及精确的表面温度，温度测量范围为- 20°C~+100°C。　　</p>
<p><img src="/img/20171126/W020160708332880624859.jpg" alt=""></p>
<blockquote>
<p>基于MEMS技术的热电堆阵列红外传感器</p>
</blockquote>
<p>　　松下凭借Grid-EYE的宽温度测量范围，其噪声等效温差在室温时，精度达到了+/- 0.08°C @ 1Hz。Grid-EYE热电堆传感元件协同阵列，能够探测多个人体或物体在不同方向上的运动。近距离时，Grid-EYE甚至能够探测人手的运动，实现简单的手势控制。　<br><img src="/img/20171126/W020160708332880629505.jpg" alt=""></p>
<blockquote>
<p>Grid-EYE红外传感器实现手势控制</p>
</blockquote>
<h2 id="应用领域"><a href="#应用领域" class="headerlink" title="应用领域"></a>应用领域</h2><p><img src="/img/20171126/area.png" alt=""><br><img src="/img/20171126/application.png" alt=""></p>
<p>　　许多红外应用不需要完整的图像信息，只需要从图像中挖掘出的特定信息，例如位置、运动以及热（或冷）物体的区域。面对这些非成像应用的新兴市场，需要基于不同概念的传统成像红外焦平面阵列的红外阵列传感器。这里将讨论热成像系统应用的两个主要门类：非活体目标和人体目标。</p>
<h3 id="非活体目标"><a href="#非活体目标" class="headerlink" title="非活体目标"></a>非活体目标</h3><p>　　工厂机械设备、发电及配电设备、物料以及工艺生产制造出来的部件，它们的温度和热学性能，是生产制造过程中以及工厂维持安全和经济有效运营的最重要因素。</p>
<p>　　突然出现的热点能够预示有缺陷的区域和连接点。应用热成像技术进行温度测量的原因之一，是热成像测量无需接触被测物体。热成像技术可以作为一款诊断工具应用于电力传输系统中电气接头的检测，也可以用于探测其它电气装置的热状况。它还可以应用于不同材料的具体特性评估。</p>
<h3 id="人体目标"><a href="#人体目标" class="headerlink" title="人体目标"></a>人体目标</h3><p>　　被动红外传感器针对即时进入或目标探测应用效果很好。但是，它们仅能感测运动中的人体或目标，这使它们能够有条件地应用于建筑自动化和安防系统中。这些简单的红外传感器具有传统的局限性，因此不能应用于更先进的探测领域。例如，被动红外传感器无法感应不动的目标，它们不能精确地探测目标的运动方向，它们也不能获得热成像图谱或者探测目标的温度。所有这三个任务都是下一代智能自动化、安防系统、数字标识系统以及医疗成像应用的基本要素。</p>
<h3 id="人体探测设计"><a href="#人体探测设计" class="headerlink" title="人体探测设计"></a>人体探测设计</h3><p>　　热电堆阵列传感器能够在保留探测对象隐私的前提下，提供粗略的追踪功能。Basu和Rowe开发了一款低成本方法，在Grid-EYE传感器的视场内，估算人员数量和他们的运动方向。对具有本地峰值计数功能的连接组件上应用支持向量机分类，他们估算即时进入人数的准确率超过了80%（《应用热电堆阵列传感器的运动追踪和空间关系学》，2014，卡内基梅隆大学）。　　</p>
<p><img src="/img/20171126/W020160708333700204392.jpg" alt=""></p>
<blockquote>
<p>利用Grid-EYE红外传感器估算即时进入房间的人数</p>
</blockquote>
<p>　　Jeong、Yoon和Joung等人在2014年开发了一种更复杂的方法，他们利用Grid-EYE传感器结合一种概率统计方法来确定人体目标，这种概率统计方法利用了多重前后成像处理技术。前处理和图像分割提供基本结构，然后利用概率统计方法来计算图中的热标识为人体目标的概率。即使分割出来的人体图像短暂消失了，他们提出的方法还能够利用局部自适应阈值实现继续追踪。</p>
<h3 id="智能建筑应用"><a href="#智能建筑应用" class="headerlink" title="智能建筑应用"></a>智能建筑应用</h3><p>　　智能建筑应用是信息物理系统的案例之一。大部分时间，这些应用需要不同类型的传感器、网络拓扑结构以及个性的配置，来满足不同用户的需求。利用Grid-EYE传感器提供的即时进入信息，能够帮助实现家居自动化和暖通系统的集成。Grid-EYE传感器当然也可以应用于安防目的。即时进入监测、安防和建筑自动化是智能建筑的基本功能。房间的即时进入监测，能够帮助建筑管理者实现暖通系统控制，由此实现可持续发展。Grid-EYE传感器8 × 8二元矩阵中连接的组件，能够告诉我们该传感器周边人员的数量（即时进入监测）。　　</p>
<p><img src="/img/20171126/W020160708333700208787.jpg" alt=""></p>
<blockquote>
<p>Grid-EYE红外传感器的应用</p>
</blockquote>
<p>　　对于安防应用，即时进入监测能够监测非法入侵的发生，能够即时触发警报或者发送相关信息给屋主。对于家居自动化应用，它能够用于暖通系统或者家用电器的开启。</p>
<p>　　美国加州大学的Merced在2013年展示了一款基于Grid-EYE传感器的系统，用于估算即时进入信息，使他们能够基于房间进入人员的数量调整房间利用，从而有效的维持房间的温度，通过这一方法每年能够节约25%的能源。</p>
<blockquote>
<iframe height="498" width="510" src="http://player.youku.com/embed/XMzE4NTY0NTQzNg==" frameborder="0" 'allowfullscreen'=""></iframe>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt; 近年来，由于基于MEMS的独立式热隔离像素结构采用薄膜红外吸收层，使得非制冷红外传感器取得了显著进展。　　&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/img/20171126/W020160708332880615768.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="传感器" scheme="http://cuiqingwei.github.io/tags/%E4%BC%A0%E6%84%9F%E5%99%A8/"/>
    
  </entry>
  
  <entry>
    <title>git中避免提交.DS_Store文件</title>
    <link href="http://cuiqingwei.github.io/2017/11/23/2017-11-23-git%E4%B8%AD%E9%81%BF%E5%85%8D%E6%8F%90%E4%BA%A4-DS-Store%E6%96%87%E4%BB%B6/"/>
    <id>http://cuiqingwei.github.io/2017/11/23/2017-11-23-git中避免提交-DS-Store文件/</id>
    <published>2017-11-23T04:02:08.000Z</published>
    <updated>2017-11-29T01:22:58.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="1-先删除原有的-DS-Store："><a href="#1-先删除原有的-DS-Store：" class="headerlink" title="1. 先删除原有的.DS_Store："></a>1. 先删除原有的.DS_Store：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">find . -name &quot;.DS_Store&quot; -type f -delete</div></pre></td></tr></table></figure>
<p>命令解释：在当前文件夹以及当前文件夹的子文件夹中找到所有的.DS_Store文件</p>
<h3 id="2-建立-gitignore文件"><a href="#2-建立-gitignore文件" class="headerlink" title="2. 建立.gitignore文件"></a>2. 建立.gitignore文件</h3><p>vi .gitignore。然后添加.DS_Store作为忽略：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">.DS_Store</div></pre></td></tr></table></figure>
<h3 id="3-提交到git"><a href="#3-提交到git" class="headerlink" title="3. 提交到git"></a>3. 提交到git</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git add .gitignore</div><div class="line">git commit -m &apos;delete .DS_Store&apos;</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h3 id=&quot;1-先删除原有的-DS-Store：&quot;&gt;&lt;a href=&quot;#1-先删除原有的-DS-Store：&quot; class=&quot;headerlink&quot; title=&quot;1. 先删除原有的.DS_Store：&quot;&gt;&lt;/a&gt;1. 先删除原有的.DS_Store：&lt;/h3&gt;&lt;figure
    
    </summary>
    
    
      <category term="git" scheme="http://cuiqingwei.github.io/tags/git/"/>
    
  </entry>
  
  <entry>
    <title>如何查看网站是用什么语言开发的?</title>
    <link href="http://cuiqingwei.github.io/2017/10/31/2017-10-31-%E5%A6%82%E4%BD%95%E6%9F%A5%E7%9C%8B%E7%BD%91%E7%AB%99%E6%98%AF%E7%94%A8%E4%BB%80%E4%B9%88%E8%AF%AD%E8%A8%80%E5%BC%80%E5%8F%91%E7%9A%84/"/>
    <id>http://cuiqingwei.github.io/2017/10/31/2017-10-31-如何查看网站是用什么语言开发的/</id>
    <published>2017-10-31T04:02:08.000Z</published>
    <updated>2017-11-29T01:40:00.000Z</updated>
    
    <content type="html"><![CDATA[<p>查看网站开发语言方法：</p>
<p>1）利用工具直接输入查询</p>
<p><a href="http://w3techs.com/sites/info/baidu.com" target="_blank" rel="external">http://w3techs.com/sites/info/baidu.com</a><br><a href="https://builtwith.com/baidu.com" target="_blank" rel="external">https://builtwith.com/baidu.com</a></p>
<p>把最后的域名换成想知道的网址，系统会自动分析。</p>
<a id="more"></a>
<p>2）后台语言可以通过服务器类型推测。</p>
<p>一般情况下，服务器类型可以通过 Response Header 来看。</p>
<p>比如 IIS，一般是 <a href="http://ASP.NET" target="_blank" rel="external">http://ASP.NET</a></p>
<p>Tomcat、Resin、JBoss，一般是 Java。</p>
<p>Nginx，不一定，很有可能是 PHP 或者 Python 之类的脚本语言。</p>
<p>3）后台框架就更难分析了，不过可以尝试通过 HTML 代码格式，或者 URL 来分析。</p>
<p>比如 URL 后缀是 do，可能用到了 Java Struts。</p>
<p>URL 一般都是 index.php，但是后面参数不同，那么可能用到了 PHP 的一些模板引擎。</p>
<p>当然，这个分析不可靠，只是一种推测。</p>
<p>4）想办法联系网站创始人：），邮件或私信询问。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;查看网站开发语言方法：&lt;/p&gt;
&lt;p&gt;1）利用工具直接输入查询&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://w3techs.com/sites/info/baidu.com&quot;&gt;http://w3techs.com/sites/info/baidu.com&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://builtwith.com/baidu.com&quot;&gt;https://builtwith.com/baidu.com&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;把最后的域名换成想知道的网址，系统会自动分析。&lt;/p&gt;
    
    </summary>
    
    
      <category term="开发语言" scheme="http://cuiqingwei.github.io/tags/%E5%BC%80%E5%8F%91%E8%AF%AD%E8%A8%80/"/>
    
  </entry>
  
  <entry>
    <title>酒店PMS</title>
    <link href="http://cuiqingwei.github.io/2017/09/21/2017-09-21-%E9%85%92%E5%BA%97PMS/"/>
    <id>http://cuiqingwei.github.io/2017/09/21/2017-09-21-酒店PMS/</id>
    <published>2017-09-20T16:09:08.000Z</published>
    <updated>2017-09-21T05:41:19.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="什么是PMS"><a href="#什么是PMS" class="headerlink" title="什么是PMS"></a>什么是PMS</h1><p><strong>PMS</strong>：Property Management System，直译为物业管理系统，也有翻译为：酒店管理系统。</p>
<p>酒店PMS系统是一个以计算机为工具，对酒店信息管理和处理的人机综合系统，它不但能准确及时地反映酒店业务的当前状态、房源状态，还能快速实现客人预定入住到财务对账等一系列操作;不但是一个数据统计的数据库，还能够提供各方面的报表，且利用数据进行统计分析，从而更有利于酒店的经营和管理。</p>
<a id="more"></a>
<h1 id="PMS行业情况"><a href="#PMS行业情况" class="headerlink" title="PMS行业情况"></a>PMS行业情况</h1><p>PMS是酒店前台预订系统的简称，是酒店管理的必备软件之一，是酒店销售完全信息化（直连）的唯一入口，也是我国酒店星级评定的重要衡量指标之一，所有评定过的三星级及以上的酒店都拥有PMS。</p>
<p>而PMS厂商一般都提供酒店管理的全套软件或是酒店管理的解决方案，包括前台管理（预订、接待、收银、夜审、客房、客史、会员、餐饮、娱乐等）、后台管理（财务、物流、人事、维护、宽带等）和接口管理（内部接口和外部接口）等。所以如果某酒店采用某PMS厂商的PMS产品，那么该酒店的其他管理软件也基本上是来自于该PMS厂商，且酒店要更换产品会比较麻烦。</p>
<p>目前，我国的几大PMS厂商主要有：<br><strong>石基信息</strong>：（通过买断和代理Micros Fidelio）占有国内90%以上的五星级酒店市场和80%以上的高星级（4、5星级）酒店的市场份额，在高端酒店市场处在垄断地位；<strong>杭州西软科技</strong>：拥有国内最多的酒店客户群，已超过2600家酒店，于2006年被石基收购；<strong>北京中软好泰</strong>：在国内拥有第二大酒店客户群，于2008年被携程控股（好像已经收购了华仪技术，有待进一步澄清）；<strong>华仪软件</strong>：总部设在北京，市场份额06年还排第四，不过近两年发展比较缓慢；<strong>广州万讯（广州千里马）</strong>：占有珠江三角洲最大的市场份额，06年拥有大概1000家左右的市场，07年与pegasus solutions在华公司易旅科技结成合作伙伴，不过这两年发展缓慢；北京泰能：05年被石基信息收购，不过08年又自由了，现在拥有的酒店客户群大概有1500左右，酒店数量排在第三位。</p>
<h1 id="主流PMS"><a href="#主流PMS" class="headerlink" title="主流PMS"></a>主流PMS</h1><p>国际酒店有OPERA、FIDELIO，国内三到五星有中软、西软，腾云、千里马，中小型酒店有简单点、罗盘、芙蓉等。</p>
<p>其它还有：金天鹅、欣欣、方寸、齐创、华仪、金达莱、企发、智信、易能、云飞、千里马、大总管、捷信达…</p>
<blockquote>
<p>1987年10月在德国慕尼黑成立的Fidelio Software GmbH,成立仅仅四年就成为了欧洲顶尖的酒店软件管理产品，成立六年跃居世界酒店信息系统供应商之首。</p>
<p>之后并入美国Micros System Inc 公司，1995年 Micros成立中国分公司–上海富达，2003年北京中长石基信息技术有限公司从Micros公司取得了FIDELIO和OPERA中国唯一的销售许可。</p>
<p>FIDELIO和OPERA几乎是所有国内高端外资酒店的共同选择，<br>在国内，除非5星级或者有一定影响力的酒店，一般都不进行合作。</p>
<p>国内各方观点<br>1、FIDELIO不错，但是在操作的方便性、高效性上，没有本地系统优秀。有的人在90年代初做酒店，入门就玩FIDELIO，根本就没有好好研究在90年代后期发展起来的本地造，妄下断语。闭眼讲话，拿着无知当高尚。<br>2、FIDELIO早期版本建立起来的严谨、稳定、茁壮的程序风格可以说让OPERA SYSTEMS给破坏成了昨日黄花。各位谁知：FIDELIO OPERA7.0版因为数据处理错误，FIDELIO放弃不可一世的面孔，自己上门为用户打补丁。<br>3、FIDELIO太孤傲了，不仅仅忽略中国市场群落的需求呼声，没有为大陆开发中文增值包（连微软ms office都为特意为中国市场增加了增值服务包),而且故障维护费用惊人。他们的理念是：一切故障都是客户的故障。我的系统永远是正常的。我想引用一位欧洲学者的话：偏见比无知更可怕。 但我们承认computer system 是作为一个酒店整体解决方案（ERP）进入酒店，系统本身融入了开发者的管理思想和理念，如果说安装了系统，不如说我们导入了新的经营思想，FIDELIO在技术上渐失优势的时刻，仍有管理牌紧握。</p>
</blockquote>
<h1 id="PMS链接"><a href="#PMS链接" class="headerlink" title="PMS链接"></a>PMS链接</h1><p>OPERA<br><a href="https://www.oracle.com/industries/hospitality/products/opera-property-services/index.html" target="_blank" rel="external">https://www.oracle.com/industries/hospitality/products/opera-property-services/index.html</a><br>千里马<br><a href="http://www.armitage.com.cn" target="_blank" rel="external">http://www.armitage.com.cn</a><br>金天鹅<br><a href="http://www.jdglrj.com/down.html" target="_blank" rel="external">http://www.jdglrj.com/down.html</a></p>
<h1 id="云PMS"><a href="#云PMS" class="headerlink" title="云PMS"></a>云PMS</h1><p>罗盘<br><a href="http://www.luopan.cn/" target="_blank" rel="external">http://www.luopan.cn/</a><br>住哲<br><a href="http://www.zhuzher.com/" target="_blank" rel="external">http://www.zhuzher.com/</a><br>智选云<br><a href="http://www.ccshis.com/index.html" target="_blank" rel="external">http://www.ccshis.com/index.html</a><br>天龙云<br><a href="http://pms.yaduo.com/login.html" target="_blank" rel="external">http://pms.yaduo.com/login.html</a><br>民宿云<br><a href="http://www.minsuyun.com/home/index.html" target="_blank" rel="external">http://www.minsuyun.com/home/index.html</a><br>方信科技<br><a href="http://www.cnfangxin.com/cn/rjcp.asp?id=236" target="_blank" rel="external">http://www.cnfangxin.com/cn/rjcp.asp?id=236</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;什么是PMS&quot;&gt;&lt;a href=&quot;#什么是PMS&quot; class=&quot;headerlink&quot; title=&quot;什么是PMS&quot;&gt;&lt;/a&gt;什么是PMS&lt;/h1&gt;&lt;p&gt;&lt;strong&gt;PMS&lt;/strong&gt;：Property Management System，直译为物业管理系统，也有翻译为：酒店管理系统。&lt;/p&gt;
&lt;p&gt;酒店PMS系统是一个以计算机为工具，对酒店信息管理和处理的人机综合系统，它不但能准确及时地反映酒店业务的当前状态、房源状态，还能快速实现客人预定入住到财务对账等一系列操作;不但是一个数据统计的数据库，还能够提供各方面的报表，且利用数据进行统计分析，从而更有利于酒店的经营和管理。&lt;/p&gt;
    
    </summary>
    
    
      <category term="PMS" scheme="http://cuiqingwei.github.io/tags/PMS/"/>
    
  </entry>
  
  <entry>
    <title>使用Ionic框架开发Hybird应用</title>
    <link href="http://cuiqingwei.github.io/2017/09/19/2017-09-19-%E4%BD%BF%E7%94%A8Ionic%E6%A1%86%E6%9E%B6%E5%BC%80%E5%8F%91Hybird%E5%BA%94%E7%94%A8/"/>
    <id>http://cuiqingwei.github.io/2017/09/19/2017-09-19-使用Ionic框架开发Hybird应用/</id>
    <published>2017-09-18T16:09:08.000Z</published>
    <updated>2017-09-22T03:41:37.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="什么是Ionic"><a href="#什么是Ionic" class="headerlink" title="什么是Ionic"></a>什么是Ionic</h1><p>Ionic是一个强大的HTML5 原生应用（Native App）开发框架，帮助你用HTML，CSS和JavaScript构建具有原生味道的移动应用;</p>
<p>Ionic是一个高级HTML5混合式移动应用开发框架，同时也是一个开源的前端框架;</p>
<p>Ionic注重的是视觉效果和用户体验，所以使用了AngularJS来构建很各种酷的效果;</p>
<p>Ionic是类似Bootstrap概念的WebApp框架,提供了Hybrid App的基础CSS,UI控件,工程架构和最佳实践。</p>
<a id="more"></a>
<h1 id="Ionic的优势"><a href="#Ionic的优势" class="headerlink" title="Ionic的优势"></a>Ionic的优势</h1><ul>
<li>性能优异</li>
<li>基于红的发紫AngularJs</li>
<li>漂亮的UI</li>
<li>强大的命令行(基于更热门的NodeJS)</li>
<li>开发团队非常活跃，</li>
<li>相关配套非常齐全：</li>
<li>相对充足的学习资料，Learn Iconic,The Iconic book</li>
<li>ngcordova，将主流的Cordova API或者Cordova插件封装为AngularJS扩展，使用非常方便。</li>
<li>开源免费的webfont icon库ionicons,基本满足你icon需求。</li>
<li>甚至最近开发出的可视化开发工具Ionic Creator</li>
<li>最后便是至关重要的，异常活跃的在线社区。</li>
</ul>
<h1 id="谈谈-Hybrid-app"><a href="#谈谈-Hybrid-app" class="headerlink" title="谈谈 Hybrid app"></a>谈谈 Hybrid app</h1><p>Ionic+Cordova的组合是一个跨平台的移动开发框架，属于HybirdApp开发模式。其中Ionic是一个前端框架，集成了AngularJs在里面，有很好很漂亮的UI控件。Cordova本身就是一个跨平台的移动开发框架，可以将应用打包成各个平台下的应用。他们之间的关系可以用下面的图展示：</p>
<p><img src="/img/20170919/webapp0.png" alt=""></p>
<p>从网下图，可以很直观的看出Native app 、Web app和Hybrid app三者之间的区别：</p>
<p><img src="/img/20170919/webapp1.png" alt=""><br><img src="/img/20170919/webapp2.png" alt=""></p>
<ul>
<li><p>1）Native APP：Native *<br>Code编程，代码编译之后以2进制或者字节码的形式运行在OS上，直接调用OS的Device API；</p>
</li>
<li><p>2）Web APP * ，以HTML+JS+CSS等WEB技术编程，代码运行在浏览器中，通过浏览器来调用Device API（取决于HTML5未来的支持能力）：</p>
</li>
<li><p>3）Hybrid APP * ，部分代码以WEB技术编程，部分代码由某些Native Container承担（例如PhonGAP插件，BAE插件），其目的是在HTML5尚未完全支持Device API和Network API的目前阶段，承担这部分职责。</p>
</li>
</ul>
<p>总体来讲，<strong> Hybrid App是同时采用网页语言与程序语言进行开发，通过不同的应用商店进行打包与分发，应用的特性更接近原生应用而且又区别与Web应用 </strong> 。但是在开发过程中同时使用了网页语言，所以开发成本与难度大大降低。也就是说Hybrid App兼具了Native App与Web App两者的诸多优点。</p>
<p>Hybrid App有以下的特性：</p>
<blockquote>
<p>开发时可能不采用或者大部分不采用原生语言，但是却有所有原生应用的特性；<br>架构方案会和原生有出入，基本由工具而定；<br>具有跨平台特性；<br>一般开发相对原生开发的方式要简单。</p>
</blockquote>
<p>工具方面，我们可以使用Angular.js用于双向数据绑定和网络请求以及视图管理等工作，使用require.js来实现模块化开发，组织代码.</p>
<h1 id="安装Cordova和Ionic"><a href="#安装Cordova和Ionic" class="headerlink" title="安装Cordova和Ionic"></a>安装Cordova和Ionic</h1><p>如果你想要开始Ionic开发，你需要先安装Node.js。</p>
<blockquote>
<p>在Win系统中：<br><strong>npm install -g cordova ionic</strong><br>在Mac中，需要加上sudo：<br><strong>sudo npm install -g cordova ionic</strong><br>安装完后在cmd或者终端输入ionic：</p>
</blockquote>
<p><img src="/img/20170919/webapp3.png" alt=""></p>
<p>这样就表示安装成功。</p>
<h1 id="开始一个Ionic-App"><a href="#开始一个Ionic-App" class="headerlink" title="开始一个Ionic App"></a>开始一个Ionic App</h1><p>Ionic官网<a href="http://ionicframework.com为开发者提供了多个开发模板，如：" target="_blank" rel="external">http://ionicframework.com为开发者提供了多个开发模板，如：</a></p>
<blockquote>
<p>空白模板（Black app）：<br><strong>ionic start myApp blank</strong><br>tabs模板 ：<br><strong>ionic start myApp tabs</strong><br>sidemenu模板：<br><strong>ionic start myApp sidemenu</strong></p>
</blockquote>
<p><img src="/img/20170919/webapp4.png" alt=""></p>
<h1 id="开始创建一个工程："><a href="#开始创建一个工程：" class="headerlink" title="开始创建一个工程："></a>开始创建一个工程：</h1><p>ionic start myApp1 tabs</p>
<h1 id="运行"><a href="#运行" class="headerlink" title="运行"></a>运行</h1><p>cd myApp1<br>ionic cordova platform add ios<br>ionic cordova build ios<br>ionic cordova emulate ios<br>然后再输入下面这串命令行，继续刷屏：<br>sudo npm install -g ios-sim<br>然后继续输入：<br>ionic cordova emulate ios<br>就会弹出模拟器了。</p>
<p><img src="/img/20170919/webapp5.png" alt=""></p>
<p>我推荐大家使用<strong>ionic serve</strong>命令来使用电脑浏览器调试，如图：</p>
<p><img src="/img/20170919/webapp6.png" alt=""></p>
<h1 id="Ionic插件安装与卸载"><a href="#Ionic插件安装与卸载" class="headerlink" title="Ionic插件安装与卸载"></a>Ionic插件安装与卸载</h1><p>使用下面的命令查询、安装、卸载插件：<br>ionic plugin list       //列出所有已安装插件<br>ionic plugin remove 插件名     //先根据上面的list列出插件，然后根据插件名卸载<br>ionic plugin  add  插件地址     //这个插件地址可以是github的项目地址，也可以是一个文件夹路径<br>ionic –help     //查看帮助文件<br>ionic项目托管平台地址： <a href="https://github.com/driftyco/ionic/" target="_blank" rel="external">https://github.com/driftyco/ionic/</a><br>css组件：<a href="http://www.ionicframework.com/docs/components/#header" target="_blank" rel="external">http://www.ionicframework.com/docs/components/#header</a></p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p>Ionic+Cordova开发环境搭建 <a href="http://blog.csdn.net/gameloft9/article/details/50923615" target="_blank" rel="external">http://blog.csdn.net/gameloft9/article/details/50923615</a><br>使用ionic框架开发移动hybrid应用 <a href="https://segmentfault.com/a/1190000002688632" target="_blank" rel="external">https://segmentfault.com/a/1190000002688632</a><br>ionic react-native和native开发移动app那个好 ?  <a href="http://www.phonegap100.com/article-486-1.html" target="_blank" rel="external">http://www.phonegap100.com/article-486-1.html</a><br>ionic工作室 <a href="http://www.ionic.wang" target="_blank" rel="external">http://www.ionic.wang</a><br>ionic china <a href="http://ionic-china.com/index.html" target="_blank" rel="external">http://ionic-china.com/index.html</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;什么是Ionic&quot;&gt;&lt;a href=&quot;#什么是Ionic&quot; class=&quot;headerlink&quot; title=&quot;什么是Ionic&quot;&gt;&lt;/a&gt;什么是Ionic&lt;/h1&gt;&lt;p&gt;Ionic是一个强大的HTML5 原生应用（Native App）开发框架，帮助你用HTML，CSS和JavaScript构建具有原生味道的移动应用;&lt;/p&gt;
&lt;p&gt;Ionic是一个高级HTML5混合式移动应用开发框架，同时也是一个开源的前端框架;&lt;/p&gt;
&lt;p&gt;Ionic注重的是视觉效果和用户体验，所以使用了AngularJS来构建很各种酷的效果;&lt;/p&gt;
&lt;p&gt;Ionic是类似Bootstrap概念的WebApp框架,提供了Hybrid App的基础CSS,UI控件,工程架构和最佳实践。&lt;/p&gt;
    
    </summary>
    
    
      <category term="Hybird" scheme="http://cuiqingwei.github.io/tags/Hybird/"/>
    
      <category term="Ionic" scheme="http://cuiqingwei.github.io/tags/Ionic/"/>
    
  </entry>
  
  <entry>
    <title>HomeKit初体验</title>
    <link href="http://cuiqingwei.github.io/2017/02/09/2017-02-09-Homekit%E5%88%9D%E4%BD%93%E9%AA%8C/"/>
    <id>http://cuiqingwei.github.io/2017/02/09/2017-02-09-Homekit初体验/</id>
    <published>2017-02-08T16:27:40.000Z</published>
    <updated>2017-11-29T01:20:57.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="对话Siri"><a href="#对话Siri" class="headerlink" title="对话Siri"></a>对话Siri</h1><iframe height="498" width="510" src="http://player.youku.com/embed/XMjUwMzIyMjEyMA==" frameborder="0" 'allowfullscreen'=""></iframe>

<a id="more"></a>
<h1 id="界面效果"><a href="#界面效果" class="headerlink" title="界面效果"></a>界面效果</h1><p><img src="/img/20170209/homekit1.jpg" alt=""><br><img src="/img/20170209/homekit2.jpg" alt=""></p>
<p>2017年香港光顾苹果旗舰店时，看到了一些第三方Homekit产品，于是萌生了折腾Homekit的想法。</p>
<p><img src="/img/20170209/devices.jpg" alt=""></p>
<p>折腾时所用的硬件，可以根据个人需要自行更改:</p>
<ul>
<li>树莓派 3 代 B 型（包含 Micor SD 卡）</li>
<li>YeeLight 智能灯泡</li>
<li>E27螺口灯座</li>
<li>网线、MicroUSB线</li>
<li>MacMini 电脑 （ Windows PC、Ubuntu、Linux 均可）</li>
</ul>
<h1 id="树莓派"><a href="#树莓派" class="headerlink" title="树莓派"></a>树莓派</h1><h3 id="1-安装Raspbian系统"><a href="#1-安装Raspbian系统" class="headerlink" title="1.安装Raspbian系统"></a>1.安装Raspbian系统</h3><p>系统镜像采用 <strong>2016-09-26-Hassbian-Bluetooth.img</strong><br>下载地址 <a href="http://pan.baidu.com/s/1qYs6hn2" target="_blank" rel="external">http://pan.baidu.com/s/1qYs6hn2</a></p>
<p>Mac制作命令<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">df -h</div><div class="line">diskutil unmount /dev/disk3s1</div><div class="line">dd bs=4m if=2016-09-26-Hassbian-Bluetooth.img of=/dev/rdisk3</div><div class="line">diskutil unmountdisk /dev/disk3</div></pre></td></tr></table></figure></p>
<blockquote>
<p>可参考 <a href="http://cuiqingwei.github.io/2016/02/15/2016-02-15-Raspberry-Pi/">http://cuiqingwei.github.io/2016/02/15/2016-02-15-Raspberry-Pi/</a></p>
</blockquote>
<h3 id="2-登录Raspberry"><a href="#2-登录Raspberry" class="headerlink" title="2.登录Raspberry"></a>2.登录Raspberry</h3><p>安装完成之后，用网线连接好树莓派和路由器，打开电脑的终端，用 ssh 登录树莓派。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">ssh pi@raspberrypi.local</div><div class="line">或者</div><div class="line">ssh pi@ip</div></pre></td></tr></table></figure>
<p>ip可以在路由器的运行网页查看到,当然，Windows系统可以通过 <a href="http://www.mylanviewer.com/network-ip-scanner.html" target="_blank" rel="external">MyLanViewer Network/IP Scanner</a> 扫描等到目标地址。<br>之后终端会要求输入密码，输入 <strong>raspberry</strong> 回车即可。输入密码的途中终端不会显示任何字符，只需要正常输入即可。</p>
<h3 id="3-更新软件源"><a href="#3-更新软件源" class="headerlink" title="3.更新软件源"></a>3.更新软件源</h3><p>登录树莓派之后，先升级软件源，在终端下输入以下代码，等待一段时间即可。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sudo apt-get update</div><div class="line">sudo apt-get upgrade</div></pre></td></tr></table></figure>
<h1 id="配置选项"><a href="#配置选项" class="headerlink" title="配置选项"></a>配置选项</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo raspi-config</div></pre></td></tr></table></figure>
<p>change_locale – 更改语言设置。在Locales to be generated: 中，选择en_US.UTF-8和zh_CN.UTF-8。在Default locale for the system environment:中，选择en_US.UTF-8（等启动完机器，装完中文字体，再改回zh_CN.UTF-8，否则第一次启动会出现方块）。</p>
<blockquote>
<p>可参考 <a href="http://blog.csdn.net/xdw1985829/article/details/38816375" target="_blank" rel="external">http://blog.csdn.net/xdw1985829/article/details/38816375</a></p>
</blockquote>
<h1 id="打开-Yeelight-的极客模式"><a href="#打开-Yeelight-的极客模式" class="headerlink" title="打开 Yeelight 的极客模式"></a>打开 Yeelight 的极客模式</h1><p>在 App Store 下载官方的 Yeelight 应用，先连接上灯泡.然后点右上角的三根横杠，在下方打开极客模式。</p>
<h1 id="安装-Node-js"><a href="#安装-Node-js" class="headerlink" title="安装 Node.js"></a>安装 Node.js</h1><p>回到终端，我们继续来安装 Node.js 。从版本 4.0.0 开始，Node.js 默认支持基于 ARM 的平台，我们只需要输入相关代码即可。</p>
<p>依次在终端输入以下命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">wget https://nodejs.org/dist/v4.3.2/node-v4.3.2-linux-armv6l.tar.gz</div><div class="line">tar -xvf node-v4.3.2-linux-armv6l.tar.gz</div><div class="line">cd node-v4.3.2-linux-armv6l</div><div class="line">sudo cp -R * /usr/local/</div></pre></td></tr></table></figure>
<p>完成之后，输入 node -v 检查一下是否安装完成，如果显示  v4.3.2 ，则表示 Node.js 安装成功。<br>安装 Avahi 和相关依赖软件包</p>
<p>在终端输入以下命令即可：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo apt-get install libavahi-compat-libdnssd-dev</div></pre></td></tr></table></figure>
<p>安装 HomeBridge 和相关依赖软件包</p>
<p>依次在终端输入以下命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">sudo npm install -g --unsafe-perm homebridge hap-nodejs node-gyp</div><div class="line">cd /usr/local/lib/node_modules/homebridge/</div><div class="line">sudo npm install --unsafe-perm bignum</div><div class="line">cd /usr/local/lib/node_modules/hap-nodejs/node_modules/mdns</div><div class="line">sudo node-gyp BUILDTYPE=Release rebuild</div></pre></td></tr></table></figure>
<p>添加 Yeelight 配置文件</p>
<p>输入以下命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo npm install -g homebridge-yeelight</div></pre></td></tr></table></figure>
<p>等待命令运行结束后，输入</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">cd /home/pi/.homebridge/</div><div class="line">vi config.json</div></pre></td></tr></table></figure>
<p>点击键盘的 i 键，终端左下角出现 – INSERT – ，如下图所示。</p>
<p>将以下代码复制到终端：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    &quot;bridge&quot;: &#123;</div><div class="line">        &quot;name&quot;: &quot;IoTBridge&quot;,</div><div class="line">        &quot;username&quot;: &quot;28:6C:07:10:BF:16&quot;,</div><div class="line">        &quot;port&quot;: 51825,</div><div class="line">        &quot;pin&quot;: &quot;031-45-154&quot;</div><div class="line">    &#125;,</div><div class="line"></div><div class="line">    &quot;platforms&quot;: [</div><div class="line">        &#123;</div><div class="line">            &quot;platform&quot; : &quot;yeelight&quot;,</div><div class="line">            &quot;name&quot; : &quot;yeelight&quot;</div><div class="line">        &#125;</div><div class="line">    ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>粘贴完成后，按Esc键，输入 :wq 然后回车。</p>
<p>之后，便可以运行 HomeBridge ：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">homebridge</div></pre></td></tr></table></figure>
<p>这一步完成之后，HomeBridge 就安装完毕并且开始运行， YeeLight 彩光灯也成功接入 Apple HomeKit ，打开 iOS 10 自带的家庭 App， 点击添加配件即可。会有两个配件，第一个是 IoTBridge ，这是一个桥接器；还有一个才是我们要控制的灯泡。</p>
<p>现在，你就可以享受 <strong>「嘿 Siri ，帮我开个灯」</strong> 了。<br>在树莓派启动后自动运行 HomeBridge 服务</p>
<h1 id="最后一步，把-HomeBridge-服务加入到树莓派的系统服务里。"><a href="#最后一步，把-HomeBridge-服务加入到树莓派的系统服务里。" class="headerlink" title="最后一步，把 HomeBridge 服务加入到树莓派的系统服务里。"></a>最后一步，把 HomeBridge 服务加入到树莓派的系统服务里。</h1><h3 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h3><p>首先我们要开启 root 账户，首先在终端输入：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo passwd root</div></pre></td></tr></table></figure>
<p>然后会提示你设置 root 账户密码，第一次输入之后还要确认一次，一样两次输入不会有任何字符显示。输入完毕之后，启用 root 账户，输入以下命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo passwd --unlock root</div></pre></td></tr></table></figure>
<p>然后会提示报错： passwd: password expiry information changed. ，原因是新版的系统默认禁止 ssh 登录 root 账户，我们需要修改一下配置文件。在终端输入以下命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo nano /etc/ssh/sshd_config</div></pre></td></tr></table></figure>
<p>用 Ctrl + W 搜索「 PermitRootLogin 」，找到之后将 PermitRootLogin without-password 改成 PermitRootLogin yes ，然后按 Ctrl + O 保存，回车之后退出编辑器。</p>
<p>GitHub 提供了三种让树莓派启动后自动运行 HomeBridge 服务的方法，我选择的是 init.d 的方式。打开 这个网页 ，将文件下载到本地，然后将 template 重命名为 homebridge （或者任何你想要的名字） ，放到树莓派目录 /etc/init.d 下。注意这里一定要</p>
<p>用 root 账户 ssh 登录Raspberry。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">cd /etc/init.d</div><div class="line">vi homebridge</div></pre></td></tr></table></figure>
<p>点击键盘的 i 键，终端左下角出现 – INSERT – ，如下图所示。</p>
<p>将以下代码复制到终端：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">#!/bin/sh</div><div class="line">### BEGIN INIT INFO</div><div class="line"># Provides: homebridge</div><div class="line"># Required-Start:    $network $remote_fs $syslog</div><div class="line"># Required-Stop:     $remote_fs $syslog</div><div class="line"># Default-Start:     2 3 4 5</div><div class="line"># Default-Stop:      0 1 6</div><div class="line"># Short-Description: Start daemon at boot time</div><div class="line"># Description:       Enable service provided by daemon.</div><div class="line">### END INIT INFO</div><div class="line"></div><div class="line">dir=&quot;/home/pi&quot;</div><div class="line">cmd=&quot;DEBUG=* /usr/local/bin/homebridge&quot;</div><div class="line">user=&quot;pi&quot;</div></pre></td></tr></table></figure>
<p>完成后保存，然后回到终端，依次输入以下代码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sudo chmod 755 /etc/init.d/homebridge</div><div class="line">sudo update-rc.d homebridge defaults</div></pre></td></tr></table></figure>
<p>现在，你可以在终端输入 HomeBridge ，等待服务运行之后关掉终端，看是否可以继续使用家庭 App 开关灯泡；或者重启一下树莓派，看看 HomeBridge 服务是否正常运行。</p>
<h3 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h3><p>将homebridge设置成随系统启动</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">cd /</div><div class="line">sudo useradd --system homebridge</div><div class="line">sudo mkdir /var/homebridge</div><div class="line">sudo cp ~/.homebridge/config.json /var/homebridge/</div><div class="line">sudo cp -r ~/.homebridge/persist /var/homebridge</div><div class="line">sudo chmod -R 0777 /var/homebridge</div><div class="line">cd /etc/default</div><div class="line">sudo nano homebridge</div></pre></td></tr></table></figure>
<p>将下面的内容复制粘贴进去</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"># Defaults / Configuration options for homebridge</div><div class="line"># The following settings tells homebridge where to find the config.json file and where to persist the data (i.e. pairing and others)</div><div class="line">HOMEBRIDGE_OPTS=-U /var/homebridge</div><div class="line"></div><div class="line"># If you uncomment the following line, homebridge will log more</div><div class="line"># You can display this via systemd&apos;s journalctl: journalctl -f -u homebridge</div><div class="line"># DEBUG=*</div></pre></td></tr></table></figure>
<p>Ctrl+X，然后Y，回车，保存退出</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">cd /etc/systemd/system</div><div class="line">sudo nano homebridge.service</div></pre></td></tr></table></figure>
<p>将下面的内容复制粘贴进去</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">[Unit]</div><div class="line">Description=Node.js HomeKit Server</div><div class="line">After=syslog.target network-online.target</div><div class="line">[Service]</div><div class="line">Type=simple</div><div class="line">User=homebridge</div><div class="line">EnvironmentFile=/etc/default/homebridge</div><div class="line">ExecStart=/usr/lib/node_modules/homebridge/bin/homebridge $HOMEBRIDGE_OPTS</div><div class="line">Restart=on-failure</div><div class="line">RestartSec=10</div><div class="line">KillMode=process</div><div class="line">[Install]</div><div class="line">WantedBy=multi-user.target</div></pre></td></tr></table></figure>
<p>然后Ctrl+X，然后Y，回车，保存退出</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">cd /</div><div class="line">sudo systemctl daemon-reload</div><div class="line">sudo systemctl enable homebridge</div><div class="line">sudo systemctl start homebridge</div><div class="line">sudo systemctl status homebridge</div><div class="line">sudo reboot      ####重启树莓派####</div></pre></td></tr></table></figure>
<p>如果以上均成功运行，那么恭喜你，一切都大功告成。</p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;对话Siri&quot;&gt;&lt;a href=&quot;#对话Siri&quot; class=&quot;headerlink&quot; title=&quot;对话Siri&quot;&gt;&lt;/a&gt;对话Siri&lt;/h1&gt;&lt;iframe height=498 width=510 src=&#39;http://player.youku.com/embed/XMjUwMzIyMjEyMA==&#39; frameborder=0 &#39;allowfullscreen&#39;&gt;&lt;/iframe&gt;
    
    </summary>
    
    
      <category term="Raspberry Pi" scheme="http://cuiqingwei.github.io/tags/Raspberry-Pi/"/>
    
      <category term="HomeKit" scheme="http://cuiqingwei.github.io/tags/HomeKit/"/>
    
  </entry>
  
  <entry>
    <title>OpenWRT之HomeKit</title>
    <link href="http://cuiqingwei.github.io/2017/02/08/2017-02-08-OpenWRT%E4%B9%8BHomeKit/"/>
    <id>http://cuiqingwei.github.io/2017/02/08/2017-02-08-OpenWRT之HomeKit/</id>
    <published>2017-02-08T08:20:56.000Z</published>
    <updated>2017-02-22T07:47:54.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="1-制备openwrt系统镜像"><a href="#1-制备openwrt系统镜像" class="headerlink" title="1.制备openwrt系统镜像"></a>1.制备openwrt系统镜像</h1><p>预编译的openwrt是musl的toolchain，而homebridge需要glibc的toolchain所以需要自己编译系统。</p>
<p>建议安装完成后开启ssh，直接用putty和winscp来传送文件和操作虚拟机更方便。<br>以下所有命令都是通过putty登陆虚拟机或使用虚拟机的terminal来执行的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo apt update</div></pre></td></tr></table></figure>
<p>安装编译系统需要的软件包:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo apt update</div></pre></td></tr></table></figure>
<p>下载openwrt最新代码，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git clone git://github.com/openwrt/openwrt.git</div></pre></td></tr></table></figure>
<a id="more"></a>
<p>将feeds.conf.default改名为feeds.conf</p>
<p>更新feeds部分的代码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">./scripts/feeds update -a</div><div class="line">./scripts/feeds install -a</div></pre></td></tr></table></figure>
<blockquote>
<p>使用feeds文件夹替换掉openwrt，原版代码不带avahi的dev库，需要自己添加支持；<br>另外自带nodejs的版本低于5.0启动homebridge的时候会有个warning，一并更换成最新版。</p>
</blockquote>
<p>openwrt编译配置：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">make menuconfig</div></pre></td></tr></table></figure>
<p>需要的软件包：<br>Advanced configuration options (for developers)  —&gt;<br>      Toolchain Options  —&gt;<br>         C Library implementation (Use musl)  —&gt;<br>            [X] Use (e)glibc<br>Base system  —&gt;<br>   block-mount、ca-certificates<br>Development —&gt;<br>   <m> gcc<br>   <m> make<br>Kernel modules  —&gt;<br>    Filesystems  —&gt;<br>       kmod-fs-exfat、kmod-fs-ext4、kmod-fs-ntfs、kmod-fs-vfat<br>    USB Support  —&gt;<br>       kmod-usb-storage-extras、kmod-usb2、kmod-usb3<br>Languages  —&gt;<br>    Node.js  —&gt;<br>        <m> node<br>    Python  —&gt;<br>        <m> python<br>Libraries  —&gt;<br>   libavahi-compat-libdnssd-dev<br>Network  —&gt;<br>    mosquitto<br>LuCi   —&gt;</m></m></m></m></p>
<pre><code>1. Collections  ---&gt;
   luci
</code></pre><p>保存后开始编译</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">make V=s</div></pre></td></tr></table></figure>
<p>趁着时候没事干把准备好的U盘连入虚拟机，格式化成ext3/ext4格式，插到路由器的USB接口上。</p>
<p>刷入系统不再详述，不会搞的可以百度，这方面的教程遍地。<br>成功后进入路由器管理界面luci，system下将语言改为中文。设置路由器登陆密码，然后使用putty和winscp即可连接到路由器文件系统了。<br>将U盘查到路由器上等一会以后，从路由器管理界面找到如下位置，看到U盘的大小说明成功。</p>
<h1 id="2-openwrt-挂载overlay到U盘"><a href="#2-openwrt-挂载overlay到U盘" class="headerlink" title="2. openwrt 挂载overlay到U盘"></a>2. openwrt 挂载overlay到U盘</h1><ul>
<li>2.1. 添加必要软件</li>
</ul>
<p><strong>block-mount</strong><br><strong>kmod-fs-ext4</strong><br><strong>kmod-usb-ohci</strong><br><strong>kmod-usb-storage</strong><br><strong>fdisk</strong><br><strong>cfdisk</strong><br><strong>e2fsprogs</strong></p>
<p>可以在 <strong>menuconfig</strong> 通过输入 <strong>/</strong> 查找这些组件。</p>
<ul>
<li>2.2. 升级系统</li>
</ul>
<p><strong>sysupgrade -v xxxx-sysupgrade.bin</strong></p>
<ul>
<li>2.3. 分区操作</li>
</ul>
<p><strong>cfdisk</strong></p>
<p>分三个区<br>sda1（512M）为系统盘，相当于Windows系统的C盘；<br>sda2（128M)为交换分区，用于内存交换；<br>sda3(剩余)为存储区，主要放置较大文件</p>
<ul>
<li><p>2.4.格式化各分区</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">mkfs.ext4 /dev/sda1 　　#将第一个分区格式化为ext3格式</div><div class="line">mkswap /dev/sda2    　　#将第二个分区格式化为swap交换分区</div><div class="line">mkfs.ext4 /dev/sda3 　　#将第三个分区格式化为ext3格式</div></pre></td></tr></table></figure>
</li>
<li><p>2.5.安装完成以后,挂载u盘.如下命令将默认的系统盘转移到u盘中.</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">mount /dev/sda1 /mnt</div><div class="line">mkdir /tmp/root</div><div class="line">mount -o bind / /tmp/root</div><div class="line">cp /tmp/root/* /mnt -a</div><div class="line">umount /tmp/root</div></pre></td></tr></table></figure>
<ul>
<li>2.6.修改 /etc/config/fstab 文件,让系统启动自动挂载,修改成如下</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">config mount</div><div class="line">        option target   /overlay</div><div class="line">        option device   /dev/sda1</div><div class="line">        option fstype   ext4</div><div class="line">        option options  rw,sync</div><div class="line">        option enabled  1</div><div class="line">        option enabled_fsck 0</div></pre></td></tr></table></figure>
<ul>
<li>2.7.执行如下命令让其生效</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/etc/init.d/fstab enable</div></pre></td></tr></table></figure>
<ul>
<li>2.8.重启后，执行df -h后如果发现/overlay挂载在/tmp/overlay-disabled上的解决方案：</li>
</ul>
<p><strong>rm /tmp/overlay-disabled/etc/extroot.md5sum</strong></p>
<p>或者删除/tmp/overlay-disabled目录下的所有系统文件，按照第2.5重新操作重启。</p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;1-制备openwrt系统镜像&quot;&gt;&lt;a href=&quot;#1-制备openwrt系统镜像&quot; class=&quot;headerlink&quot; title=&quot;1.制备openwrt系统镜像&quot;&gt;&lt;/a&gt;1.制备openwrt系统镜像&lt;/h1&gt;&lt;p&gt;预编译的openwrt是musl的toolchain，而homebridge需要glibc的toolchain所以需要自己编译系统。&lt;/p&gt;
&lt;p&gt;建议安装完成后开启ssh，直接用putty和winscp来传送文件和操作虚拟机更方便。&lt;br&gt;以下所有命令都是通过putty登陆虚拟机或使用虚拟机的terminal来执行的。&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;sudo apt update&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;安装编译系统需要的软件包:&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;sudo apt update&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;下载openwrt最新代码，&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;git clone git://github.com/openwrt/openwrt.git&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
      <category term="OpenWRT" scheme="http://cuiqingwei.github.io/tags/OpenWRT/"/>
    
      <category term="HomeKit" scheme="http://cuiqingwei.github.io/tags/HomeKit/"/>
    
  </entry>
  
  <entry>
    <title>Raspberry安装HAP-NodeJS</title>
    <link href="http://cuiqingwei.github.io/2017/02/08/2017-02-08-Raspberry%E5%AE%89%E8%A3%85HAP-NodeJS/"/>
    <id>http://cuiqingwei.github.io/2017/02/08/2017-02-08-Raspberry安装HAP-NodeJS/</id>
    <published>2017-02-07T16:27:40.000Z</published>
    <updated>2017-11-29T01:29:53.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="下载-Raspbian"><a href="#下载-Raspbian" class="headerlink" title="下载 Raspbian"></a>下载 Raspbian</h1><p><a href="https://www.raspberrypi.org/downloads/raspbian/" target="_blank" rel="external">https://www.raspberrypi.org/downloads/raspbian/</a></p>
<h1 id="制作-TF-card"><a href="#制作-TF-card" class="headerlink" title="制作 TF card"></a>制作 TF card</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">df -h</div><div class="line">diskutil unmount /dev/disk2s1</div><div class="line">diskutil list</div><div class="line">dd bs=4m if=2017-01-11-raspbian-jessie.img of=/dev/rdisk2</div><div class="line">diskutil unmountdisk /dev/disk2</div></pre></td></tr></table></figure>
<a id="more"></a>
<blockquote>
<p>note：新的img默认没有打开ssh，在tf卡根目录新建名称为 ssh 的文件夹解决</p>
</blockquote>
<h1 id="登录树莓派"><a href="#登录树莓派" class="headerlink" title="登录树莓派"></a>登录树莓派</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ssh pi@raspberrypi.local</div></pre></td></tr></table></figure>
<h1 id="更新源"><a href="#更新源" class="headerlink" title="更新源"></a>更新源</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak</div><div class="line">sudo vi /etc/apt/sources.list</div></pre></td></tr></table></figure>
<p>进入编辑界面，用 <strong>#</strong> 注释掉原来的源，添加下方的源。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">deb http://mirrors.neusoft.edu.cn/raspbian/raspbian jessie main contrib non-free rpi</div></pre></td></tr></table></figure>
<h1 id="更新"><a href="#更新" class="headerlink" title="更新"></a>更新</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo apt-get update &amp;&amp; sudo apt-get upgrade -y</div></pre></td></tr></table></figure>
<h1 id="安装解决依赖"><a href="#安装解决依赖" class="headerlink" title="安装解决依赖"></a>安装解决依赖</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sudo apt-get install avahi-daemon avahi-discover libnss-mdns libavahi-compat-libdnssd-dev  build-essential -y</div><div class="line">service avahi-daemon start</div></pre></td></tr></table></figure>
<h1 id="增加nodejs源"><a href="#增加nodejs源" class="headerlink" title="增加nodejs源"></a>增加nodejs源</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">cd ~</div><div class="line">curl -sL https://deb.nodesource.com/setup_6.x | sudo -E bash -</div></pre></td></tr></table></figure>
<h1 id="安装nodejs"><a href="#安装nodejs" class="headerlink" title="安装nodejs"></a>安装nodejs</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">cd ~/Downloads</div><div class="line">wget http://nodejs.org/dist/v7.6.0/node-v7.6.0.tar.gz</div><div class="line">tar -xzf node-v7.6.0.tar.gz</div><div class="line">cd node-v7.6.0</div><div class="line">./configure</div><div class="line">make</div><div class="line">sudo make install</div></pre></td></tr></table></figure>
<h1 id="克隆HAP-NodeJS源码"><a href="#克隆HAP-NodeJS源码" class="headerlink" title="克隆HAP-NodeJS源码"></a>克隆HAP-NodeJS源码</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git clone https://github.com/KhaosT/HAP-NodeJS.git</div></pre></td></tr></table></figure>
<h1 id="安装node-gyp"><a href="#安装node-gyp" class="headerlink" title="安装node-gyp"></a>安装node-gyp</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo npm install -g node-gyp</div></pre></td></tr></table></figure>
<h1 id="切换到HAP-NodeJS文件夹下，运行"><a href="#切换到HAP-NodeJS文件夹下，运行" class="headerlink" title="切换到HAP-NodeJS文件夹下，运行"></a>切换到HAP-NodeJS文件夹下，运行</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sudo npm istall</div><div class="line">node Core.js</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;下载-Raspbian&quot;&gt;&lt;a href=&quot;#下载-Raspbian&quot; class=&quot;headerlink&quot; title=&quot;下载 Raspbian&quot;&gt;&lt;/a&gt;下载 Raspbian&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;https://www.raspberrypi.org/downloads/raspbian/&quot;&gt;https://www.raspberrypi.org/downloads/raspbian/&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&quot;制作-TF-card&quot;&gt;&lt;a href=&quot;#制作-TF-card&quot; class=&quot;headerlink&quot; title=&quot;制作 TF card&quot;&gt;&lt;/a&gt;制作 TF card&lt;/h1&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;4&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;5&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;df -h&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;diskutil unmount /dev/disk2s1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;diskutil list&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;dd bs=4m if=2017-01-11-raspbian-jessie.img of=/dev/rdisk2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;diskutil unmountdisk /dev/disk2&lt;/div&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
    
    </summary>
    
    
      <category term="Raspberry Pi" scheme="http://cuiqingwei.github.io/tags/Raspberry-Pi/"/>
    
      <category term="HomeKit" scheme="http://cuiqingwei.github.io/tags/HomeKit/"/>
    
      <category term="HAP-NodeJS" scheme="http://cuiqingwei.github.io/tags/HAP-NodeJS/"/>
    
  </entry>
  
  <entry>
    <title>夏利俊超级远投讲解</title>
    <link href="http://cuiqingwei.github.io/2017/01/02/2017-01-02-%E5%A4%8F%E5%88%A9%E4%BF%8A%E8%B6%85%E7%BA%A7%E8%BF%9C%E6%8A%95%E8%AE%B2%E8%A7%A3/"/>
    <id>http://cuiqingwei.github.io/2017/01/02/2017-01-02-夏利俊超级远投讲解/</id>
    <published>2017-01-02T13:27:40.000Z</published>
    <updated>2017-11-27T03:38:03.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="《夏利俊路亚教室》之直柄竿超级远投"><a href="#《夏利俊路亚教室》之直柄竿超级远投" class="headerlink" title="《夏利俊路亚教室》之直柄竿超级远投"></a>《夏利俊路亚教室》之直柄竿超级远投</h1><div align="center"><br><iframe height="498" width="510" src="http://player.youku.com/embed/XMTg2Mzk2Njg4NA==" frameborder="0" 'allowfullscreen'=""></iframe><br></div>

<a id="more"></a>
<h1 id="《夏利俊路亚教室》之枪柄竿超级远投"><a href="#《夏利俊路亚教室》之枪柄竿超级远投" class="headerlink" title="《夏利俊路亚教室》之枪柄竿超级远投"></a>《夏利俊路亚教室》之枪柄竿超级远投</h1><div align="center"><br><iframe height="498" width="510" src="http://player.youku.com/embed/XMTg2Mzk2Njg4NA==" frameborder="0" 'allowfullscreen'=""></iframe><br></div><br># 《夏利俊路亚教室》之直柄竿精准远投<br><div align="center"><br><iframe height="498" width="510" src="http://player.youku.com/embed/XMTg4NzE4OTY4MA==" frameborder="0" 'allowfullscreen'=""></iframe><br></div><br># 《夏利俊路亚教室》之直柄竿正手侧抛<br><div align="center"><br><iframe height="498" width="510" src="http://player.youku.com/embed/XMjUxNjA0MTQ3Ng==" frameborder="0" 'allowfullscreen'=""></iframe><br></div><br># 《夏利俊路亚教室》之枪柄竿单手抛<br><div align="center"><br><iframe height="498" width="510" src="http://player.youku.com/embed/XMjY0MjM2Nzg2NA==" frameborder="0" 'allowfullscreen'=""></iframe><br></div>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;《夏利俊路亚教室》之直柄竿超级远投&quot;&gt;&lt;a href=&quot;#《夏利俊路亚教室》之直柄竿超级远投&quot; class=&quot;headerlink&quot; title=&quot;《夏利俊路亚教室》之直柄竿超级远投&quot;&gt;&lt;/a&gt;《夏利俊路亚教室》之直柄竿超级远投&lt;/h1&gt;&lt;div align = &quot;center&quot;&gt;&lt;br&gt;&lt;iframe height=498 width=510 src=&#39;http://player.youku.com/embed/XMTg2Mzk2Njg4NA==&#39; frameborder=0 &#39;allowfullscreen&#39;&gt;&lt;/iframe&gt;&lt;br&gt;&lt;/div&gt;
    
    </summary>
    
    
      <category term="路亚" scheme="http://cuiqingwei.github.io/tags/%E8%B7%AF%E4%BA%9A/"/>
    
  </entry>
  
  <entry>
    <title>路亚装逼指南</title>
    <link href="http://cuiqingwei.github.io/2017/01/01/2017-01-01-%E8%B7%AF%E4%BA%9A%E8%A3%85%E9%80%BC%E6%8C%87%E5%8D%97/"/>
    <id>http://cuiqingwei.github.io/2017/01/01/2017-01-01-路亚装逼指南/</id>
    <published>2017-01-01T15:27:40.000Z</published>
    <updated>2017-07-04T07:59:44.000Z</updated>
    
    <content type="html"><![CDATA[<p>何为<strong>路亚</strong>？你看有人站水边，竿尖挂个假鱼，抛出去，收回来，抛出去，再收，那就是了。</p>
<p><img src="/img/20170101/pjlure.jpg" alt=""></p>
<a id="more"></a>
<p>理论上，它是由<em>假鱼入水后模拟真鱼的泳姿，诱惑食肉鱼捕食到上钩的过程。</em> 其实本人看来，不全是。</p>
<blockquote>
<p>好比大晚上一醉酒哥们在你家楼下高声喧哗，你本是一慈善的人，此刻也恨不得一个啤酒瓶飞下去。</p>
</blockquote>
<p>路亚亦如是，老有个假货在你面前搔首弄姿游来游去，大鱼一看，怒了！给你狗日一口。这也就是为什么鲤鱼非路亚的对象鱼但是也经常上钩。</p>
<p><img src="/img/20170101/lure.jpg" alt=""></p>
<p>这里说如何<strong>装逼</strong>，本身这个运动就带有浓厚的装逼色彩，区别于台钓也就是我们常说的老头钓，<strong>一根杆，一团面，一个地方蹲一天</strong> 不同，路亚是不断的在运动，移动。</p>
<p><img src="/img/20170101/taidiao.jpg" alt=""></p>
<p>你经常看见很多初级爱好者，整个涉水服往水里一站。像模像样的在那搞，有的还弄什么防滑手套，顶个麦加巴斯的帽子防晒，腰间一个皮带，上面看得懂看不懂的工具一堆，上鱼了一定要吼一声:”中鱼！”，管他有没有把鱼吓跑。</p>
<p><img src="/img/20170101/tools.jpg" alt=""><br><img src="/img/20170101/zhuangbi.jpg" alt=""></p>
<p>初级爱好者最在乎的不是鱼，是<strong>距离</strong>。怎么说捏，你们看过<a href="http://baike.baidu.com/item/%E5%A4%A7%E6%B2%B3%E6%81%8B" target="_blank" rel="external">《大河恋》</a>吧，皮特演的那个电影，讲飞蝇钓的，有点类似路亚钓鱼，这个运动最骚的就是把鱼饵抛出去那一瞬间。</p>
<p><img src="/img/20170101/feiying.jpg" alt=""></p>
<p>初学者大部分姿势或者发力不对，不单抛出去没有距离，而且还导致鱼轮上的线缠住，这个他们叫炒线或者炒粉。你经常看见一哥们很帅气的一抛，然后硕大一个物体落水声，这就是炒粉了，然后你就看他焦头烂额的埋头在那理线，一般时间在5分钟，炒粉严重的你就看他拿剪刀在那剪线了。</p>
<p><img src="/img/20170101/chaofen.jpeg" alt=""></p>
<p>很快，熟练了，不炒粉了。想想要开始正儿八经搞了，开始抛投了，设备也换成顶级的了。好么，这下就真正开始关心抛投的距离了，看谁抛的远，这个30米，那个60米，越来越远。最后都可以一竿子打到对岸了，然后回过头一看，依然一天下来什么也没有。郁闷了，为什么捏？</p>
<blockquote>
<p>因为你喝醉了到人楼下去吼，想挨酒瓶子你得先知道这楼里还有没有住户啊，那楼都荒废十来年了，你吼一晚顶多冒个鬼出来吓吓你啊！</p>
</blockquote>
<p><img src="/img/20170101/zhaoyu.jpg" alt=""></p>
<p>然后,哥们明白了，路亚还有个关键，也是最要命的，<strong>找鱼！</strong> 你要知道那地方有没有鱼，有没有食肉鱼，在哪个水层，旁边有没有障碍导致你挂饵。</p>
<p>以上问题从发现到解决，几个月过去了，上论坛看视频找人带终于摸到路子了，碰到砸酒瓶的了。上鱼了！</p>
<p>这个时候你就又发现，初学者们在鱼出水那一瞬间不是用手去逮，一准要拿控鱼器夹着鱼嘴巴拉出水面。</p>
<p><img src="/img/20170101/yuhuo.jpg" alt=""></p>
<p>起来以后也一定是左手控鱼器扯鱼头，右手托着鱼的屁眼部平举，<strong>口含鱼竿</strong> 由同行的人拍照留念。然后把鱼平铺在地上，拿个宽40公分的大号软尺垫鱼下面展示尺寸，若没有尺子一定拿个矿泉水瓶子在旁边对比参照。</p>
<p><img src="/img/20170101/liangyu.jpg" alt=""></p>
<p>最后,末了特写鱼饵挂住鱼的位置，大部分照片都是看那鱼无辜的含着鱼饵上的三本钩，这个专业上叫 <strong>正口</strong>,一定要喊出来。</p>
<p><img src="/img/20170101/zhengkou.jpg" alt=""></p>
<p>其余的估计也不大会有人上图，譬如挂住鱼鳍啊，挂住屁股啊什么乱七八糟的部位，这个他们叫<strong>车祸</strong>。</p>
<p>如果水边干了一天除了丢十来个鱼饵什么也没有干到的，人叫<strong>打龟</strong>或者<strong>空军</strong>。</p>
<p><img src="/img/20170101/kongjun.jpg" alt=""></p>
<p>如果好久都没有钓到,就可以说是空军一号了！</p>
<h3 id="现在来讲讲顶级装逼者一般怎么搞"><a href="#现在来讲讲顶级装逼者一般怎么搞" class="headerlink" title="现在来讲讲顶级装逼者一般怎么搞?!"></a>现在来讲讲<strong>顶级装逼</strong>者一般怎么搞?!</h3><p><img src="/img/20170101/cheshang.jpg" alt=""></p>
<p>先你要明白一句话，<em>菜鸟爱扎堆，高手都独行。</em> 人不屑跟你讲什么，自己闷头搞就是。开个揽胜运动版，来到了水边，下车不着急取设备，先看，还拿望远镜看，看什么呢，看水流，看地形，看鱼的活跃程度；看完了还辨，辨天色，辨时间，辨风力。有的高手看辨，掉头开车就闪了。你问他为什么，答曰：”时候不对!”</p>
<p><img src="/img/20170101/cool.jpg" alt=""></p>
<p>时候对了又怎样捏，到后备箱拿出大号远征竿筒，打开里面顶级竿子轮子十来套，各种各样的线都有，旁边配以工具盒，里面你叫不出名的假饵100多尾，都是来自日本手工制作的，最便宜的也要150元一个。但是人就是放拿放着收藏的，不用，另外拿出个类似钱夹的东西，拉开一看，里面全10元一枚的国产亮片，问他为啥哟，答曰：“咱中国鱼，口糙，就吃这个。”</p>
<p><img src="/img/20170101/liangpian.jpg" alt=""></p>
<p>也不带涉水服，那是初学者跑不远，站水里提升距离的，人高手说了，大鱼经常就在眼皮下面，也不带帽子防晒什么的，傻逼才在水里站一天呢。</p>
<p>到岸边，穿线，上鱼饵，一系列动作一气呵成前后不到三分钟，先看准了位置，一个圈抛下去，也就10米不到，基本肉眼如果不是很好使，都看不见从哪入水的。</p>
<p>往回收线2米，竿尖一个剧烈的抖动，拉成新月状弧线，上鱼了。</p>
<p><img src="/img/20170101/zhongyu.png" alt=""></p>
<p>此刻一定要沉着，面无表情，千万不能暴露出一个月没有上鱼的兴奋，开始调整刹车，听这大鱼在水里攒劲拽线导致刹车发出的刺啦声。</p>
<p>时不时轻松的往回再收几圈，高手说这叫<strong>溜鱼</strong>，是那种一切尽在掌控的驾驭感，要把鱼最后一丝力气耗尽再出水，人玩得是境界。</p>
<p><img src="/img/20170101/liuyu.jpg" alt=""></p>
<p>拉了十分钟，鱼彻底服软了，随你拉吧，这个时候开始正式收线，出水了，人根本不用控鱼器什么的，直接轻松一带，鱼弹到岸边，取钩子。不拍照，尽管有一米来长，打死不拍，为什么呢，人几米的都搞过，一米朝上的根本不入流，跟只虾米一样。</p>
<p><img src="/img/20170101/fangsheng.jpg" alt=""></p>
<p>取完钩子，轻抚鱼背，拍拍头，轻轻放入水里，这叫 <strong>放流</strong>，是路亚倡导的从哪来往哪去，尽管嘴巴都扯的稀烂了，依然重复以上动作。才不像你们呢，10公分的鱼苗也抠里吧嗦的往家拿。</p>
<p><img src="/img/20170101/humian.jpg" alt=""></p>
<p>放完！站定，凝视湖面做沉思状，点一支小熊猫，抽一口，再深切的眺望夕阳，嘴角浮出一丝常人不易察觉的笑意。收竿，打火，走人！！！</p>
<blockquote>
<p>其实，说到路亚装逼。我个人最服的还是他！</p>
</blockquote>
<p><img src="/img/20170101/pj.jpg" alt=""><br><img src="/img/20170101/pj1.jpg" alt=""><br><img src="/img/20170101/pj2.jpg" alt=""></p>
<p><strong><font style="font-weight:bold;" color="red">声明</font>：文字原创非本人，但有稍作调整之处; 配图，为本人用心所为。以上图片均来自于网络！</strong></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;何为&lt;strong&gt;路亚&lt;/strong&gt;？你看有人站水边，竿尖挂个假鱼，抛出去，收回来，抛出去，再收，那就是了。&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/img/20170101/pjlure.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
    
    </summary>
    
    
      <category term="路亚" scheme="http://cuiqingwei.github.io/tags/%E8%B7%AF%E4%BA%9A/"/>
    
  </entry>
  
  <entry>
    <title>谈谈用ASP.NET开发的大型网站有哪些架构方式</title>
    <link href="http://cuiqingwei.github.io/2016/12/30/2016-12-30-%E7%94%A8ASP-NET%E5%BC%80%E5%8F%91%E7%9A%84%E5%A4%A7%E5%9E%8B%E7%BD%91%E7%AB%99%E6%9C%89%E5%93%AA%E4%BA%9B%E6%9E%B6%E6%9E%84%E6%96%B9%E5%BC%8F/"/>
    <id>http://cuiqingwei.github.io/2016/12/30/2016-12-30-用ASP-NET开发的大型网站有哪些架构方式/</id>
    <published>2016-12-29T16:27:40.000Z</published>
    <updated>2017-12-23T05:03:33.000Z</updated>
    
    <content type="html"><![CDATA[<p>在<a href="http://www.cnblogs.com/ms0017/archive/2011/07/26/2117676.html" target="_blank" rel="external">文章</a>里，列举了国内外用ASP.NET开发的大型网站有哪些。最后提到了用.NET开发的大型网站和LAMP/JAVA平台的成本比较。其实在很多时候，收费的不一定就比免费的成本更高。因为开发一个网站要使用哪个平台的技术更合适，需要考虑很多种情况（除了开发技术本身，还要考虑人工，开发效率，时间，后续的支持，维护等等），要综合计算成本才行。微软平台本身虽然是收费的，但总体的成本并非一定比LAMP/JAVA高，上篇文章列举的国内外的那么多基于ASP.NET开发的大型网站就是例证。尤其是在开发效率上，无论是C#开发语言，还是免费的开发工具（Visual Studio Express，或者MonoDevelop/SharpDevelop），.NET明显比其他两个平台更胜一筹。而这一点正是互联网企业所需要的。效率就是生产力。并且，由于有Mono (<a href="http://mono-project.org/" target="_blank" rel="external">http://mono-project.org/</a>) 这个开源平台的存在，.NET技术也可以在linux/BSD等开源服务器上使用。使.NET完全可以实现跨平台应用。据此，我们可以分Windows/Linux两种方式来架构我们的ASP.NET网站：</p>
<a id="more"></a>
<h1 id="一、Windows平台"><a href="#一、Windows平台" class="headerlink" title="一、Windows平台"></a>一、Windows平台</h1><p>在Windows平台下开发大型网站，很多人首先想到的是Microsoft软件高昂的许可费，觉得成本一定很高。其实，这里有个误区。我们开发ASP.NET网站，web服务器完全可以用Windows Werver的WEB版本Windows Web Server 2003/2008，它们并不贵，才3k多RMB。并且注意了，一个系统是一次性买，买了可以用N年，现在还有很多大型网站在用Win2003，想想已经用了多少年？而人员工资则是月付，几年下来成本也并不是很高。贵的地方，应该是SQLServer数据库和支持它的Windows Server企业版。它们确实很贵。但我们开发网站不一定非要用SQLServer啊。数据库可以使用在linux下部署mysql,postgresql等开源数据库，并且也可以考虑用mongodb等开源NOSQL数据库。一般的中大型网站有十几台web服务器就足够了(这里有2013年底的Stack Overflow服务器数据可参考),也就是3w多人民币而已啊！对于Stack Overflow这种规模的网站，这点钱应该也不算什么了吧。当然，如果你真能做到像myspace那种超大型的.NET网站，你应该可以直接找微软要优惠价来批量购买了。呵呵。</p>
<h1 id="二、Linux平台"><a href="#二、Linux平台" class="headerlink" title="二、Linux平台"></a>二、Linux平台</h1><p>如果真的不肯在服务器上花一分钱，就要用完全免费的。我劝你根本不必因此而放弃.NET强大的生产力，而选择其他平台，因为还有Mono。Mono现在已是suse,ubuntu,debian等linux发行版中的默认安装包(apt-get install mono-complete)，并且ubuntu本身就有很多代码是用c#写的。你可以通过类似Linux+Apache/Nginx+Mono的组合（或者用Jexus Web Server）来代替Windows+IIS来架构完全免费的ASP.NET WEB SERVER。目前国内外也有了很多基于mono开发的网站案例,如：<br><a href="http://www.stockren.com/" target="_blank" rel="external">http://www.stockren.com/</a><br><a href="http://www.msannu.cn/" target="_blank" rel="external">http://www.msannu.cn/</a><br>(此外，还有像Unity3D,Xamarin等更多国外知名公司在基于mono开发应用)</p>
<blockquote>
<p>在linux上架设mono的方法有很多，可以参考如下博文：<br>配置linux(apache) + mono 下运行 asp.net<br><a href="http://www.cnblogs.com/hcl0208/archive/2010/10/25/1860173.html" target="_blank" rel="external">http://www.cnblogs.com/hcl0208/archive/2010/10/25/1860173.html</a><br>Ubuntu10.10下Mono2.10+Nginx+fastcgi 部署asp.net网站<br><a href="http://www.cnblogs.com/xiaogangqq123/archive/2011/02/28/1967345.html" target="_blank" rel="external">http://www.cnblogs.com/xiaogangqq123/archive/2011/02/28/1967345.html</a></p>
</blockquote>
<h1 id="三、补充："><a href="#三、补充：" class="headerlink" title="三、补充："></a>三、补充：</h1><p>其实关于大型网站架构的文章网上有太多太多了。如下图，是国内某基于asp.net的大型网站的架构设计图，其实不管是.net还是java/LAMP，不管什么平台，道理都一样。</p>
<p><img src="/img/20161230/2011110710022537.jpg" alt=""></p>
<p>在本架构图中，如果把IIS替换成apache,SqlServer替换成mysql，也一样成立。合理的架构是跟平台无关的。最看不惯的是某些业内所谓的高手，说大型网站用ASP.NET不行，没有JAVA/LAMP好。相信看了这个架构图，再想想 <strong>bing,hotmail,myspace,match,qidian,dangdang,m18,vancl</strong> 等等基于.net开发的大型网站案例，就应该闭上他们的嘴！大型网站的开发，人的能力和合理的架构才是关键所在！(<em>最近一个反例很能说明问题：用java开发的www.12306.cn相信大家都有目共睹。它是架构/人的能力的问题，还是语言/平台的问题？</em>)</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;在&lt;a href=&quot;http://www.cnblogs.com/ms0017/archive/2011/07/26/2117676.html&quot;&gt;文章&lt;/a&gt;里，列举了国内外用ASP.NET开发的大型网站有哪些。最后提到了用.NET开发的大型网站和LAMP/JAVA平台的成本比较。其实在很多时候，收费的不一定就比免费的成本更高。因为开发一个网站要使用哪个平台的技术更合适，需要考虑很多种情况（除了开发技术本身，还要考虑人工，开发效率，时间，后续的支持，维护等等），要综合计算成本才行。微软平台本身虽然是收费的，但总体的成本并非一定比LAMP/JAVA高，上篇文章列举的国内外的那么多基于ASP.NET开发的大型网站就是例证。尤其是在开发效率上，无论是C#开发语言，还是免费的开发工具（Visual Studio Express，或者MonoDevelop/SharpDevelop），.NET明显比其他两个平台更胜一筹。而这一点正是互联网企业所需要的。效率就是生产力。并且，由于有Mono (&lt;a href=&quot;http://mono-project.org/&quot;&gt;http://mono-project.org/&lt;/a&gt;) 这个开源平台的存在，.NET技术也可以在linux/BSD等开源服务器上使用。使.NET完全可以实现跨平台应用。据此，我们可以分Windows/Linux两种方式来架构我们的ASP.NET网站：&lt;/p&gt;
    
    </summary>
    
    
      <category term="IIS" scheme="http://cuiqingwei.github.io/tags/IIS/"/>
    
      <category term="ASP.NET" scheme="http://cuiqingwei.github.io/tags/ASP-NET/"/>
    
  </entry>
  
  <entry>
    <title>基于微软平台IIS/ASP.NET开发的大型网站有哪些?</title>
    <link href="http://cuiqingwei.github.io/2016/12/30/2016-12-30-%E5%9F%BA%E4%BA%8E%E5%BE%AE%E8%BD%AF%E5%B9%B3%E5%8F%B0IIS-ASP-NET%E5%BC%80%E5%8F%91%E7%9A%84%E5%A4%A7%E5%9E%8B%E7%BD%91%E7%AB%99%E6%9C%89%E5%93%AA%E4%BA%9B/"/>
    <id>http://cuiqingwei.github.io/2016/12/30/2016-12-30-基于微软平台IIS-ASP-NET开发的大型网站有哪些/</id>
    <published>2016-12-29T16:04:40.000Z</published>
    <updated>2016-12-30T01:09:34.000Z</updated>
    
    <content type="html"><![CDATA[<p>首先说明一下，本文绝不是要说Microsoft平台多么好，多么强。<br>只是要说明一下除了LAMP/JAVA平台，微软平台不至于像有些人说的，和想象的那么不堪！</p>
<a id="more"></a>
<p>下面一一列举几个:<br><a href="http://www.msn.com/" target="_blank" rel="external">http://www.msn.com/</a><br><a href="http://www.live.com/" target="_blank" rel="external">http://www.live.com/</a> (包括skydrive、hotmail等)<br><a href="http://www.bing.com/" target="_blank" rel="external">http://www.bing.com/</a></p>
<blockquote>
<p>根据comScore今年11月份的统计，微软网站已经超过雅虎、facebook成为仅此于Google的美国第二大网站。如果对这基于windows server/IIS/Asp.net构建的美国第二大网站，你们还说微软技术不能开发大型网站。那不觉得自己是在扯淡么？</p>
</blockquote>
<p><a href="http://www.godaddy.com/" target="_blank" rel="external">http://www.godaddy.com/</a> (全球最大域名注册商)<br><a href="http://www.MySpace.com/" target="_blank" rel="external">http://www.MySpace.com/</a><br><a href="http://www.match.com/" target="_blank" rel="external">http://www.match.com/</a> (世界最大婚恋网站)<br><a href="http://www.monster.com/" target="_blank" rel="external">http://www.monster.com/</a> (世界最大招聘网站,chinahr.com母公司)<br><a href="http://www.careerbuilder.com/" target="_blank" rel="external">http://www.careerbuilder.com/</a><br><a href="http://www.expedia.com/" target="_blank" rel="external">http://www.expedia.com/</a> (世界最大旅游网站,elong,kuxun母公司)<br><a href="http://www.newegg.com/" target="_blank" rel="external">http://www.newegg.com/</a><br><a href="http://www.buy.com/" target="_blank" rel="external">http://www.buy.com/</a><br><a href="http://www.pof.com/" target="_blank" rel="external">http://www.pof.com/</a><br><a href="http://www.ancestry.com/" target="_blank" rel="external">http://www.ancestry.com/</a> (世界最大的家谱网站,拥有全球最复杂的家谱tree)<br><a href="http://espn.go.com/" target="_blank" rel="external">http://espn.go.com/</a><br><a href="http://www.MSNBC.com/" target="_blank" rel="external">http://www.MSNBC.com/</a><br><a href="http://www.stackoverflow.com/" target="_blank" rel="external">http://www.stackoverflow.com/</a> (近两年火起来的技术问答网站,比Quora火的多啊)<br><a href="http://www.AngiesList.com/" target="_blank" rel="external">http://www.AngiesList.com/</a> (最近上市的美国著名点评网站)</p>
<blockquote>
<p>可能有人马上就能举出facebook,yahoo等国外大型网站来反驳我。尤其是对没落的myspace，更是嗤之以鼻。认为是使用微软技术的反面教材。其失败的原因之一就是因为用了微软技术做开发。但我想请问一下：当初myspace如日中天，为全球第一社交网站，facebook还未成气候时，你们当初有谁说它用了微软技术，将来就会失败？有谁说过？！且不说它失败的原因不是微软技术的错，相反，它使用微软技术，能做到上亿的用户，世界最大的社交网站。难道不更能说明微软技术的成功么？现在有多少大型网站能达到当初myspace的规模？屈指可数！并且，我相信如果它做到了现在 facebook的规模，用微软技术也能找到支撑的办法！</p>
</blockquote>
<p><a href="http://www.Dell.com/" target="_blank" rel="external">http://www.Dell.com/</a><br><a href="http://www.CA.com/" target="_blank" rel="external">http://www.CA.com/</a><br><a href="http://www.McAfee.com/" target="_blank" rel="external">http://www.McAfee.com/</a><br><a href="http://www.SAP.com/" target="_blank" rel="external">http://www.SAP.com/</a></p>
<blockquote>
<p>很多人看了肯定会说，这都是一些官网啊。又不是什么大型网站，有什么说服力。请注意了，Dell的官网可是电子商务—卖电脑的。CA, 迈克菲本身是安全领域的公司，SAP是全球顶级ERP提供商。他们为啥要用“安全性最差”的Microsoft技术开发其网站呢？不怕网站被黑了丢人？</p>
</blockquote>
<p><a href="http://www.360buy.com/" target="_blank" rel="external">http://www.360buy.com/</a> (京东商城)<br><a href="http://www.dangdang.com/" target="_blank" rel="external">http://www.dangdang.com/</a> (当当)<br><a href="http://www.vancl.com/" target="_blank" rel="external">http://www.vancl.com/</a> （凡客）<br><a href="http://www.m18.com/" target="_blank" rel="external">http://www.m18.com/</a> （麦考林）<br><a href="http://www.newegg.com.cn/" target="_blank" rel="external">http://www.newegg.com.cn/</a> (新蛋)<br><a href="http://www.yifu.com/" target="_blank" rel="external">http://www.yifu.com/</a><br><a href="http://www.letao.com/" target="_blank" rel="external">http://www.letao.com/</a> (乐淘)<br><a href="http://mall.sina.com.cn/" target="_blank" rel="external">http://mall.sina.com.cn/</a> (新浪商城)<br><a href="http://www.redbaby.com.cn/" target="_blank" rel="external">http://www.redbaby.com.cn/</a><br><a href="http://www.moonbasa.com/" target="_blank" rel="external">http://www.moonbasa.com/</a> (梦芭莎)<br><a href="http://www.no5.com.cn/" target="_blank" rel="external">http://www.no5.com.cn/</a><br><a href="http://www.99read.com/" target="_blank" rel="external">http://www.99read.com/</a><br><a href="http://www.coo8.com/" target="_blank" rel="external">http://www.coo8.com/</a> (库巴，国美旗下)<br><a href="http://www.yintai.com/" target="_blank" rel="external">http://www.yintai.com/</a><br><a href="http://www.5173.com/" target="_blank" rel="external">http://www.5173.com/</a><br><a href="http://www.b2b.cn/" target="_blank" rel="external">http://www.b2b.cn/</a><br><a href="http://www.Ftuan.com/" target="_blank" rel="external">http://www.Ftuan.com/</a><br><a href="http://www.dazhe.cn/" target="_blank" rel="external">http://www.dazhe.cn/</a><br><a href="http://www.tiantian.com/" target="_blank" rel="external">http://www.tiantian.com/</a></p>
<blockquote>
<p>相信很多人都认识到了这一点，国内大部分主流的大型电子商务网站都是用ASP.NET开发的。他们的流量，像360buy等虽然比不上taobao，但千万级的规模是肯定有的，绝对属于大型网站。其安全性，稳定性，性能等等，不比taobao差。</p>
</blockquote>
<p><a href="http://www.ips.com/" target="_blank" rel="external">http://www.ips.com/</a> (环迅支付)<br><a href="http://www.icbc.com.cn/" target="_blank" rel="external">http://www.icbc.com.cn/</a><br><a href="http://www.cmbchina.com/" target="_blank" rel="external">http://www.cmbchina.com/</a><br><a href="https://pbsz.ebank.cmbchina.com/CmbBank_GenShell/UI/GenShellPC/Login/Login.aspx" target="_blank" rel="external">https://pbsz.ebank.cmbchina.com/CmbBank_GenShell/UI/GenShellPC/Login/Login.aspx</a> (招商网银)<br><a href="http://www.95599.cn/" target="_blank" rel="external">http://www.95599.cn/</a><br><a href="https://easyabc.95599.cn/SlfRegPer/netBank/zh_CN/entrance/logon.aspx" target="_blank" rel="external">https://easyabc.95599.cn/SlfRegPer/netBank/zh_CN/entrance/logon.aspx</a> (农行网银)<br><a href="http://www.boc.cn/" target="_blank" rel="external">http://www.boc.cn/</a></p>
<blockquote>
<p>有人说银行的官网不是关键应用，但不知道网银是不是呢？</p>
</blockquote>
<p><a href="http://www.ctrip.com/" target="_blank" rel="external">http://www.ctrip.com/</a> (携程)<br><a href="http://www.elong.com/（艺龙）" target="_blank" rel="external">http://www.elong.com/（艺龙）</a><br><a href="http://www.lotour.com/" target="_blank" rel="external">http://www.lotour.com/</a><br><a href="http://www.17u.cn/" target="_blank" rel="external">http://www.17u.cn/</a><br><a href="http://www.uzai.com/" target="_blank" rel="external">http://www.uzai.com/</a></p>
<blockquote>
<p>主流的在线旅游/票务网站</p>
</blockquote>
<p><a href="http://www.sdo.com/" target="_blank" rel="external">http://www.sdo.com/</a> (盛大在线)<br><a href="http://www.qidian.com/" target="_blank" rel="external">http://www.qidian.com/</a> (起点中文网)<br><a href="http://www.58.com/" target="_blank" rel="external">http://www.58.com/</a> (58同城)<br><a href="http://www.hexun.com/" target="_blank" rel="external">http://www.hexun.com/</a> (和讯)<br><a href="http://www.mtime.com/" target="_blank" rel="external">http://www.mtime.com/</a><br><a href="http://www.yeshj.com/" target="_blank" rel="external">http://www.yeshj.com/</a><br><a href="http://www.eastmoney.com/" target="_blank" rel="external">http://www.eastmoney.com/</a><br><a href="http://www.stockstar.com/" target="_blank" rel="external">http://www.stockstar.com/</a><br><a href="http://feixin.10086.cn/" target="_blank" rel="external">http://feixin.10086.cn/</a> (中国移动飞信<a href="http://www.fetion.com.cn/" target="_blank" rel="external">http://www.fetion.com.cn/</a>)<br><a href="http://mail.10086.cn/" target="_blank" rel="external">http://mail.10086.cn/</a> (中国移动139邮箱)<br><a href="http://passport.189.cn/" target="_blank" rel="external">http://passport.189.cn/</a> （中国电信）<br><a href="http://www.cnblogs.com/" target="_blank" rel="external">http://www.cnblogs.com/</a><br><a href="http://www.csdn.net/" target="_blank" rel="external">http://www.csdn.net/</a><br><a href="http://www.chinahr.com/" target="_blank" rel="external">http://www.chinahr.com/</a><br><a href="http://www.zhaopin.com/" target="_blank" rel="external">http://www.zhaopin.com/</a> (智联招聘)<br><a href="http://www.soufun.com/" target="_blank" rel="external">http://www.soufun.com/</a> (搜房)<br><a href="http://www.dichan.com/" target="_blank" rel="external">http://www.dichan.com/</a> (新浪地产)<br><a href="http://nbadata.sports.qq.com/" target="_blank" rel="external">http://nbadata.sports.qq.com/</a> (腾讯NBA)<br><a href="http://www.autohome.com.cn/" target="_blank" rel="external">http://www.autohome.com.cn/</a> (汽车之家)<br><a href="http://www.bitauto.com/" target="_blank" rel="external">http://www.bitauto.com/</a><br><a href="http://www.39.net/" target="_blank" rel="external">http://www.39.net/</a><br><a href="http://3g.cn/" target="_blank" rel="external">http://3g.cn/</a></p>
<p>总之一句话，拿那些如：性能、安全、稳定、效率等等作为原因来攻击微软平台，是绝对站不住脚的！其实大家都心里清楚，ASP.NET和LAMP/JAVA相比，最大不同只不过是前者是收费的，而后者是开源免费的。仅此而已！</p>
<p>补充：<br>1、关于成本的讨论，可以看一下<a href="http://www.cnblogs.com/ms0017/archive/2011/08/17/Microsoft-NET-Mono-MySQL-MVC-Linux-Large-WebSite.html" target="_blank" rel="external">谈谈用ASP.NET开发的大型网站有哪些架构方式</a>。<br>2、相信很多人（包括我自己）都认为微软Windows在桌面OS上无敌，在服务器上不行，在服务器OS上Linux是老大。可惜事实却是：在服务器操作系统上Windows Server也是老大！这里有IDC对2009，2010两年服务器操作系统的市场份额统计，在最近两年里Windows在全球服务器OS的市场份额已经是第一，并且还在稳步上升中。<br><a href="http://blog.csdn.net/ms_net/article/details/6634295" target="_blank" rel="external">http://blog.csdn.net/ms_net/article/details/6634295</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;首先说明一下，本文绝不是要说Microsoft平台多么好，多么强。&lt;br&gt;只是要说明一下除了LAMP/JAVA平台，微软平台不至于像有些人说的，和想象的那么不堪！&lt;/p&gt;
    
    </summary>
    
    
      <category term="IIS" scheme="http://cuiqingwei.github.io/tags/IIS/"/>
    
      <category term="ASP.NET" scheme="http://cuiqingwei.github.io/tags/ASP-NET/"/>
    
  </entry>
  
  <entry>
    <title>GoAhead移植到OpenWRT</title>
    <link href="http://cuiqingwei.github.io/2016/11/17/2016-12-15-GoAhead%E7%A7%BB%E6%A4%8D%E5%88%B0OpenWRT/"/>
    <id>http://cuiqingwei.github.io/2016/11/17/2016-12-15-GoAhead移植到OpenWRT/</id>
    <published>2016-11-17T13:04:40.000Z</published>
    <updated>2016-12-15T13:45:48.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="make-menuconfig"><a href="#make-menuconfig" class="headerlink" title="make menuconfig"></a>make menuconfig</h1><p><img src="/img/20161215/menuconfig.jpg" alt=""><br><a id="more"></a></p>
<h1 id="ipk"><a href="#ipk" class="headerlink" title="ipk"></a>ipk</h1><p><img src="/img/20161215/goahead-ipk.jpg" alt=""></p>
<h1 id="run"><a href="#run" class="headerlink" title="run"></a>run</h1><p><img src="/img/20161215/openwrt.jpg" alt=""></p>
<h1 id="goahead运行效果"><a href="#goahead运行效果" class="headerlink" title="goahead运行效果"></a>goahead运行效果</h1><p><img src="/img/20161215/goahead2.5.jpg" alt=""></p>
<blockquote>
<p><a href="http://www.right.com.cn/forum/thread-203861-1-1.html" target="_blank" rel="external">http://www.right.com.cn/forum/thread-203861-1-1.html</a><br><a href="http://www.amobbs.com/thread-5665404-1-1.html" target="_blank" rel="external">http://www.amobbs.com/thread-5665404-1-1.html</a></p>
</blockquote>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;make-menuconfig&quot;&gt;&lt;a href=&quot;#make-menuconfig&quot; class=&quot;headerlink&quot; title=&quot;make menuconfig&quot;&gt;&lt;/a&gt;make menuconfig&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;/img/20161215/menuconfig.jpg&quot; alt=&quot;&quot;&gt;&lt;br&gt;
    
    </summary>
    
    
      <category term="OpenWRT" scheme="http://cuiqingwei.github.io/tags/OpenWRT/"/>
    
      <category term="GoAhead" scheme="http://cuiqingwei.github.io/tags/GoAhead/"/>
    
  </entry>
  
  <entry>
    <title>Contiki-CC2538-CoAP</title>
    <link href="http://cuiqingwei.github.io/2016/11/17/2016-11-17-Contiki-CC2538-CoAP/"/>
    <id>http://cuiqingwei.github.io/2016/11/17/2016-11-17-Contiki-CC2538-CoAP/</id>
    <published>2016-11-17T13:04:40.000Z</published>
    <updated>2017-02-22T11:15:35.000Z</updated>
    
    <content type="html"><![CDATA[<div align="center"><br><iframe height="498" width="510" src="http://player.youku.com/embed/XMTgyNDA3NDAzNg==" frameborder="0" 'allowfullscreen'=""></iframe><br></div>

<a id="more"></a>
<h1 id="Mote1"><a href="#Mote1" class="headerlink" title="Mote1"></a>Mote1</h1><h3 id="build-rp-border-router"><a href="#build-rp-border-router" class="headerlink" title="build rp-border-router"></a>build rp-border-router</h3><p>cd ~<br>cd contiki/examples/ipv6/rpl-border-router</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">user@instant-contiki:~/contiki/examples/ipv6/rpl-border-router$ git diff .</div><div class="line">diff --git a/examples/ipv6/rpl-border-router/border-router.c b/examples/ipv6/rpl</div><div class="line">index 90b1fdf..f7d565c 100644</div><div class="line">--- a/examples/ipv6/rpl-border-router/border-router.c</div><div class="line">+++ b/examples/ipv6/rpl-border-router/border-router.c</div><div class="line">@@ -54,7 +54,8 @@</div><div class="line"> #include &lt;string.h&gt;</div><div class="line"> #include &lt;ctype.h&gt;</div><div class="line">-#define DEBUG DEBUG_NONE</div><div class="line">+//#define DEBUG DEBUG_NONE</div><div class="line">+#define DEBUG DEBUG_PRINT</div><div class="line"> #include &quot;net/ip/uip-debug.h&quot;</div><div class="line"> static uip_ipaddr_t prefix;</div><div class="line">diff --git a/examples/ipv6/rpl-border-router/project-conf.h b/examples/ipv6/rpl-</div><div class="line">index ec3eb3f..1f4f8c9 100644</div><div class="line">--- a/examples/ipv6/rpl-border-router/project-conf.h</div><div class="line">+++ b/examples/ipv6/rpl-border-router/project-conf.h</div><div class="line">@@ -64,4 +64,7 @@</div><div class="line"> #define WEBSERVER_CONF_CFS_CONNS 2</div><div class="line"> #endif</div><div class="line">+//#define RF_CORE_CONF_CHANNEL    25</div><div class="line">+#define RF_CORE_CONF_CHANNEL    26</div><div class="line">+</div><div class="line"> #endif /* PROJECT_ROUTER_CONF_H_ */</div></pre></td></tr></table></figure>
<p>make TARGET=cc2538dk all</p>
<h3 id="program-cc2538-select-reset-on-CC2538DK"><a href="#program-cc2538-select-reset-on-CC2538DK" class="headerlink" title="program cc2538,(select + reset on CC2538DK)"></a>program cc2538,(select + reset on CC2538DK)</h3><p>../../../tools/cc2538-bsl/cc2538-bsl.py -v -e -w border-router.bin</p>
<h3 id="push-reset-button-see-console-print"><a href="#push-reset-button-see-console-print" class="headerlink" title="push reset button, see console print"></a>push reset button, see console print</h3><p>../../../tools/sky/serialdump-linux -b115200 /dev/ttyUSB0</p>
<h1 id="Mote2"><a href="#Mote2" class="headerlink" title="Mote2"></a>Mote2</h1><h3 id="build-er-rest-example"><a href="#build-er-rest-example" class="headerlink" title="build er-rest-example"></a>build er-rest-example</h3><p>cd ~<br>cd contiki/examples/er-rest-example<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line">user@instant-contiki:~/contiki/examples/er-rest-example$ git diff .</div><div class="line">diff --git a/examples/er-rest-example/project-conf.h b/examples/er-rest-example/project-conf.h</div><div class="line">index adcb75e..facd2fb 100644</div><div class="line">--- a/examples/er-rest-example/project-conf.h</div><div class="line">+++ b/examples/er-rest-example/project-conf.h</div><div class="line">@@ -40,25 +40,26 @@</div><div class="line"> #define __PROJECT_ERBIUM_CONF_H__</div><div class="line"></div><div class="line"> /* Custom channel and PAN ID configuration for your project. */</div><div class="line">-/*</div><div class="line">+</div><div class="line">    #undef RF_CHANNEL</div><div class="line">    #define RF_CHANNEL                     26</div><div class="line"></div><div class="line">    #undef IEEE802154_CONF_PANID</div><div class="line">    #define IEEE802154_CONF_PANID          0xABCD</div><div class="line">- */</div><div class="line">+</div><div class="line"> /* IP buffer size must match all other hops, in particular the border router. */</div><div class="line">-/*</div><div class="line">+</div><div class="line">    #undef UIP_CONF_BUFFER_SIZE</div><div class="line">    #define UIP_CONF_BUFFER_SIZE           256</div><div class="line">- */</div><div class="line">+</div><div class="line"> /* Disabling RDC and CSMA for demo purposes. Core updates often</div><div class="line">    require more memory. */</div><div class="line"> /* For projects, optimize memory and enable RDC and CSMA again. */</div><div class="line"> #undef NETSTACK_CONF_RDC</div><div class="line">-#define NETSTACK_CONF_RDC              nullrdc_driver</div><div class="line">+//#define NETSTACK_CONF_RDC              nullrdc_driver</div><div class="line">+#define NETSTACK_CONF_RDC              contikimac_driver</div><div class="line"> #undef RPL_CONF_MAX_DAG_PER_INSTANCE</div><div class="line"> #define RPL_CONF_MAX_DAG_PER_INSTANCE     1</div><div class="line">@@ -68,7 +69,8 @@</div><div class="line"> #define UIP_CONF_TCP                   0</div><div class="line"> #undef NETSTACK_CONF_MAC</div><div class="line">-#define NETSTACK_CONF_MAC     nullmac_driver</div><div class="line">+//#define NETSTACK_CONF_MAC     nullmac_driver</div><div class="line">+#define NETSTACK_CONF_MAC     csma_driver</div><div class="line"> /* Increase rpl-border-router IP-buffer when using more than 64. */</div><div class="line"> #undef REST_MAX_CHUNK_SIZE</div></pre></td></tr></table></figure></p>
<p>make TARGET=cc2538dk all</p>
<h3 id="program-cc2538-select-reset-on-CC2538DK-1"><a href="#program-cc2538-select-reset-on-CC2538DK-1" class="headerlink" title="program cc2538,(select + reset on CC2538DK)"></a>program cc2538,(select + reset on CC2538DK)</h3><p>../../../tools/cc2538-bsl/cc2538-bsl.py -p /dev/ttyUSB1 -v -e -w er-example-server.bin</p>
<h3 id="push-reset-button-see-console-print-1"><a href="#push-reset-button-see-console-print-1" class="headerlink" title="push reset button, see console print"></a>push reset button, see console print</h3><p>../../../tools/sky/serialdump-linux -b115200 /dev/ttyUSB1</p>
<h1 id="run-tunslip6"><a href="#run-tunslip6" class="headerlink" title="run tunslip6"></a>run tunslip6</h1><p>cd ~<br>cd contiki/examples/ipv6/rpl-border-router</p>
<p>sudo ../../../tools/tunslip6 aaaa::1/64 -s /dev/ttyUSB0</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">********SLIP started on ``/dev/ttyUSB0&apos;&apos;</div><div class="line">opened tun device ``/dev/tun0&apos;&apos;</div><div class="line">ifconfig tun0 inet `hostname` mtu 1500 up</div><div class="line">ifconfig tun0 add aaaa::1/64</div><div class="line">ifconfig tun0 add fe80::0:0:0:1/64</div><div class="line">ifconfig tun0</div><div class="line">tun0      Link encap:UNSPEC  HWaddr 00-00-00-00-00-00-00-00-00-00-00-00-00-00-00-00  </div><div class="line">          inet addr:127.0.1.1  P-t-P:127.0.1.1  Mask:255.255.255.255</div><div class="line">          inet6 addr: fe80::1/64 Scope:Link</div><div class="line">          inet6 addr: aaaa::1/64 Scope:Global</div><div class="line">          UP POINTOPOINT RUNNING NOARP MULTICAST  MTU:1500  Metric:1</div><div class="line">          RX packets:0 errors:0 dropped:0 overruns:0 frame:0</div><div class="line">          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0</div><div class="line">          collisions:0 txqueuelen:500</div><div class="line">          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)</div><div class="line"></div><div class="line">*** Address:aaaa::1 =&gt; aaaa:0000:0000:0000</div><div class="line">Got configuration message of type P</div><div class="line">Setting prefix aaaa::</div><div class="line">created a new RPL dag</div><div class="line">Server IPv6 addresses:</div><div class="line"> aaaa::212:4b00:5af:8444</div><div class="line"> fe80::212:4b00:5af:8444</div></pre></td></tr></table></figure>
<h1 id="ping6"><a href="#ping6" class="headerlink" title="ping6"></a>ping6</h1><p>ping6 aaaa::212:4b00:5af:84e0</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">PING aaaa::212:4b00:5af:84e0(aaaa::212:4b00:5af:84e0) 56 data bytes</div><div class="line">64 bytes from aaaa::212:4b00:5af:84e0: icmp_seq=1 ttl=63 time=1013 ms</div><div class="line">64 bytes from aaaa::212:4b00:5af:84e0: icmp_seq=2 ttl=63 time=126 ms</div><div class="line">64 bytes from aaaa::212:4b00:5af:84e0: icmp_seq=3 ttl=63 time=126 ms</div><div class="line">64 bytes from aaaa::212:4b00:5af:84e0: icmp_seq=4 ttl=63 time=126 ms</div><div class="line">64 bytes from aaaa::212:4b00:5af:84e0: icmp_seq=5 ttl=63 time=125 ms</div><div class="line">64 bytes from aaaa::212:4b00:5af:84e0: icmp_seq=6 ttl=63 time=120 ms</div></pre></td></tr></table></figure>
<h1 id="firefox"><a href="#firefox" class="headerlink" title="firefox"></a>firefox</h1><p><img src="/img/20161117/coap1.png" alt=""><br><img src="/img/20161117/coap2.png" alt=""></p>
]]></content>
    
    <summary type="html">
    
      &lt;div align = &quot;center&quot;&gt;&lt;br&gt;&lt;iframe height=498 width=510 src=&#39;http://player.youku.com/embed/XMTgyNDA3NDAzNg==&#39; frameborder=0 &#39;allowfullscreen&#39;&gt;&lt;/iframe&gt;&lt;br&gt;&lt;/div&gt;
    
    </summary>
    
    
      <category term="Contiki" scheme="http://cuiqingwei.github.io/tags/Contiki/"/>
    
      <category term="CC2538" scheme="http://cuiqingwei.github.io/tags/CC2538/"/>
    
      <category term="CoAP" scheme="http://cuiqingwei.github.io/tags/CoAP/"/>
    
  </entry>
  
</feed>
