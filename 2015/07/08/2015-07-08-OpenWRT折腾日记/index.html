<!DOCTYPE html>
<html lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">

    <!--[if lt IE 9]>
        <style>body {display: none; background: none !important} </style>
        <meta http-equiv="Refresh" Content="0; url=//outdatedbrowser.com/" />
    <![endif]-->

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta name="format-detection" content="telephone=no">
<meta name="author" content="cuiqingwei">



<meta name="description" content="2016-04-23 Openwrt Yun1#!/bin/bash -ex FEEDS12345./scripts/feeds uninstall -arm -rf feeds./scripts/feeds update -a./scripts/feeds install -a./scripts/feeds uninstall erlang freeswitch remotefs libzstr">
<meta name="keywords" content="折腾,OpenWRT">
<meta property="og:type" content="article">
<meta property="og:title" content="OpenWRT折腾日记">
<meta property="og:url" content="http://cuiqingwei.github.io/2015/07/08/2015-07-08-OpenWRT折腾日记/index.html">
<meta property="og:site_name" content="iZheteng">
<meta property="og:description" content="2016-04-23 Openwrt Yun1#!/bin/bash -ex FEEDS12345./scripts/feeds uninstall -arm -rf feeds./scripts/feeds update -a./scripts/feeds install -a./scripts/feeds uninstall erlang freeswitch remotefs libzstr">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2018-03-08T15:04:54.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="OpenWRT折腾日记">
<meta name="twitter:description" content="2016-04-23 Openwrt Yun1#!/bin/bash -ex FEEDS12345./scripts/feeds uninstall -arm -rf feeds./scripts/feeds update -a./scripts/feeds install -a./scripts/feeds uninstall erlang freeswitch remotefs libzstr">

<link rel="apple-touch-icon" href="/apple-touch-icon.png">


    <link rel="alternate" href="/atom.xml" title="iZheteng" type="application/atom+xml">



    <link rel="shortcut icon" href="/favicon.ico">



    <link href="//cdn.bootcss.com/animate.css/3.5.1/animate.min.css" rel="stylesheet">



    <link href="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet">



    <script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
    <link href="//cdn.bootcss.com/pace/1.0.2/themes/blue/pace-theme-minimal.css" rel="stylesheet">


<link rel="stylesheet" href="/css/style.css">



<link href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">


<title>OpenWRT折腾日记 | iZheteng</title>

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
<script src="//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js"></script>

<script>
    var yiliaConfig = {
        fancybox: true,
        animate: true,
        isHome: false,
        isPost: true,
        isArchive: false,
        isTag: false,
        isCategory: false,
        fancybox_js: "//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.min.js",
        scrollreveal: "//cdn.bootcss.com/scrollReveal.js/3.1.4/scrollreveal.min.js",
        search: true
    }
</script>


    <script>
        yiliaConfig.jquery_ui = [true, "//cdn.bootcss.com/jqueryui/1.10.4/jquery-ui.min.js", "//cdn.bootcss.com/jqueryui/1.10.4/css/jquery-ui.min.css"];
    </script>



    <script> yiliaConfig.rootUrl = "\/";</script>





    <script>
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?9648942fbef87fb71c7420365857d971";
            var s = document.getElementsByTagName("script")[0]; 
            s.parentNode.insertBefore(hm, s);
        })();
    </script>


</head></html>
<body>
  <div id="container">
    <div class="left-col">
    <div class="overlay"></div>
<div class="intrude-less">
    <header id="header" class="inner">
        <a href="/" class="profilepic">
            <img src="https://avatars1.githubusercontent.com/u/894023?v=3&amp;u=5fa799d34b2474ac0de5d6a3454f215c54517057&amp;s=140" class="animated zoomIn">
        </a>
        <hgroup>
          <h1 class="header-author"><a href="/">cuiqingwei</a></h1>
        </hgroup>

        
        <p class="header-subtitle">Enjoy work, Enjoy life!</p>
        

        
            <form id="search-form">
            <input type="text" id="local-search-input" name="q" placeholder="search..." class="search form-control" autocomplete="off" autocorrect="off" searchonload="false">
            <i class="fa fa-times" onclick="resetSearch()"></i>
            </form>
            <div id="local-search-result"></div>
            <p class="no-result">No results found <i class="fa fa-spinner fa-pulse"></i></p>
        


        
            <div id="switch-btn" class="switch-btn">
                <div class="icon">
                    <div class="icon-ctn">
                        <div class="icon-wrap icon-house" data-idx="0">
                            <div class="birdhouse"></div>
                            <div class="birdhouse_holes"></div>
                        </div>
                        <div class="icon-wrap icon-ribbon hide" data-idx="1">
                            <div class="ribbon"></div>
                        </div>
                        
                        <div class="icon-wrap icon-link hide" data-idx="2">
                            <div class="loopback_l"></div>
                            <div class="loopback_r"></div>
                        </div>
                        
                        
                        <div class="icon-wrap icon-me hide" data-idx="3">
                            <div class="user"></div>
                            <div class="shoulder"></div>
                        </div>
                        
                    </div>
                    
                </div>
                <div class="tips-box hide">
                    <div class="tips-arrow"></div>
                    <ul class="tips-inner">
                        <li>菜单</li>
                        <li>标签</li>
                        
                        <li>友情链接</li>
                        
                        
                        <li>关于我</li>
                        
                    </ul>
                </div>
            </div>
        

        <div id="switch-area" class="switch-area">
            <div class="switch-wrap">
                <section class="switch-part switch-part1">
                    <nav class="header-menu">
                        <ul>
                        
                            <li><a href="/">主页</a></li>
                        
                            <li><a href="/archives/">所有文章</a></li>
                        
                            <li><a href="/tags/">标签云</a></li>
                        
                            <li><a href="/about/">关于我</a></li>
                        
                            <li><a href="/404.html">404公益</a></li>
                        
                        </ul>
                    </nav>
                    <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" href="mailto:qingwei_cui@qq.com" title="Email"></a>
                            
                                <a class="fa GitHub" href="https://github.com/cuiqingwei" title="GitHub"></a>
                            
                                <a class="fa RSS" href="/atom.xml" title="RSS"></a>
                            
                                <a class="fa LinkedIn" href="https://cn.linkedin.com/in/庆伟-崔-63b69aa9" title="LinkedIn"></a>
                            
                        </ul>
                    </nav>
                </section>
                
                
                <section class="switch-part switch-part2">
                    <div class="widget tagcloud" id="js-tagcloud">
                        <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/6lbr/">6lbr</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/6lowpan/">6lowpan</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ASP-NET/">ASP.NET</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Altium-Designer/">Altium Designer</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C-Builder6-0/">C++Builder6.0</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CC2430/">CC2430</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CC2530/">CC2530</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CC2538/">CC2538</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/CoAP/">CoAP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Contiki/">Contiki</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Cooja/">Cooja</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DCS、PLC/">DCS、PLC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DIY/">DIY</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Delphi/">Delphi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Domoticz/">Domoticz</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Eagle/">Eagle</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/FastDFS/">FastDFS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GPL/">GPL</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GitHub-Pages/">GitHub Pages</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GoAhead/">GoAhead</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HAP-NodeJS/">HAP-NodeJS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HomeKit/">HomeKit</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hybird/">Hybird</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IIS/">IIS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IoT/">IoT</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ionic/">Ionic</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/">Java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Jekyll/">Jekyll</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MEAN/">MEAN</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MacOS/">MacOS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MkDocs/">MkDocs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Node-js/">Node.js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/OpenWRT/">OpenWRT</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PMS/">PMS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Proteus/">Proteus</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Raspberry-Pi/">Raspberry Pi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SQLite/">SQLite</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SSH/">SSH</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/SSM/">SSM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Socket/">Socket</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Travis-CI/">Travis CI</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/USBHID/">USBHID</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Wi-Fi/">Wi-Fi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WiFi评测工具/">WiFi评测工具</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ZigBee/">ZigBee</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/android/">android</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/curl/">curl</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/eclipse/">eclipse</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/goAhead/">goAhead</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/kali-linux/">kali-linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linkit-smart-7688/">linkit-smart-7688</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx/">nginx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/patch/">patch</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/rtmp/">rtmp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shadowsocks/">shadowsocks</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ubuntu/">ubuntu</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vi-vim/">vi/vim</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/三星平板/">三星平板</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/串口调试工具/">串口调试工具</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/传感器/">传感器</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/体会/">体会</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/创客/">创客</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/单车装备/">单车装备</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/嵌入式/">嵌入式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/开发语言/">开发语言</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/开源硬件/">开源硬件</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/折叠公路车/">折叠公路车</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/折腾/">折腾</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/无人机/">无人机</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/晶振/">晶振</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/智能家居/">智能家居</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/最简主义/">最简主义</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/电子书包/">电子书包</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/经典网站/">经典网站</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/网络命令/">网络命令</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/路亚/">路亚</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/路由器SDK/">路由器SDK</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/骑行/">骑行</a></li></ul>
                    </div>
                </section>
                
                
                
                <section class="switch-part switch-part3">
                    <div id="js-friends">
                    
                      <a class="main-nav-link switch-friends-link" href="https://hexo.io">Hexo</a>
                    
                      <a class="main-nav-link switch-friends-link" href="https://pages.github.com/">GitHub</a>
                    
                      <a class="main-nav-link switch-friends-link" href="https://cuiqingwei1981.github.io/">iZheteng</a>
                    
                    </div>
                </section>
                

                
                
                <section class="switch-part switch-part4">
                
                    <div id="js-aboutme">我是一个爱折腾的人</div>
                </section>
                
            </div>
        </div>
    </header>                
</div>
    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
      <div class="overlay">
          <div class="slider-trigger"></div>
          <h1 class="header-author js-mobile-header hide"><a href="/" title="回到主页">cuiqingwei</a></h1>
      </div>
    <div class="intrude-less">
        <header id="header" class="inner">
            <a href="/" class="profilepic">
                <img src="https://avatars1.githubusercontent.com/u/894023?v=3&amp;u=5fa799d34b2474ac0de5d6a3454f215c54517057&amp;s=140" class="animated zoomIn">
            </a>
            <hgroup>
              <h1 class="header-author"><a href="/" title="回到主页">cuiqingwei</a></h1>
            </hgroup>
            
            <p class="header-subtitle">Enjoy work, Enjoy life!</p>
            
            <nav class="header-menu">
                <ul>
                
                    <li><a href="/">主页</a></li>
                
                    <li><a href="/archives/">所有文章</a></li>
                
                    <li><a href="/tags/">标签云</a></li>
                
                    <li><a href="/about/">关于我</a></li>
                
                    <li><a href="/404.html">404公益</a></li>
                
                <div class="clearfix"></div>
                </ul>
            </nav>
            <nav class="header-nav">
                        <ul class="social">
                            
                                <a class="fa Email" target="_blank" href="mailto:qingwei_cui@qq.com" title="Email"></a>
                            
                                <a class="fa GitHub" target="_blank" href="https://github.com/cuiqingwei" title="GitHub"></a>
                            
                                <a class="fa RSS" target="_blank" href="/atom.xml" title="RSS"></a>
                            
                                <a class="fa LinkedIn" target="_blank" href="https://cn.linkedin.com/in/庆伟-崔-63b69aa9" title="LinkedIn"></a>
                            
                        </ul>
            </nav>
        </header>                
    </div>
    <link class="menu-list" tags="标签" friends="友情链接" about="关于我">
</nav>
      <div class="body-wrap"><article id="post-2015-07-08-OpenWRT折腾日记" class="article article-type-post" itemscope="" itemprop="blogPost">
  
    <div class="article-meta">
      <a href="/2015/07/08/2015-07-08-OpenWRT折腾日记/" class="article-date">
      <time datetime="2015-07-08T10:00:00.000Z" itemprop="datePublished">2015-07-08</time>
</a>

 
    <a href="/2015/07/08/2015-07-08-OpenWRT折腾日记/#comments" title="查看评论">
        <i class="fa fa-comments-o" aria-hidden="true"></i>
        <span class="count-comment"></span>
        
            <span class="ds-thread-count"></span>
        
        
    </a>

    </div>
  
  <div class="article-inner">
    
      <input type="hidden" class="isFancy">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      OpenWRT折腾日记
    </h1>
  

      </header>
      
      <div class="article-info article-info-post">
        

        
    <div class="article-tag tagcloud">
        <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/OpenWRT/">OpenWRT</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/折腾/">折腾</a></li></ul>
    </div>

        <div class="clearfix"></div>
      </div>
      
    
    <div class="article-entry" itemprop="articleBody">
      
          
        <h2 id="2016-04-23-Openwrt-Yun"><a href="#2016-04-23-Openwrt-Yun" class="headerlink" title="2016-04-23 Openwrt Yun"></a>2016-04-23 Openwrt Yun</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/bin/bash -ex</span></span><br></pre></td></tr></table></figure>
<h4 id="FEEDS"><a href="#FEEDS" class="headerlink" title="FEEDS"></a>FEEDS</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">./scripts/feeds uninstall -a</span><br><span class="line">rm -rf feeds</span><br><span class="line">./scripts/feeds update -a</span><br><span class="line">./scripts/feeds install -a</span><br><span class="line">./scripts/feeds uninstall erlang freeswitch remotefs libzstream shflags opensips pulseaudio xmlrpc-c rtorrent sox umurmur-polarssl freecwmp-zstream osirisd logtrigger libplist libimobiledevice cmus mxml boost wt etherpuppet php4 aprx n2n pdnsd crtmpserver kissdx openconnect telepathy-python alljoyn</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h4 id="CONFIG"><a href="#CONFIG" class="headerlink" title="CONFIG"></a>CONFIG</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">rm -f .config</span><br><span class="line">git checkout .config</span><br><span class="line">sed <span class="string">'s/=m$/=n/'</span> &lt; .config &gt; .baseonlyconfig</span><br><span class="line">mv .config .origconfig</span><br><span class="line">mv .baseonlyconfig .config</span><br><span class="line">make oldconfig</span><br></pre></td></tr></table></figure>
<h4 id="BUILDING"><a href="#BUILDING" class="headerlink" title="BUILDING"></a>BUILDING</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">nice -n 10 make -j 2 V=s</span><br><span class="line">/etc/config/wireless</span><br><span class="line">config wifi-iface</span><br><span class="line">	option network <span class="string">'wwan'</span></span><br><span class="line">	option ssid <span class="string">'MiWiFi'</span></span><br><span class="line">	option encryption <span class="string">'psk2'</span></span><br><span class="line">	option device <span class="string">'radio0'</span></span><br><span class="line">	option mode <span class="string">'sta'</span></span><br><span class="line">	option bssid <span class="string">'8C:BE:BE:29:FE:56'</span></span><br><span class="line">	option key <span class="string">'1981021400'</span></span><br><span class="line">wireless.@wifi-iface[0]=wifi-iface                                              </span><br><span class="line">wireless.@wifi-iface[0].network=wwan                                            </span><br><span class="line">wireless.@wifi-iface[0].ssid=MiWiFi                                             </span><br><span class="line">wireless.@wifi-iface[0].encryption=psk2                                         </span><br><span class="line">wireless.@wifi-iface[0].device=radio0                                           </span><br><span class="line">wireless.@wifi-iface[0].mode=sta                                                </span><br><span class="line">wireless.@wifi-iface[0].bssid=8C:BE:BE:29:FE:56                                 </span><br><span class="line">wireless.@wifi-iface[0].key=1981021400</span><br></pre></td></tr></table></figure>
<h2 id="2016-04-11-DraginoYun-Shield"><a href="#2016-04-11-DraginoYun-Shield" class="headerlink" title="2016-04-11 DraginoYun Shield"></a>2016-04-11 DraginoYun Shield</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> src-svn packages https://github.com/arduino/openwrt-packages-yun/trunk &gt;&gt; feed.conf.default</span><br></pre></td></tr></table></figure>
<h4 id="更新package"><a href="#更新package" class="headerlink" title="更新package"></a>更新package</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./scripts/feeds update -a</span><br></pre></td></tr></table></figure>
<h4 id="安装package"><a href="#安装package" class="headerlink" title="安装package"></a>安装package</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">./scripts/feeds install yun-conf</span><br><span class="line">./scripts/feeds install yun-scripts</span><br><span class="line">./scripts/feeds install luci-app-arduino-webpanel</span><br></pre></td></tr></table></figure>
<h4 id="单独编译package"><a href="#单独编译package" class="headerlink" title="单独编译package"></a>单独编译package</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">make package/yun-conf/compile</span><br><span class="line">make package/yun-scripts/compile</span><br><span class="line">make package/luci-app-arduino-webpanel/compile</span><br><span class="line">make package/yun-conf/install</span><br><span class="line">make package/yun-scripts/install</span><br><span class="line">make package/luci-app-arduino-webpanel/install</span><br></pre></td></tr></table></figure>
<h2 id="2016-04-08-DraginoYun-Shield"><a href="#2016-04-08-DraginoYun-Shield" class="headerlink" title="2016-04-08 DraginoYun Shield"></a>2016-04-08 DraginoYun Shield</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">svn checkout https://github.com/dragino/openwrt-yun.git dragino-yun</span><br><span class="line"><span class="built_in">cd</span> dragino-yun/trunk</span><br><span class="line">./build_image.sh</span><br><span class="line"><span class="built_in">cd</span> openwrt</span><br><span class="line">vi feeds.config.default</span><br></pre></td></tr></table></figure>
<h4 id="断开packages-链接本地dragino-packages"><a href="#断开packages-链接本地dragino-packages" class="headerlink" title="断开packages,链接本地dragino-packages"></a>断开packages,链接本地dragino-packages</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#src-git dragino https://github.com/dragino/dragino-packages.git</span></span><br><span class="line">src-link dragino ../../dragino-packages</span><br></pre></td></tr></table></figure>
<h4 id="卸载package"><a href="#卸载package" class="headerlink" title="卸载package"></a>卸载package</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./scripts/feeds uninstall luci-app-iot-webpanel</span><br><span class="line">./scripts/feeds uninstall luci-app-sensor</span><br></pre></td></tr></table></figure>
<h4 id="更新package-1"><a href="#更新package-1" class="headerlink" title="更新package"></a>更新package</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./scripts/feeds update luci-app-iot-webpanel</span><br></pre></td></tr></table></figure>
<h4 id="安装package-1"><a href="#安装package-1" class="headerlink" title="安装package"></a>安装package</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./scripts/feeds install luci-app-iot-webpanel</span><br></pre></td></tr></table></figure>
<h4 id="单独编译package-1"><a href="#单独编译package-1" class="headerlink" title="单独编译package"></a>单独编译package</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">make package/luci-app-iot-webpanel/compile</span><br><span class="line">make package/luci-app-iot-webpanel/install</span><br></pre></td></tr></table></figure>
<h4 id="安装package-2"><a href="#安装package-2" class="headerlink" title="安装package"></a>安装package</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">scp bin/ar71xx/packages/[packagename].ipk roo@ip:/tmp</span><br><span class="line">opkg install /tmp/[packagename].ipk</span><br></pre></td></tr></table></figure>
<p><a href="http://www.doodle3d.com/help/wiki/installing-updating-packages" target="_blank" rel="noopener">http://www.doodle3d.com/help/wiki/installing-updating-packages</a><br><a href="https://wiki.openwrt.org/doc/howto/build" target="_blank" rel="noopener">https://wiki.openwrt.org/doc/howto/build</a></p>
<h2 id="2016-04-05-ArduinoYun-Shield"><a href="#2016-04-05-ArduinoYun-Shield" class="headerlink" title="2016-04-05 ArduinoYun Shield"></a>2016-04-05 ArduinoYun Shield</h2><p><a href="http://www.znck007.com/forum.php?mod=viewthread&amp;tid=22687" target="_blank" rel="noopener">http://www.znck007.com/forum.php?mod=viewthread&amp;tid=22687</a><br>源<br><a href="https://downloads.openwrt.org/attitude_adjustment/12.09/ar71xx/generic/packages/" target="_blank" rel="noopener">https://downloads.openwrt.org/attitude_adjustment/12.09/ar71xx/generic/packages/</a><br><a href="http://downloads.arduino.cc/openwrtyun/1/packages/" target="_blank" rel="noopener">http://downloads.arduino.cc/openwrtyun/1/packages/</a><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/opkg.conf</span><br><span class="line">src/gz attitude_adjustment https://downloads.openwrt.org/attitude_adjustment/12.09/ar71xx/generic/packages/</span><br></pre></td></tr></table></figure></p>
<h4 id="使用putty登陆openwrt输入"><a href="#使用putty登陆openwrt输入" class="headerlink" title="使用putty登陆openwrt输入"></a>使用putty登陆openwrt输入</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">opkg update</span><br><span class="line">opkg install kmod-usb-storage block-mount block-hotplug kmod-fs-ext4</span><br><span class="line">mkfs.ext4 /dev/sda1<span class="comment"># 格式化TF卡，第一次使用须格式化</span></span><br><span class="line">mkdir -p /mnt/sda1<span class="comment"># 新建一个TF卡目录</span></span><br><span class="line">mount /dev/sda1 /mnt/sda1<span class="comment"># 将TF卡挂载到/mnt/sda1目录</span></span><br></pre></td></tr></table></figure>
<h4 id="自动挂载（这样就不需要每次都执行上面的命令挂载SD卡了）"><a href="#自动挂载（这样就不需要每次都执行上面的命令挂载SD卡了）" class="headerlink" title="自动挂载（这样就不需要每次都执行上面的命令挂载SD卡了）"></a>自动挂载（这样就不需要每次都执行上面的命令挂载SD卡了）</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/config/fstab</span><br></pre></td></tr></table></figure>
<h4 id="移到最下面，按i键（编辑模式）然后复制下面，右击到putty就自动粘贴上去了！"><a href="#移到最下面，按i键（编辑模式）然后复制下面，右击到putty就自动粘贴上去了！" class="headerlink" title="移到最下面，按i键（编辑模式）然后复制下面，右击到putty就自动粘贴上去了！"></a>移到最下面，按i键（编辑模式）然后复制下面，右击到putty就自动粘贴上去了！</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">config <span class="string">'mount'</span></span><br><span class="line">        option <span class="string">'device'</span> <span class="string">'/dev/sda1'</span></span><br><span class="line">        option <span class="string">'options'</span> <span class="string">'rw,sync'</span></span><br><span class="line">        option <span class="string">'enabled_fsck'</span> <span class="string">'0'</span></span><br><span class="line">        option <span class="string">'enabled'</span> <span class="string">'1'</span></span><br><span class="line">        option <span class="string">'target'</span> <span class="string">'/mnt/sda1'</span></span><br><span class="line">mkdir -p /mnt/sda1/php<span class="comment"># 新建软件包目录</span></span><br><span class="line"><span class="built_in">echo</span> dest phpdisk /mnt/sda1/php/ &gt;&gt; /etc/opkg.conf</span><br><span class="line">opkg --dest phpdisk install php5-fastcgi php5-mod-gd php5-mod-xml php5-mod-ctype php5-mod-session php5-mod-sockets php5-mod-tokenizer php5-mod-mcrypt php5-mod-mbstring php5-mod-pdo php5-mod-curl php5-mod-mysql</span><br></pre></td></tr></table></figure>
<h4 id="安装一个时区信息软件包，否则系统无法识别时区。"><a href="#安装一个时区信息软件包，否则系统无法识别时区。" class="headerlink" title="安装一个时区信息软件包，否则系统无法识别时区。"></a>安装一个时区信息软件包，否则系统无法识别时区。</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">opkg install zoneinfo-asia</span><br></pre></td></tr></table></figure>
<h4 id="建立软连接，不然会找不到对应的库和配置文件："><a href="#建立软连接，不然会找不到对应的库和配置文件：" class="headerlink" title="建立软连接，不然会找不到对应的库和配置文件："></a>建立软连接，不然会找不到对应的库和配置文件：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">ln -s /mnt/sda1/php/etc/php.ini /etc/php.ini</span><br><span class="line">ln -s /mnt/sda1/php/etc/php5 /etc/php5</span><br><span class="line">ln -s /mnt/sda1/php/usr/lib/libpcre.so.0.0.1 /usr/lib/libpcre.so.0</span><br><span class="line">ln -s /mnt/sda1/php/usr/lib/libpcreposix.so.0.0.0 /usr/lib/libpcreposix.so.0</span><br><span class="line">ln -s /mnt/sda1/php/usr/lib/libsqlite.so.0.8.6 /usr/lib/libsqlite.so.0</span><br><span class="line">ln -s /mnt/sda1/php/usr/lib/libsqlite3.so.0.8.6 /usr/lib/libsqlite3.so.0</span><br><span class="line">ln -s /mnt/sda1/php/usr/lib/libxml2.so.2.7.8 /usr/lib/libxml2.so.2</span><br><span class="line">ln -s /mnt/sda1/php/usr/lib/libz.so.1.2.3 /usr/lib/libz.so</span><br><span class="line">ln -s /mnt/sda1/php/usr/lib/libuClibc++-0.2.4.so /usr/lib/libuClibc++.so.0</span><br><span class="line">ln -s /mnt/sda1/php/usr/lib/libmysqlclient.so.16 /usr/lib/libmysqlclient.so.16</span><br><span class="line">ln -s /mnt/sda1/php/usr/lib/php /usr/lib/php</span><br><span class="line">ln -s /mnt/sda1/php/usr/bin/php-cgi /usr/bin/php-cgi</span><br></pre></td></tr></table></figure>
<h4 id="安装到内存"><a href="#安装到内存" class="headerlink" title="安装到内存"></a>安装到内存</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">opkg install php5-fastcgi php5-mod-gd php5-mod-xml php5-mod-ctype php5-mod-session php5-mod-sockets php5-mod-tokenizer php5-mod-mcrypt php5-mod-mbstring php5-mod-pdo php5-mod-curl php5-mod-mysql</span><br></pre></td></tr></table></figure>
<h4 id="编辑php-ini，方法如下。"><a href="#编辑php-ini，方法如下。" class="headerlink" title="编辑php.ini，方法如下。"></a>编辑php.ini，方法如下。</h4><h4 id="找到下面的字段修改为如下，如果有用”-”注析的就删掉："><a href="#找到下面的字段修改为如下，如果有用”-”注析的就删掉：" class="headerlink" title="找到下面的字段修改为如下，如果有用”;”注析的就删掉："></a>找到下面的字段修改为如下，如果有用”;”注析的就删掉：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">short_open_tag = On</span><br><span class="line">error_log = /var/<span class="built_in">log</span>/php_errors.log</span><br><span class="line">doc_root = <span class="string">"/mnt/sda1/www"</span>  修改成sd卡的路径。</span><br><span class="line">extension=ctype.so</span><br><span class="line">extension=curl.so</span><br><span class="line">extension=dom.so</span><br><span class="line">extension=exif.so</span><br><span class="line">extension=ftp.so</span><br><span class="line">extension=gd.so</span><br><span class="line">extension=gmp.so</span><br><span class="line">extension=hash.so</span><br><span class="line">extension=iconv.so</span><br><span class="line">extension=json.so</span><br><span class="line">extension=ldap.so</span><br><span class="line">extension=mbstring.so</span><br><span class="line">extension=mcrypt.so</span><br><span class="line">extension=mysql.so</span><br><span class="line">extension=openssl.so</span><br><span class="line">extension=pcre.so</span><br><span class="line">extension=pdo.so</span><br><span class="line">extension=pdo-mysql.so</span><br><span class="line">extension=pdo-pgsql.so</span><br><span class="line">extension=pdo_sqlite.so</span><br><span class="line">extension=pgsql.so</span><br><span class="line">extension=session.so</span><br><span class="line">extension=soap.so</span><br><span class="line">extension=sockets.so</span><br><span class="line">extension=sqlite.so</span><br><span class="line">extension=sqlite3.so</span><br><span class="line">extension=tokenizer.so</span><br><span class="line">extension=xml.so</span><br><span class="line">extension=xmlreader.so</span><br><span class="line">extension=xmlwriter.so</span><br><span class="line">date.timezone = Asia/Shanghai</span><br><span class="line">mysql.default_socket = /var/run/mysqld.sock</span><br><span class="line">session.auto_start = 1</span><br></pre></td></tr></table></figure>
<h4 id="和上面一样，打开-etc-config-uhttpd"><a href="#和上面一样，打开-etc-config-uhttpd" class="headerlink" title="和上面一样，打开/etc/config/uhttpd"></a>和上面一样，打开/etc/config/uhttpd</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">option home <span class="string">'/mnt/sda1/www'</span>                 <span class="comment">#把/www修改成/mnt/sda1/www为放置网页的目录。</span></span><br><span class="line">option index_page index.php               	<span class="comment">#添加到后面</span></span><br><span class="line">list interpreter <span class="string">".php=/usr/bin/php-cgi"</span>   	<span class="comment">#添加到后面</span></span><br></pre></td></tr></table></figure>
<h4 id="然后重启uhttpd（在putty里输入命令回车）："><a href="#然后重启uhttpd（在putty里输入命令回车）：" class="headerlink" title="然后重启uhttpd（在putty里输入命令回车）："></a>然后重启uhttpd（在putty里输入命令回车）：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/uhttpd restart</span><br></pre></td></tr></table></figure>
<h4 id="使用putty安装mysql"><a href="#使用putty安装mysql" class="headerlink" title="使用putty安装mysql"></a>使用putty安装mysql</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">opkg update</span><br><span class="line">opkg install mysql-server</span><br></pre></td></tr></table></figure>
<h4 id="创建数据库目录"><a href="#创建数据库目录" class="headerlink" title="创建数据库目录"></a>创建数据库目录</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /mnt/sda1/mysql/data/mysql</span><br><span class="line">mkdir -p /mnt/sda1/mysql/data/tmp</span><br></pre></td></tr></table></figure>
<h4 id="查找到以下内容并修改如下："><a href="#查找到以下内容并修改如下：" class="headerlink" title="查找到以下内容并修改如下："></a>查找到以下内容并修改如下：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">datadir = /mnt/sda1/mysql/data/mysql/</span><br><span class="line">tmpdir  = /mnt/sda1/mysql/data/tmp/</span><br></pre></td></tr></table></figure>
<h4 id="bind-address-192-168-1-1"><a href="#bind-address-192-168-1-1" class="headerlink" title="bind-address = 192.168.1.1"></a>bind-address = 192.168.1.1</h4><h4 id="初始化建库"><a href="#初始化建库" class="headerlink" title="初始化建库"></a>初始化建库</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql_install_db --force</span><br></pre></td></tr></table></figure>
<h4 id="以关闭授权的方式启动mysql"><a href="#以关闭授权的方式启动mysql" class="headerlink" title="以关闭授权的方式启动mysql"></a>以关闭授权的方式启动mysql</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqld --skip-grant &amp;</span><br></pre></td></tr></table></figure>
<h4 id="进入mysql-修改账号连接权限"><a href="#进入mysql-修改账号连接权限" class="headerlink" title="进入mysql,修改账号连接权限"></a>进入mysql,修改账号连接权限</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root mysql</span><br></pre></td></tr></table></figure>
<h4 id="进入mysql以后出现mysql-gt-提示符，再修改账号连接权限："><a href="#进入mysql以后出现mysql-gt-提示符，再修改账号连接权限：" class="headerlink" title="进入mysql以后出现mysql&gt;提示符，再修改账号连接权限："></a>进入mysql以后出现mysql&gt;提示符，再修改账号连接权限：</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update user <span class="built_in">set</span> host=<span class="string">'%'</span> <span class="built_in">where</span> user=<span class="string">'root'</span> and host=<span class="string">'localhost'</span>;</span><br></pre></td></tr></table></figure>
<h4 id="修改数据库密码为edutech"><a href="#修改数据库密码为edutech" class="headerlink" title="修改数据库密码为edutech"></a>修改数据库密码为edutech</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">update user <span class="built_in">set</span> password=PASSWORD(<span class="string">'edutech'</span>) <span class="built_in">where</span> user=<span class="string">'root'</span>;</span><br></pre></td></tr></table></figure>
<h4 id="刷新数据库"><a href="#刷新数据库" class="headerlink" title="刷新数据库"></a>刷新数据库</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">flush privileges;</span><br></pre></td></tr></table></figure>
<h4 id="上面ok了以后，退出mysql"><a href="#上面ok了以后，退出mysql" class="headerlink" title="上面ok了以后，退出mysql"></a>上面ok了以后，退出mysql</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">exit</span>;</span><br></pre></td></tr></table></figure>
<h4 id="重启mysql，以授权验证方式启动（为了系统安全）"><a href="#重启mysql，以授权验证方式启动（为了系统安全）" class="headerlink" title="重启mysql，以授权验证方式启动（为了系统安全）"></a>重启mysql，以授权验证方式启动（为了系统安全）</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">killall mysqld</span><br></pre></td></tr></table></figure>
<h4 id="设定开机运行"><a href="#设定开机运行" class="headerlink" title="设定开机运行"></a>设定开机运行</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/mysqld <span class="built_in">enable</span></span><br></pre></td></tr></table></figure>
<h4 id="启动MySQL服务"><a href="#启动MySQL服务" class="headerlink" title="启动MySQL服务"></a>启动MySQL服务</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/mysqld start</span><br></pre></td></tr></table></figure>
<h4 id="用Navicat新建数据库"><a href="#用Navicat新建数据库" class="headerlink" title="用Navicat新建数据库"></a>用Navicat新建数据库</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">znckapi</span><br></pre></td></tr></table></figure>
<h4 id="新建查询"><a href="#新建查询" class="headerlink" title="新建查询"></a>新建查询</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE IF NOT EXISTS `api_worklist` (</span><br><span class="line">`id` int(16) unsigned NOT NULL AUTO_INCREMENT,</span><br><span class="line">`<span class="built_in">type</span>` int(2) NOT NULL COMMENT <span class="string">'1网设2上传3定时'</span>,</span><br><span class="line">`uid` int(8) NOT NULL,</span><br><span class="line">`sid` varchar(3) NOT NULL,</span><br><span class="line">`nid` varchar(3) NOT NULL,</span><br><span class="line">`data` varchar(32) NOT NULL,</span><br><span class="line">`note` varchar(64) NOT NULL,</span><br><span class="line">`status` int(2) NOT NULL COMMENT <span class="string">'1成功2失败3超过次数4超15分'</span>,</span><br><span class="line">`time` datetime NOT NULL,</span><br><span class="line">`ip` varchar(16) NOT NULL,</span><br><span class="line">`num` int(2) NOT NULL,</span><br><span class="line">PRIMARY KEY(`id`),</span><br><span class="line">KEY `uid` (`uid`),</span><br><span class="line">KEY `time` (`time`)</span><br><span class="line">)ENGINE=MyISAM DEFAULT CHARSET=utf8 AUTO_INCREMENT=1;</span><br></pre></td></tr></table></figure>
<h4 id="安装python"><a href="#安装python" class="headerlink" title="安装python"></a>安装python</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /mnt/sda1/python</span><br><span class="line"><span class="built_in">echo</span> dest pythondisk /mnt/sda1/python/ &gt;&gt; /etc/opkg.conf</span><br><span class="line">opkg --dest pythondisk install python</span><br><span class="line">ln -s /mnt/sda1/python/usr/bin/python /usr/bin/python</span><br><span class="line">opkg --dest pythondisk install pyserial<span class="comment"># 安装串口通讯类</span></span><br><span class="line">opkg --dest pythondisk install python-mysql<span class="comment"># 安装mysql操作类</span></span><br></pre></td></tr></table></figure>
<p><a href="http://see.sl088.com/wiki/Opkg" target="_blank" rel="noopener">http://see.sl088.com/wiki/Opkg</a><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /mnt/sda1</span><br><span class="line">wget http://downloads.openwrt.org/attitude_adjustment/12.09/ar71xx/generic/packages/pyserial_2.4-1_ar71xx.ipk</span><br><span class="line">wget http://downloads.openwrt.org/attitude_adjustment/12.09/ar71xx/generic/packages/python-mysql_1.2.2-1_ar71xx.ipk</span><br><span class="line">2016-03-03 DRAGINO Yun Shield</span><br><span class="line">ssh root@192.168.199.159</span><br><span class="line">dragino</span><br><span class="line">root@dragino-7676e6:~<span class="comment"># cd /tmp/</span></span><br><span class="line">root@dragino-7676e6:/tmp<span class="comment">#</span></span><br><span class="line">root@dragino-7676e6:/tmp<span class="comment"># wget http://downloads.openwrt.org/attitude_adjustment/12.09/ar71xx/generic/packages/luci-i18n-chine</span></span><br><span class="line">se_0.11.1-1_ar71xx.ipk</span><br><span class="line">root@dragino-7676e6:/tmp<span class="comment"># opkg install luci-i18n-chinese_0.11.1-1_ar71xx.ipk</span></span><br></pre></td></tr></table></figure></p>
<h2 id="2016-03-03-luci"><a href="#2016-03-03-luci" class="headerlink" title="2016-03-03 luci"></a>2016-03-03 luci</h2><p><a href="http://www.cnblogs.com/luopeng/p/4678704.html" target="_blank" rel="noopener">http://www.cnblogs.com/luopeng/p/4678704.html</a></p>
<h2 id="2016-01-22-web摄像头、mjpg-streamer"><a href="#2016-01-22-web摄像头、mjpg-streamer" class="headerlink" title="2016-01-22 web摄像头、mjpg-streamer"></a>2016-01-22 web摄像头、mjpg-streamer</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">wget https://downloads.openwrt.org/attitude_adjustment/12.09/ar71xx/generic/openwrt-ar71xx-generic-tl-wr2543-v1-squashfs-factory.bin</span><br><span class="line">scp bin/ar71xx/openwrt-ar71xx-generic-tl-wr703n-v1-squashfs-factory.bin root@192.168.199.193:/tmp/</span><br><span class="line">mtd -r write openwrt-ar71xx-generic-tl-wr703n-v1-squashfs-factory.bin firmware</span><br><span class="line">uci show network.lan</span><br><span class="line">uci <span class="built_in">set</span> network.lan.proto=dhcp</span><br><span class="line">uci commit</span><br><span class="line">/etc/init.d/networtk restart</span><br><span class="line">&gt;&gt; opkg install kmod-video-uvc。</span><br><span class="line">&gt;&gt; ls /dev，如果有vedio的话，说明驱动安装成功（前提是要把摄像头插上）</span><br><span class="line">&gt;&gt; opkg install mjpg-streamer</span><br><span class="line">&gt;&gt; mjpg_streamer -b -i <span class="string">"input_uvc.so /dev/video0 -r 640x480 -yuv"</span> -o <span class="string">"output_http.so -p 8080 -w /web"</span></span><br><span class="line">http://192.168.199.193:8080/?action=stream（动态视频）</span><br><span class="line">http://192.168.199.193:8080/?action=snapshot（静态图像）</span><br></pre></td></tr></table></figure>
<h2 id="2015-08-25-mtk-openwrt-sdk"><a href="#2015-08-25-mtk-openwrt-sdk" class="headerlink" title="2015-08-25 mtk openwrt-sdk"></a>2015-08-25 mtk openwrt-sdk</h2><h4 id="for-mtksdk-openwrt-3-10-14-20141127-30965ec3-tar-bz2"><a href="#for-mtksdk-openwrt-3-10-14-20141127-30965ec3-tar-bz2" class="headerlink" title="for mtksdk-openwrt-3.10.14-20141127-30965ec3.tar.bz2"></a>for mtksdk-openwrt-3.10.14-20141127-30965ec3.tar.bz2</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ack -w MediaTek --html</span><br><span class="line">openwrt-3.10.14_2014/package/ralink/ui/luci-mtk/patches/001-logo.patch</span><br></pre></td></tr></table></figure>
<h4 id="改logo-MediaTek-gt-Edutech"><a href="#改logo-MediaTek-gt-Edutech" class="headerlink" title="改logo MediaTek-&gt;Edutech"></a>改logo MediaTek-&gt;Edutech</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openwrt-3.10.14_2014/package/ralink/ui/luci-mtk/src/modules/base/root/etc/config</span><br></pre></td></tr></table></figure>
<h4 id="luci-改language"><a href="#luci-改language" class="headerlink" title="luci 改language"></a>luci 改language</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openwrt-3.10.14_2014/package/ralink/drivers/mt76x2e/files</span><br></pre></td></tr></table></figure>
<h4 id="mt7612e-sh-改SSID"><a href="#mt7612e-sh-改SSID" class="headerlink" title="mt7612e.sh 改SSID"></a>mt7612e.sh 改SSID</h4><h4 id="for-mtksdk-openwrt-3-10-14-20150311-d021c937-tar-bz2"><a href="#for-mtksdk-openwrt-3-10-14-20150311-d021c937-tar-bz2" class="headerlink" title="for mtksdk-openwrt-3.10.14-20150311-d021c937.tar.bz2"></a>for mtksdk-openwrt-3.10.14-20150311-d021c937.tar.bz2</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openwrt-3.10.14_2014/package/ramips/ui/luci-mtk/patches/001-logo.patch</span><br></pre></td></tr></table></figure>
<h4 id="改logo-MediaTek-gt-Edutech-1"><a href="#改logo-MediaTek-gt-Edutech-1" class="headerlink" title="改logo MediaTek-&gt;Edutech"></a>改logo MediaTek-&gt;Edutech</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openwrt-3.10.14_2014/package/ramips/ui/luci-mtk/src/modules/base/root/etc/config</span><br></pre></td></tr></table></figure>
<h4 id="luci-改language-1"><a href="#luci-改language-1" class="headerlink" title="luci 改language"></a>luci 改language</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openwrt-3.10.14_2014/package/ramips/drivers/mt7620/files</span><br></pre></td></tr></table></figure>
<h4 id="mt7620-sh-改SSID"><a href="#mt7620-sh-改SSID" class="headerlink" title="mt7620.sh 改SSID"></a>mt7620.sh 改SSID</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openwrt-3.10.14_2014/package/ramips/drivers/mt76x2e/files</span><br></pre></td></tr></table></figure>
<h4 id="mt7612e-sh-改SSID-1"><a href="#mt7612e-sh-改SSID-1" class="headerlink" title="mt7612e.sh 改SSID"></a>mt7612e.sh 改SSID</h4><h4 id="更新opkg-config源"><a href="#更新opkg-config源" class="headerlink" title="更新opkg.config源"></a>更新opkg.config源</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/openwrt-3.10.14/package/base-files/image-config.in　文件中 173　行</span><br><span class="line">http://downloads.openwrt.org/barrier_breaker/14.07/ramips/mt7620a/packages</span><br></pre></td></tr></table></figure>
<h4 id="版本号"><a href="#版本号" class="headerlink" title="版本号"></a>版本号</h4><p>/openwrt-3.10.14/package/ramips/ui/luci-mtk/src/build/mkversion.sh<br>更改　luciname 和 luciversion为<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">luciname    = <span class="string">"Edutech LuCI "</span></span><br><span class="line">luciversion = <span class="string">"0.12"</span></span><br></pre></td></tr></table></figure></p>
<h4 id="banner"><a href="#banner" class="headerlink" title="banner"></a>banner</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">figlet edutech -f speed.flf -c -w 52</span><br><span class="line">         _________      _____           ______  </span><br><span class="line">    ___________  /___  ___  /______________  /_</span><br><span class="line">    _  _ \  __  /_  / / /  __/  _ \  ___/_  __ \</span><br><span class="line">    /  __/ /_/ / / /_/ // /_ /  __/ /__ _  / / /</span><br><span class="line">    \___/\__,_/  \__,_/ \__/ \___/\___/ /_/ /_/</span><br><span class="line"> -----------------------------------------------------</span><br><span class="line">             Shanghai Edutech Co.,Ltd</span><br><span class="line"> -----------------------------------------------------</span><br></pre></td></tr></table></figure>
<h4 id="profiles-和-固件名"><a href="#profiles-和-固件名" class="headerlink" title="profiles 和　固件名"></a>profiles 和　固件名</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">openwrt-3.10.14/target/linux/ramips/mt7620/profiles</span><br><span class="line">MT7620a_MT7612e.mk</span><br><span class="line">openwrt-3.10.14/target/linux/ramips/image/Makefile</span><br></pre></td></tr></table></figure>
<h4 id="add-by-cuiqingwei-at-20150828"><a href="#add-by-cuiqingwei-at-20150828" class="headerlink" title="add by cuiqingwei at 20150828"></a>add by cuiqingwei at 20150828</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Image/Build/Profile/MT7620a_MT7612e=$(call BuildFirmware/Default8M/$(1),$(1),mt7612e,MT7620a_MT7612e)</span><br></pre></td></tr></table></figure>
<h4 id="去除有问题的iw"><a href="#去除有问题的iw" class="headerlink" title="去除有问题的iw"></a>去除有问题的iw</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./scripts/feeds uninstall iw</span><br><span class="line">删除openwrt-3.10.14/package/network/utils目录下的iw目录</span><br></pre></td></tr></table></figure>
<h2 id="2015-08-13-openwrt-yun"><a href="#2015-08-13-openwrt-yun" class="headerlink" title="2015-08-13 openwrt-yun"></a>2015-08-13 openwrt-yun</h2><p>目录openwrt-yun/feeds/packages下arduino文件夹复制<br>到/openwrt/branches/barrier_breaker/package目录下<br>对应源码在openwrt/branches/barrier_breaker/build_dir/target-mips_34kc_uClibc-0.9.33.2/目录下<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">make menuconfig</span><br><span class="line">Base System ---&gt;</span><br><span class="line">&lt;*&gt; yun-conf...................................... Custom Yún configurations            </span><br><span class="line"> &lt;*&gt; yun-scripts.......................................... Custom Yún scripts</span><br><span class="line">LuCI ---&gt;</span><br><span class="line">3. Applications ---&gt;</span><br><span class="line">&lt;*&gt; luci-app-arduino-webpanel............ simplified wifi configuration panel  </span><br><span class="line"><span class="built_in">echo</span> <span class="string">"src/gz barrier_breaker http://download.linino.org/dogstick/all-in-one/latest/packages/"</span> &gt;&gt; /etc/opkg.conf</span><br><span class="line">opkg install rng-tools --force-depends</span><br><span class="line">opkg install gnupg</span><br><span class="line">+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span><br><span class="line">“Not enough random bytes available. Please <span class="keyword">do</span> some other work to give</span><br><span class="line">　the OS a chance to collect more entropy! (Need 284 more bytes)”</span><br><span class="line">First make sure you have the following available and have the rights to it:</span><br><span class="line">ls -l /dev/urandom</span><br><span class="line"><span class="keyword">then</span> execute rngd against it:</span><br><span class="line">rngd -r /dev/urandom</span><br><span class="line">+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span><br><span class="line">/etc/init.d/generate_new_gpg_key start</span><br></pre></td></tr></table></figure></p>
<p><a href="http://192.168.199.192/cgi-bin/luci/webpanel/homepage" target="_blank" rel="noopener">http://192.168.199.192/cgi-bin/luci/webpanel/homepage</a><br>成功！</p>
<h2 id="2015-08-12-arduino-yun"><a href="#2015-08-12-arduino-yun" class="headerlink" title="2015-08-12 arduino-yun"></a>2015-08-12 arduino-yun</h2><p><a href="https://www.snip2code.com/Snippet/38230/Install-Arduino-Yun-%28Linino%29-software-on" target="_blank" rel="noopener">https://www.snip2code.com/Snippet/38230/Install-Arduino-Yun-%28Linino%29-software-on</a><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">opkg install luci-lib-json luci rng-tools</span><br></pre></td></tr></table></figure></p>
<h4 id="If-rng-tools-is-not-installable-then-install-it-by-hand-from-e-g-http-download-linino-org-linino-distro-linino-dev-latest-packages-rng-tools-3-2-ar71xx-ipk"><a href="#If-rng-tools-is-not-installable-then-install-it-by-hand-from-e-g-http-download-linino-org-linino-distro-linino-dev-latest-packages-rng-tools-3-2-ar71xx-ipk" class="headerlink" title="If rng-tools is not installable, then install it by hand from e.g., http://download.linino.org/linino_distro/linino_dev/latest/packages/rng-tools_3-2_ar71xx.ipk"></a>If rng-tools is not installable, then install it by hand from e.g., <a href="http://download.linino.org/linino_distro/linino_dev/latest/packages/rng-tools_3-2_ar71xx.ipk" target="_blank" rel="noopener">http://download.linino.org/linino_distro/linino_dev/latest/packages/rng-tools_3-2_ar71xx.ipk</a></h4><h4 id="Edit-your-etc-opkg-conf-add"><a href="#Edit-your-etc-opkg-conf-add" class="headerlink" title="Edit your /etc/opkg.conf, add"></a>Edit your /etc/opkg.conf, add</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">src/gz barrier_breaker http://download.linino.org/dogstick/all-in-one/latest/packages/</span><br></pre></td></tr></table></figure>
<h4 id="Comment-out-your-earlier-src-gz"><a href="#Comment-out-your-earlier-src-gz" class="headerlink" title="Comment out your earlier src/gz"></a>Comment out your earlier src/gz</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">opkg update</span><br><span class="line">opkg list|grep bridge</span><br><span class="line">opkg list|grep yun</span><br><span class="line">opkg install -force-overwrite cpu-mcu-bridge yun-conf yun-scripts luci-app-arduino-webpanel avrdude gnupg temboo spacebrew uSDaemon</span><br><span class="line">/etc/init.d/avahi-daemon start</span><br></pre></td></tr></table></figure>
<h4 id="Need-to-edit-in-order-to-change-to-correct-LED"><a href="#Need-to-edit-in-order-to-change-to-correct-LED" class="headerlink" title="Need to edit in order to change to correct LED"></a>Need to edit in order to change to correct LED</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/usr/bin/blink-start</span><br><span class="line">/usr/bin/blink-stop</span><br><span class="line">rm /tmp/luci-indexcache</span><br></pre></td></tr></table></figure>
<h4 id="In-etc-avahi-avahi-daemon-conf-edit"><a href="#In-etc-avahi-avahi-daemon-conf-edit" class="headerlink" title="In /etc/avahi/avahi-daemon.conf edit"></a>In /etc/avahi/avahi-daemon.conf edit</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[server]</span><br><span class="line"><span class="built_in">enable</span>-dbus=no</span><br><span class="line">/etc/init.d/avahi-daemon <span class="built_in">enable</span></span><br><span class="line">/etc/init.d/avahi-daemon start</span><br></pre></td></tr></table></figure>
<p>SHOULD SHOW<br><a href="http://192.168.199.192/cgi-bin/luci/webpanel/homepage" target="_blank" rel="noopener">http://192.168.199.192/cgi-bin/luci/webpanel/homepage</a></p>
<h4 id="NEED-TO-GENERATE-A-GPG-KEY-–-WHY"><a href="#NEED-TO-GENERATE-A-GPG-KEY-–-WHY" class="headerlink" title="NEED TO GENERATE A GPG KEY – WHY???"></a>NEED TO GENERATE A GPG KEY – WHY???</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/generate_new_gpg_key start</span><br></pre></td></tr></table></figure>
<h4 id="Works-only-if-rngd-is-there-generates"><a href="#Works-only-if-rngd-is-there-generates" class="headerlink" title="Works only if rngd is there, generates"></a>Works only if rngd is there, generates</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/etc/arduino/arduino_gpg.asc</span><br><span class="line">/etc/arduino/arduino_gpg.pub</span><br><span class="line">/etc/arduino/arduino_gpg.sec</span><br></pre></td></tr></table></figure>
<p>#Apparently Yun uses avrdude linuxgpio, this is suggested by /etc/linino/test_avrdude.sh</p>
<p>#run-avrdude wants to edit sys/class/gpio/gpio21/value which does not exist here</p>
<p>#Also see <a href="http://www.tonylianlong.com/?p=135" target="_blank" rel="noopener">http://www.tonylianlong.com/?p=135</a></p>
<p>#It has modified files for the Arduino IDE and it has the GPG key and gpg binary</p>
<p>#They have also a modified /usr/bin/run-avrdude script which is pure genius, it changes linuxgpio to serial programming and if that is all that is required to change makes it trivial to hook up different boards via USB as well:</p>
<p>#!/bin/sh</p>
<p>#echo 1 &gt; /sys/class/gpio/gpio21/value</p>
<p>#avrdude -c linuxgpio -C /etc/avrdude.conf -p m32u4 -U lfuse:w:0xFF:m -U hfuse:w:0xD8:m -U efuse:w:0xFB:m -Uflash:w:$1:i $2</p>
<p>#echo 0 &gt; /sys/class/gpio/gpio21/value</p>
<p>#echo “$2” &gt; /s2<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">""</span> &gt; /dev/ttyACM0</span><br><span class="line">lsusb|grep 0043</span><br><span class="line"><span class="keyword">if</span> [ <span class="string">"$?"</span>x == <span class="string">"0"</span>x ];<span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> UNO</span><br><span class="line">avrdude -V -p m328p -c arduino -b 115200 -P /dev/ttyACM0 -C /etc/avrdude.conf -U flash:w:<span class="variable">$1</span> <span class="variable">$2</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line">lsusb|grep 0042</span><br><span class="line"><span class="keyword">if</span> [ <span class="string">"$?"</span>x == <span class="string">"0"</span>x ];<span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> MEGA</span><br><span class="line">avrdude -V -C/etc/avrdude.conf -patmega2560 -cstk500v2 -P/dev/ttyACM0 -b115200 -D -Uflash:w:<span class="variable">$1</span> <span class="variable">$2</span>      </span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">""</span> &gt; /dev/ttyACM0</span><br><span class="line">====</span><br><span class="line"><span class="comment"># kmod-fs-hfsplus and kmod-nls-utf8 sufficient to mount Mac devices?</span></span><br><span class="line">====</span><br><span class="line">For my own reference, these are the packages that come with the YUN according to http://download.linino.org/linino_distro/linino_dev/latest/openwrt-ar71xx-generic-rootfs.tar.gz:</span><br><span class="line">luci-lib-sys kmod-usb-storage terminfo libuci-lua libc opkg triggerhappy kmod-usb-core libpthread ubus iw kmod-crypto-manager luci-mod-admin-core busybox libubus-lua python-json kmod-crypto-hash libiwinfo-lua swconfig kmod-fs-reiserfs libiwinfo libdbus libcurl libdw kmod-lib-crc-ccitt libgpgme luci-theme-openwrt luci-theme-bootstrap kmod-pppoe kmod-video-core libavahi-client kmod-pppox kmod-ipt-conntrack kmod-lib-crc16 base-files kmod-fs-hfsplus netifd uboot-envtools kmod-usb-ohci dnsmasq usbutils luci-sgi-cgi libblkid ubusd libelf1 kmod-spi-gpio python kmod-i2c-core libgpg-error block-mount kmod-fs-vfat kmod-usb2 firewall luci-app-firewall kmod-fs-hfs temboo luci-lib-ipkg libuci liblua libip4tc avahi-dnsconfd libcyassl libdaemon kmod-ath9k libavahi uci lua kmod-fs-ext4 wpad-mini dbus dropbear kmod-ledtrig-timer curl kmod-nls-utf8 kmod-crypto-aes mtd libstdcpp kmod-crypto-core luci-theme-base libjson-c libgcc libreadline libip6tc luci-proto-ppp libffi libuuid luci-mod-admin-full ppp libubox kmod-leds-gpio libusb-1.0 kmod-gpio-button-hotplug gnupg libjson cpu-mcu-bridge luci-lib-web spacebrew librt libassuan kmod-mac80211 libjson-script swap-utils libblobmsg-json iptables hotplug2 kmod-ipt-nathelper kmod-fs-ntfs kmod-fuse jshn libncurses kmod-ipt-core luci-webpanel-linino kmod-ledtrig-default-on rng-tools libpolarssl kmod-ppp kmod-spi-bitbang avahi-daemon uhttpd-mod-lua python-mini kmod-wdt-ath79 avahi-utils libubus uhttpd libxtables avrdude zlib luci-lib-nixio luci-lib-json luci kmod-spi-tty-ds kmod-ath libexpat kernel libnl-tiny libbz2 blkid libusb luci-proto-core px5g kmod-nls-base luci-i18n-english libgdbm yun-scripts libusb-compat uhttpd-mod-ubus uSDaemon wireless-tools kmod-ath9k-common kmod-crypto-arc4 libopenssl kmod-scsi-core kmod-cfg80211 libavahi-dbus-support luci-lib-core ppp-mod-pppoe kmod-spi-dev kmod-ipt-nat kmod-ledtrig-netdev</span><br><span class="line">====</span><br><span class="line">opkg install avrdude --force-depends</span><br><span class="line">opkg install rng-tools --force-depends</span><br><span class="line">＋＋＋＋＋＋＋＋＋＋＋＋＋＋＋＋＋＋＋＋＋＋＋＋＋＋＋＋＋＋</span><br><span class="line">opkg update</span><br><span class="line">opkg list|grep bridge</span><br><span class="line">opkg list|grep yun</span><br><span class="line">opkg install luci</span><br><span class="line">opkg install -force-overwrite cpu-mcu-bridge yun-conf yun-scripts luci-app-arduino-webpanel gnupg uSDaemon</span><br><span class="line">opkg install rng-tools avrdude --force-depends</span><br><span class="line">rm /tmp/luci-indexcache</span><br><span class="line">/etc/init.d/generate_new_gpg_key start</span><br></pre></td></tr></table></figure></p>
<p><a href="http://192.168.199.192/cgi-bin/luci/webpanel/homepage" target="_blank" rel="noopener">http://192.168.199.192/cgi-bin/luci/webpanel/homepage</a></p>
<h2 id="2015-07-24-YunWebUI"><a href="#2015-07-24-YunWebUI" class="headerlink" title="2015-07-24 YunWebUI"></a>2015-07-24 YunWebUI</h2><p>将feeds.conf中<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">src-git luci https://github.com/openwrt/luci.git</span><br></pre></td></tr></table></figure></p>
<p>替换为<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">src-git luci https://github.com/openwrt/luci.git;luci-0.11</span><br></pre></td></tr></table></figure></p>
<p>Development: the easy way<br>The easiest way to hack the web panel is to copy on your Yún the files you find in this repo, maintaining the folders structure.<br>For example, file usr/lib/lua/luci/controller/arduino/index.lua will go to /usr/lib/lua/luci/controller/arduino/index.lua on your Yún.<br>Then access the webpanel at <a href="http://arduino.local/" target="_blank" rel="noopener">http://arduino.local/</a> (where “arduino” is the name of your Yún), properly edit file index.lua and refresh the page to see the changes.<br>Once done, copy the files back to your pc and submit us a pull request, so that everyone can take advantage of the improvements you made.<br>Development: the fast, local but hard way<br>You need a GNU/Linux box and the following tools: subversion, gnupg, lua, make, gcc, wget. On Debian based distros, these are packages subversion, gnupg, lua5.1, liblua5.1-0-dev, build-essential, wget.<br><strong>参考</strong><br><a href="https://github.com/arduino/YunWebUI" target="_blank" rel="noopener">https://github.com/arduino/YunWebUI</a></p>
<h5 id="ubuntu系统设置"><a href="#ubuntu系统设置" class="headerlink" title="ubuntu系统设置"></a>ubuntu系统设置</h5><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir /etc/arduino</span><br><span class="line"><span class="built_in">cd</span> /etc/arduino</span><br><span class="line">sudo wget https://raw.githubusercontent.com/arduino/openwrt-packages-yun/master/arduino/yun-conf/files/etc/arduino/gpg_gen_key_batch</span><br><span class="line">sudo gpg --batch --gen-key /etc/arduino/gpg_gen_key_batch</span><br><span class="line">sudo rm -f /etc/arduino/arduino_gpg.asc</span><br><span class="line">sudo gpg --no-default-keyring --secret-keyring /etc/arduino/arduino_gpg.sec --keyring /etc/arduino/arduino_gpg.pub --<span class="built_in">export</span> --armor --output /etc/arduino/arduino_gpg.asc</span><br><span class="line">sudo chmod 644 /etc/arduino/arduino_gpg.*</span><br><span class="line">svn co http://svn.luci.subsignal.org/luci/branches/luci-0.11 luci</span><br><span class="line"><span class="built_in">cd</span> /home/router-dev/iot-gateway</span><br><span class="line">svn co https://github.com/arduino/YunWebUI/trunk yunWebUI</span><br></pre></td></tr></table></figure>
<p>进入openwrt目录<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /home/router-dev/openwrt/branches/attitude_adjustment/feeds</span><br><span class="line"><span class="built_in">cd</span> luci</span><br><span class="line">mkdir applications/arduino</span><br><span class="line">cp applications/myapplication/Makefile applications/arduino</span><br><span class="line">ln -s /home/router-dev/iot-gateway/yunWebUI/usr/lib/lua/luci applications/arduino/luasrc</span><br><span class="line">ln -s /home/router-dev/iot-gateway/yunWebUI/www applications/arduino/htdocs</span><br></pre></td></tr></table></figure></p>
<p>回到openwrt目录/home/router-dev/openwrt/branches/attitude_adjustment/feeds/luci<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">make runuhttpd</span><br><span class="line">http://localhost:8080/cgi-bin/luci/webpanel/</span><br><span class="line">passwd：admin</span><br></pre></td></tr></table></figure></p>
<p>#luci-app-arduino-webpanel-1.5.6</p>
<p>#<a href="http://arduino.cc/download.php?f=/luci-app-arduino-webpanel-1.5.6.tar.bz2" target="_blank" rel="noopener">http://arduino.cc/download.php?f=/luci-app-arduino-webpanel-1.5.6.tar.bz2</a><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /home/router-dev/openwrt/branches/attitude_adjustment/package</span><br><span class="line">mkdir arduino</span><br><span class="line">touch Makefile</span><br></pre></td></tr></table></figure></p>
<p>复制以下内容<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Copyright (c) 2014 Arduino LLC. All right reserved.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># This is free software, licensed under the GNU General Public License v2.</span></span><br><span class="line"><span class="comment"># See /LICENSE for more information.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">include $(TOPDIR)/rules.mk</span><br><span class="line">PKG_NAME:=luci-app-arduino-webpanel</span><br><span class="line">PKG_VERSION:=1.5.6</span><br><span class="line">PKG_RELEASE:=1</span><br><span class="line">PKG_SOURCE:=$(PKG_NAME)-$(PKG_VERSION).tar.bz2</span><br><span class="line">PKG_SOURCE_URL:=http://arduino.cc/download.php?f=/</span><br><span class="line">PKG_MD5SUM:=fbcadb0b846db24302cd4e027bf3927e</span><br><span class="line">include $(INCLUDE_DIR)/package.mk</span><br><span class="line">define Package/luci-app-arduino-webpanel</span><br><span class="line">  SECTION:=luci</span><br><span class="line">  CATEGORY:=LuCI</span><br><span class="line">  SUBMENU:=3. Applications</span><br><span class="line">  TITLE:= simplified wifi configuration panel</span><br><span class="line">  DEPENDS:=+luci +luci-lib-json +uhttpd-mod-lua +yun-scripts</span><br><span class="line">endef</span><br><span class="line">define Package/luci-app-arduino-webpanel/description</span><br><span class="line">simplified wifi configuration panel</span><br><span class="line">endef</span><br><span class="line">define Build/Compile</span><br><span class="line"><span class="comment"># NOOP</span></span><br><span class="line">endef</span><br><span class="line">define Package/luci-app-arduino-webpanel/install</span><br><span class="line">$(INSTALL_DIR) $(1)/usr/lib/lua/luci/controller/arduino</span><br><span class="line">$(INSTALL_DIR) $(1)/usr/lib/lua/luci/view/arduino</span><br><span class="line">$(INSTALL_DIR) $(1)/www/luci-static/resources/arduino</span><br><span class="line">find $(PKG_BUILD_DIR)/usr/ -name <span class="string">'*.lua'</span> -<span class="built_in">exec</span> luac -s -o &#123;&#125; &#123;&#125; \;</span><br><span class="line">$(CP) $(PKG_BUILD_DIR)/usr/* $(1)/usr/</span><br><span class="line">$(CP) $(PKG_BUILD_DIR)/www/* $(1)/www/</span><br><span class="line">endef</span><br><span class="line">$(<span class="built_in">eval</span> $(call BuildPackage,luci-app-arduino-webpanel))</span><br></pre></td></tr></table></figure></p>
<p>make menuconfig<br>git clone <a href="https://github.com/arduino/openwrt-yun.git" target="_blank" rel="noopener">https://github.com/arduino/openwrt-yun.git</a></p>
<h1 id="2015-07-22-zigbeegw-luci"><a href="#2015-07-22-zigbeegw-luci" class="headerlink" title="2015-07-22 zigbeegw-luci"></a>2015-07-22 zigbeegw-luci</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># zigbeegw-luci</span></span><br><span class="line"><span class="built_in">cd</span> /home/router-dev/openwrt/branches/attitude_adjustment/package</span><br><span class="line">svn co https://github.com/paradislover/zigbeegw-luci/trunk zigbeegw</span><br><span class="line">make menuconfig</span><br><span class="line">LuCI ---&gt;</span><br><span class="line">    3.Applications ---&gt;</span><br><span class="line">&lt;*&gt; luci-app-zigbeegw ................ LuCI Support <span class="keyword">for</span> zigbeegw</span><br><span class="line">Kernel modules ---&gt;</span><br><span class="line">    USB Support ---&gt;</span><br><span class="line">&lt;*&gt; kmod-usb-acm</span><br><span class="line">&lt;*&gt; kmod-usb-serial</span><br><span class="line">&lt;*&gt;   kmod-usb-cp210x</span><br><span class="line">&lt;*&gt;   kmod-usb-pl2303</span><br><span class="line">make package/zigbee/clean</span><br><span class="line">make package/zigbee/compile</span><br><span class="line">make package/zibgee/install</span><br></pre></td></tr></table></figure>
<h2 id="2015-07-10-13-16-21-OpenWRT下远程调试"><a href="#2015-07-10-13-16-21-OpenWRT下远程调试" class="headerlink" title="2015-07-10,13,16,21 OpenWRT下远程调试"></a>2015-07-10,13,16,21 OpenWRT下远程调试</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#### OpenWRT下远程调试 attitude_adjustment WR703N</span></span><br><span class="line">``` bash</span><br><span class="line">svn co svn://svn.openwrt.org/openwrt/branches/attitude_adjustment</span><br></pre></td></tr></table></figure>
<p>#<a href="http://blog.csdn.net/piggy1924/article/details/8557350" target="_blank" rel="noopener">http://blog.csdn.net/piggy1924/article/details/8557350</a></p>
<p>#<a href="http://wenku.baidu.com/link?url=evvS3AjpZeFeKQYHPw7_80UctmoG0uVmNqKpZO-PDRwRw8jOydDBVkFeOpCpukEhyKwcVPpoVFR-byD1VeNfzpSYpIsn_thKC_mudbA5xzO" target="_blank" rel="noopener">http://wenku.baidu.com/link?url=evvS3AjpZeFeKQYHPw7_80UctmoG0uVmNqKpZO-PDRwRw8jOydDBVkFeOpCpukEhyKwcVPpoVFR-byD1VeNfzpSYpIsn_thKC_mudbA5xzO</a><br>配置编译OpenWRT<br>复制 feeds.conf.default 为 feeds.conf<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~$ cp feeds.conf.default feeds.conf</span><br></pre></td></tr></table></figure></p>
<p>将feeds.conf中<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">src-svn xwrt http://x-wrt.googlecode.com/svn/trunk/package</span><br><span class="line">src-svn luci http://svn.luci.subsignal.org/luci/branches/luci-0.11/contrib/package</span><br></pre></td></tr></table></figure></p>
<p>注释为<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#src-svn xwrt http://x-wrt.googlecode.com/svn/trunk/package</span></span><br><span class="line"><span class="comment">#src-svn luci http://svn.luci.subsignal.org/luci/branches/luci-0.11/contrib/package</span></span><br></pre></td></tr></table></figure></p>
<p>并增加<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">src-git luci https://github.com/openwrt/luci.git;luci-0.11</span><br></pre></td></tr></table></figure></p>
<p>诸如此类源码,你得定期更新Feeds。 通过如上相同的命令:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">~$ ./scripts/feeds update -a</span><br><span class="line">~$ ./scripts/feeds install -a</span><br><span class="line">~$ make menuconfig</span><br></pre></td></tr></table></figure></p>
<p>选择<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">?6?1 [*] Build the OpenWrt SDK</span><br><span class="line">?6?1 [*] Build the OpenWrt based Toolchain</span><br><span class="line">?6?1 [*] Advanced configuration options (fordevelopers)</span><br><span class="line">      -&gt; [*] Toolchain Options</span><br><span class="line">   -&gt; [*]Build/install c++ compiler and libstdc++” (<span class="keyword">if</span> C++ is required)</span><br><span class="line">-&gt; [*]Build gdb</span><br><span class="line">Base System –&gt; &lt;*&gt; dropbear        </span><br><span class="line">           　–&gt; &lt;*&gt; libstdcpp</span><br><span class="line">Network –&gt; file trasfer</span><br><span class="line">        &lt;*&gt; vsftpd</span><br><span class="line">–&gt; SSH</span><br><span class="line">        &lt;*&gt; openssh-sftp-server</span><br><span class="line">Utilities –&gt; // 这两个选项会导致wr703n固件编译不出</span><br><span class="line">&lt;*&gt; gdb</span><br><span class="line">&lt;*&gt; gdbserver</span><br></pre></td></tr></table></figure></p>
<p><a href="https://dev.openwrt.org/ticket/18331" target="_blank" rel="noopener">https://dev.openwrt.org/ticket/18331</a><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ tar -xjf OpenWrt-ImageBuilder-ar71xx_generic-for-linux-i686.tar.bz2</span><br><span class="line">$ <span class="built_in">cd</span> OpenWrt-ImageBuilder-ar71xx_generic-for-linux-i686/</span><br><span class="line">$ make info | grep 703</span><br><span class="line">TLWR703:</span><br><span class="line">TP-LINK TL-WR703N</span><br><span class="line">$ make image PROFILE=TLWR703</span><br><span class="line">[...]</span><br><span class="line">$ ls -l bin/ar71xx/</span><br><span class="line">make image PROFILE=TLWR703 PACKAGES=<span class="string">"luci luci-i18n-chinese libstdcpp vsftpd openssh-sftp-server gdb gdbserver"</span></span><br></pre></td></tr></table></figure></p>
<h2 id="2015-07-09-OpenWRT下远程调试"><a href="#2015-07-09-OpenWRT下远程调试" class="headerlink" title="2015-07-09 OpenWRT下远程调试"></a>2015-07-09 OpenWRT下远程调试</h2><h4 id="OpenWRT下远程调试-attitude-adjustment-WR703N"><a href="#OpenWRT下远程调试-attitude-adjustment-WR703N" class="headerlink" title="OpenWRT下远程调试 attitude_adjustment WR703N"></a>OpenWRT下远程调试 attitude_adjustment WR703N</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">svn co svn://svn.openwrt.org/openwrt/branches/attitude_adjustment</span><br></pre></td></tr></table></figure>
<p>#<a href="http://blog.csdn.net/piggy1924/article/details/8557350" target="_blank" rel="noopener">http://blog.csdn.net/piggy1924/article/details/8557350</a></p>
<p>#<a href="http://wenku.baidu.com/link?url=evvS3AjpZeFeKQYHPw7_80UctmoG0uVmNqKpZO-PDRwRw8jOydDBVkFeOpCpukEhyKwcVPpoVFR-byD1VeNfzpSYpIsn_thKC_mudbA5xzO" target="_blank" rel="noopener">http://wenku.baidu.com/link?url=evvS3AjpZeFeKQYHPw7_80UctmoG0uVmNqKpZO-PDRwRw8jOydDBVkFeOpCpukEhyKwcVPpoVFR-byD1VeNfzpSYpIsn_thKC_mudbA5xzO</a><br>配置编译OpenWRT<br>复制 feeds.conf.default 为 feeds.conf<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~$ cp feeds.conf.default feeds.conf</span><br></pre></td></tr></table></figure></p>
<p>将feeds.conf中<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">src-svn xwrt http://x-wrt.googlecode.com/svn/trunk/package</span><br></pre></td></tr></table></figure></p>
<p>注释为<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#src-svn xwrt http://x-wrt.googlecode.com/svn/trunk/package</span></span><br></pre></td></tr></table></figure></p>
<p>并增加<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">src-git luci https://github.com/openwrt/luci.git;luci-0.11</span><br></pre></td></tr></table></figure></p>
<p>诸如此类源码,你得定期更新Feeds。 通过如上相同的命令:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">~$ ./scripts/feeds update -a</span><br><span class="line">~$ ./scripts/feeds install -a</span><br><span class="line">~$ make defconfig</span><br><span class="line">~$ make menuconfig</span><br></pre></td></tr></table></figure></p>
<p>选择<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">?6?1 [*] Build the OpenWrt SDK</span><br><span class="line">?6?1 [*] Build the OpenWrt based Toolchain</span><br><span class="line">?6?1 [*] Advanced configuration options (fordevelopers)</span><br><span class="line">      -&gt; [*] Toolchain Options</span><br><span class="line">   -&gt; [*]Build/install c++ compiler and libstdc++” (<span class="keyword">if</span> C++ is required)</span><br><span class="line">-&gt; [*]Build with debug information</span><br><span class="line">-&gt; [*]Build gdb</span><br><span class="line">Base System –&gt; &lt;*&gt; dropbear        </span><br><span class="line">           　–&gt; &lt;*&gt; libstdcpp</span><br><span class="line">Network –&gt; file trasfer</span><br><span class="line">        &lt;*&gt; vsftpd</span><br><span class="line">–&gt; SSH</span><br><span class="line">        &lt;*&gt; openssh-sftp-server</span><br><span class="line">Utilities –&gt; &lt;*&gt; gdbserver</span><br></pre></td></tr></table></figure></p>
<p>结论：　未完全成功！！！</p>
<h2 id="2015-07-08-OpenWRT下远程调试-7620n"><a href="#2015-07-08-OpenWRT下远程调试-7620n" class="headerlink" title="2015-07-08 OpenWRT下远程调试 7620n"></a>2015-07-08 OpenWRT下远程调试 7620n</h2><h4 id="OpenWRT下远程调试-barrier-breaker-7620n"><a href="#OpenWRT下远程调试-barrier-breaker-7620n" class="headerlink" title="OpenWRT下远程调试 barrier_breaker 7620n"></a>OpenWRT下远程调试 barrier_breaker 7620n</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">svn co svn://svn.openwrt.org/openwrt/branches/barrier_breaker</span><br></pre></td></tr></table></figure>
<p>#<a href="http://blog.csdn.net/piggy1924/article/details/8557350" target="_blank" rel="noopener">http://blog.csdn.net/piggy1924/article/details/8557350</a></p>
<p>#<a href="http://wenku.baidu.com/link?url=evvS3AjpZeFeKQYHPw7_80UctmoG0uVmNqKpZO-PDRwRw8jOydDBVkFeOpCpukEhyKwcVPpoVFR-byD1VeNfzpSYpIsn_thKC_mudbA5xzO" target="_blank" rel="noopener">http://wenku.baidu.com/link?url=evvS3AjpZeFeKQYHPw7_80UctmoG0uVmNqKpZO-PDRwRw8jOydDBVkFeOpCpukEhyKwcVPpoVFR-byD1VeNfzpSYpIsn_thKC_mudbA5xzO</a><br>配置编译OpenWRT<br>复制 feeds.conf.default 为 feeds.conf<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~$ cp feeds.conf.default feeds.conf</span><br></pre></td></tr></table></figure></p>
<p>将feeds.conf中<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">src-svn xwrt http://x-wrt.googlecode.com/svn/trunk/package</span><br></pre></td></tr></table></figure></p>
<p>注释为<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#src-svn xwrt http://x-wrt.googlecode.com/svn/trunk/package</span></span><br></pre></td></tr></table></figure></p>
<p>诸如此类源码,你得定期更新Feeds。 通过如上相同的命令:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">~$ ./scripts/feeds update -a</span><br><span class="line">~$ ./scripts/feeds install -a</span><br><span class="line">~$ make defconfig</span><br><span class="line">~$ make menuconfig</span><br></pre></td></tr></table></figure></p>
<p>选择<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">?6?1 [*] Build the OpenWrt SDK</span><br><span class="line">?6?1 [*] Build the OpenWrt based Toolchain</span><br><span class="line">?6?1 [*] Advanced configuration options (fordevelopers)</span><br><span class="line">   -&gt; [*] Toolchain Options</span><br><span class="line">       -&gt; [*]Build/install fortran compiler</span><br><span class="line">   //  -&gt; [*]Build with debug information</span><br><span class="line">       -&gt; [*]Build gdb</span><br><span class="line">   //→ “gdb”</span><br><span class="line">   //→ “Build/install c++ compiler and libstdc++” (<span class="keyword">if</span> C++ is required)</span><br><span class="line">启动以下五项</span><br><span class="line">// Global build setting –&gt; Preferred standard C++ library -&gt; libstdc++</span><br><span class="line">Base System –&gt; &lt;*&gt; dropbear</span><br><span class="line">            –&gt; &lt;*&gt; libstdcpp</span><br><span class="line">Development –&gt; &lt;*&gt; gdb</span><br><span class="line">               &lt;*&gt; gdbserver</span><br><span class="line">network –&gt; file trasfer</span><br><span class="line">        &lt;*&gt; vsftpd</span><br><span class="line">–&gt; SSH</span><br><span class="line">        &lt;*&gt; openssh-sftp-server</span><br><span class="line"></span><br><span class="line">~$ make V=s</span><br></pre></td></tr></table></figure></p>
<p>结论：　未完全成功！！！</p>
<h2 id="2015-07-07-helloworld"><a href="#2015-07-07-helloworld" class="headerlink" title="2015-07-07 helloworld"></a>2015-07-07 helloworld</h2><p>####　内置　helloworld<br>a).在package目录下创建helloworld目录<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">~$ <span class="built_in">cd</span> package</span><br><span class="line">~$ mkdir helloworld</span><br><span class="line">~$ <span class="built_in">cd</span> helloworld</span><br></pre></td></tr></table></figure></p>
<p>b).建立Makefile<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">~$ touch Makefile</span><br><span class="line">~$ vim Makefile</span><br></pre></td></tr></table></figure></p>
<p>Makefile文件模板内容如下：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##############################################</span></span><br><span class="line"><span class="comment"># OpenWrt Makefile for helloworld program</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Most of the variables used here are defined in</span></span><br><span class="line"><span class="comment"># the include directives below. We just need to</span></span><br><span class="line"><span class="comment"># specify a basic description of the package,</span></span><br><span class="line"><span class="comment"># where to build our program, where to find</span></span><br><span class="line"><span class="comment"># the source files, and where to install the</span></span><br><span class="line"><span class="comment"># compiled program on the router.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Be very careful of spacing in this file.</span></span><br><span class="line"><span class="comment"># Indents should be tabs, not spaces, and</span></span><br><span class="line"><span class="comment"># there should be no trailing whitespace in</span></span><br><span class="line"><span class="comment"># lines that are not commented.</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">##############################################</span></span><br><span class="line">include $(TOPDIR)/rules.mk</span><br><span class="line"><span class="comment"># Name and release number of this package</span></span><br><span class="line">PKG_NAME:=helloworld.qq.com/</span><br><span class="line">PKG_RELEASE:=1</span><br><span class="line"><span class="comment"># This specifies the directory where we're going to build the program.</span></span><br><span class="line"><span class="comment"># The root build directory, $(BUILD_DIR), is by default the build_mipsel</span></span><br><span class="line"><span class="comment"># directory in your OpenWrt SDK directory</span></span><br><span class="line">PKG_BUILD_DIR := $(BUILD_DIR)/$(PKG_NAME)</span><br><span class="line">include $(INCLUDE_DIR)/package.mk</span><br><span class="line"><span class="comment"># Specify package information for this program.</span></span><br><span class="line"><span class="comment"># The variables defined here should be self explanatory.</span></span><br><span class="line"><span class="comment"># If you are running Kamikaze, delete the DESCRIPTION</span></span><br><span class="line"><span class="comment"># variable below and uncomment the Kamikaze define</span></span><br><span class="line"><span class="comment"># directive for the description below</span></span><br><span class="line">define Package/helloworld</span><br><span class="line">SECTION:=utils</span><br><span class="line">CATEGORY:=Utilities</span><br><span class="line">TITLE:=Helloworld -- prints a <span class="built_in">test</span> message</span><br><span class="line">endef</span><br><span class="line"><span class="comment"># Uncomment portion below for Kamikaze and delete DESCRIPTION variable above</span></span><br><span class="line">define Package/helloworld/description</span><br><span class="line">        If you can<span class="string">'t figure out what this program does, you'</span>re probably</span><br><span class="line">        brain-dead and need immediate medical attention.</span><br><span class="line">endef</span><br><span class="line"><span class="comment"># Specify what needs to be done to prepare for building the package.</span></span><br><span class="line"><span class="comment"># In our case, we need to copy the source files to the build directory.</span></span><br><span class="line"><span class="comment"># This is NOT the default.  The default uses the PKG_SOURCE_URL and the</span></span><br><span class="line"><span class="comment"># PKG_SOURCE which is not defined here to download the source from the web.</span></span><br><span class="line"><span class="comment"># In order to just build a simple program that we have just written, it is</span></span><br><span class="line"><span class="comment"># much easier to do it this way.</span></span><br><span class="line">define Build/Prepare</span><br><span class="line">mkdir -p $(PKG_BUILD_DIR)</span><br><span class="line">$(CP) ./src/* $(PKG_BUILD_DIR)/</span><br><span class="line">endef</span><br><span class="line"><span class="comment"># We do not need to define Build/Configure or Build/Compile directives</span></span><br><span class="line"><span class="comment"># The defaults are appropriate for compiling a simple program such as this one</span></span><br><span class="line"><span class="comment"># Specify where and how to install the program. Since we only have one file,</span></span><br><span class="line"><span class="comment"># the helloworld executable, install it by copying it to the /bin directory on</span></span><br><span class="line"><span class="comment"># the router. The $(1) variable represents the root directory on the router running</span></span><br><span class="line"><span class="comment"># OpenWrt. The $(INSTALL_DIR) variable contains a command to prepare the install</span></span><br><span class="line"><span class="comment"># directory if it does not already exist.  Likewise $(INSTALL_BIN) contains the</span></span><br><span class="line"><span class="comment"># command to copy the binary file from its current location (in our case the build</span></span><br><span class="line"><span class="comment"># directory) to the install directory.</span></span><br><span class="line">define Package/helloworld/install</span><br><span class="line">$(INSTALL_DIR) $(1)/bin</span><br><span class="line">$(INSTALL_BIN) $(PKG_BUILD_DIR)/helloworld $(1)/bin/</span><br><span class="line">endef</span><br><span class="line"><span class="comment"># This line executes the necessary commands to compile our program.</span></span><br><span class="line"><span class="comment"># The above define directives specify all the information needed, but this</span></span><br><span class="line"><span class="comment"># line calls BuildPackage which in turn actually uses this information to</span></span><br><span class="line"><span class="comment"># build a package.</span></span><br><span class="line">$(<span class="built_in">eval</span> $(call BuildPackage,helloworld))</span><br></pre></td></tr></table></figure></p>
<p>c).创建src目录，并编写helloworld程序<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">~$ mkdir src</span><br><span class="line">~$ <span class="built_in">cd</span> src</span><br></pre></td></tr></table></figure></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/****************</span></span><br><span class="line"><span class="comment">* Helloworld.c</span></span><br><span class="line"><span class="comment">*****************/</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">void</span>)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">	<span class="built_in">printf</span>(<span class="string">"hello world! \n\n"</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>编写Makefile文件<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># build helloworld executable when user executes "make"</span></span><br><span class="line">helloworld: helloworld.o</span><br><span class="line">$(CC) $(LDFLAGS) helloworld.o -o helloworld</span><br><span class="line">helloworld.o: helloworld.c</span><br><span class="line">$(CC) $(CFLAGS) -c helloworld.c</span><br><span class="line"><span class="comment"># remove object files and executable when user executes "make clean"</span></span><br><span class="line">clean:</span><br><span class="line">rm *.o helloworld</span><br><span class="line">在这两个文件的目录下，执行make 应该可以生成helloworld的可执行文件。执行helloworld后，能够打印出“hello world!”。 这一步，主要保证我们的源程序是可以正常编译的。</span><br><span class="line">d).编译</span><br><span class="line">~$ make menuconfig</span><br><span class="line">?6?1 Utilities -&gt; Toolchain Options</span><br><span class="line">→ (*) helloworld</span><br><span class="line">~$ make V=s</span><br></pre></td></tr></table></figure></p>
<h2 id="2015-07-06-OpenWRT-Build"><a href="#2015-07-06-OpenWRT-Build" class="headerlink" title="2015-07-06 OpenWRT Build"></a>2015-07-06 OpenWRT Build</h2><p>####　1.下载OpenWRT源码包：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~$ svn checkout svn://svn.openwrt.org/openwrt/trunk</span><br></pre></td></tr></table></figure></p>
<p>进入源码文件夹：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~$ <span class="built_in">cd</span> trunk</span><br></pre></td></tr></table></figure></p>
<p>复制 feeds.conf.default 为 feeds.conf<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~$ cp feeds.conf.default feeds.conf</span><br></pre></td></tr></table></figure></p>
<p>将feeds.conf中<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">src-git luci https://github.com/openwrt/luci.git</span><br></pre></td></tr></table></figure></p>
<p>替换为<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">src-git luci https://github.com/openwrt/luci.git;luci-0.12</span><br></pre></td></tr></table></figure></p>
<p>诸如此类源码,你得定期更新Feeds。 通过如上相同的命令:<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">~$ ./scripts/feeds update -a</span><br><span class="line">~$ ./scripts/feeds install -a</span><br></pre></td></tr></table></figure></p>
<p>下一步是检查编译环境，若可进行编译则生成默认配置：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~$ make defconfig</span><br></pre></td></tr></table></figure></p>
<p>menuconfig是一个基于文本的工具，它处理选择的目标（需要还是不需要）、编译生成软件包（openwrt下是IPKG格式）以及内核选项（编译成模块还是内核）等等<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~$ make menuconfig</span><br></pre></td></tr></table></figure></p>
<h4 id="2-增加profile"><a href="#2-增加profile" class="headerlink" title="2. 增加profile"></a>2. 增加profile</h4><p>$ 在../target/linux/ramips/mt7620/profiles 目录增加 wrtnode.mk<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># Copyright (C) 2015 OpenWrt.org</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># This is free software, licensed under the GNU General Public License v2.</span></span><br><span class="line"><span class="comment"># See /LICENSE for more information.</span></span><br><span class="line"><span class="comment"># add by : cuiqingwei</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line">define Profile/WRTNODE</span><br><span class="line"> NAME:=Wrtnode</span><br><span class="line"> PACKAGES:=\</span><br><span class="line">kmod-usb-core kmod-usb-dwc2 kmod-usb2 kmod-usb-ohci \</span><br><span class="line">kmod-mt76</span><br><span class="line">endef</span><br><span class="line">define Profile/WRTNODE/Description</span><br><span class="line"> Support <span class="keyword">for</span> WRTnode Board</span><br><span class="line">endef</span><br><span class="line">$(<span class="built_in">eval</span> $(call Profile,WRTNODE))</span><br></pre></td></tr></table></figure></p>
<p>特别提醒：<br>a).profile文件的格式一定要书写正确。特别是 “\”反斜杠后面，千万不能有空格，否则会导致mt7620a整个subtarget都消失不见。<br>b).注意package之间的依赖关系，如kmod-ac97 kmod-sound-soc-core kmod-sound-mt7620都依赖于kmod-sound-core，那么就应该按照先后顺序依次写出，同样的道理：kmod-ac97 kmod-sound-soc-core应该出现在kmod-sound-mt7620前面。<br>c).必须删除tmp目录，才能让添加的profile生效。<br>最后，就可以在make menuconfig中看到你想要的东西啦。</p>
<h4 id="3-更改kernel-console打印波特率"><a href="#3-更改kernel-console打印波特率" class="headerlink" title="3.更改kernel console打印波特率"></a>3.更改kernel console打印波特率</h4><p>在..target/linux/ramips/dts/WRTNODE.dts中添加<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">chosen &#123;</span><br><span class="line">bootargs = <span class="string">"console=ttyS0,115200"</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<hr>
<h1 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h1><h3 id="常用命令-1"><a href="#常用命令-1" class="headerlink" title="常用命令"></a>常用命令</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">make clean[清楚bin 目录]</span><br><span class="line">make dirclean[make clean]+[清除交叉编译工具及工具链目录]</span><br><span class="line">make distclean[清除所有相关的东西，包括下载的软件包，配置文件，feed内容等]</span><br></pre></td></tr></table></figure>
<h3 id="装-Luci-web-UI"><a href="#装-Luci-web-UI" class="headerlink" title="装 Luci web UI :"></a>装 Luci web UI :</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./scripts/feeds update packages luci</span><br><span class="line">./scripts/feeds install -a -p luci</span><br></pre></td></tr></table></figure>
<h3 id="tftp更新固件"><a href="#tftp更新固件" class="headerlink" title="tftp更新固件"></a>tftp更新固件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">tftp 0x80000000 wr703n-f.bin</span><br><span class="line">tftp 0x80000000 openwrt-ar71xx-generic-tl-wr703n-v1-squashfs-factory.bin</span><br><span class="line">erase 0x9f020000 +0x3c0000</span><br><span class="line">cp.b 0x80000000 0x9f020000 0x3c0000</span><br><span class="line">bootm 0x9f020000</span><br></pre></td></tr></table></figure>
<h3 id="scp至路由器更新固件"><a href="#scp至路由器更新固件" class="headerlink" title="scp至路由器更新固件"></a>scp至路由器更新固件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">scp bin/ar71xx/openwrt-ar71xx-generic-tl-wr703n-v1-squashfs-factory.bin root@192.168.199.175:/tmp/</span><br><span class="line">mtd -r write openwrt-ar71xx-generic-tl-wr703n-v1-squashfs-factory.bin firmware</span><br><span class="line">scp zbGateway.bin root@192.168.199.175:/tmp/</span><br></pre></td></tr></table></figure>
<h3 id="Network-testing-with-iperf"><a href="#Network-testing-with-iperf" class="headerlink" title="Network-testing with iperf"></a>Network-testing with iperf</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ping -c 5 192.168.199.175</span><br><span class="line">netcat -u -l -p 2000 &gt; /dev/null</span><br><span class="line">nc -u -l -p 2000 &gt; /dev/null</span><br><span class="line">dd <span class="keyword">if</span>=/dev/zero bs=1M count=100 | pv -brt | netcat -u 192.168.199.175 2000</span><br></pre></td></tr></table></figure>
<h3 id="TCP"><a href="#TCP" class="headerlink" title="TCP"></a>TCP</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">iperf -s</span><br><span class="line">iperf -c 192.168.199.175</span><br></pre></td></tr></table></figure>
<h3 id="UDP"><a href="#UDP" class="headerlink" title="UDP"></a>UDP</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">iperf -s -u</span><br><span class="line">iperf -c 192.168.199.175 -u</span><br><span class="line">scp root@192.168.199.175:/etc/opkg.conf /home/router-dev/</span><br><span class="line">scp /home/router-dev/opkg.conf root@192.168.199.175:/etc/</span><br><span class="line">scp openwrt-helloworld root@192.168.199.175:/usr/</span><br><span class="line">root@OpenWrt:/<span class="comment"># gdbserver 192.168.199.175:10000 /usr/openwrt-helloworld</span></span><br></pre></td></tr></table></figure>
<h3 id="eclipse调试-没有成功"><a href="#eclipse调试-没有成功" class="headerlink" title="eclipse调试[没有成功]"></a>eclipse调试[没有成功]</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">/home/router-dev/openwrt/branches/attitude_adjustment/staging_dir</span><br><span class="line">mips-openwrt-linux-</span><br><span class="line">/home/router-dev/openwrt/branches/attitude_adjustment/staging_dir/toolchain-mips_r2_gcc-4.6-linaro_uClibc-0.9.33.2/bin</span><br><span class="line">/home/router-dev/openwrt/branches/attitude_adjustment/build_dir/toolchain-mips_r2_gcc-4.6-linaro_uClibc-0.9.33.2/gdb-linaro-7.2-2011.03-0/gdb/gdb</span><br><span class="line">/home/router-dev/openwrt/branches/barrier_breaker/staging_dir</span><br><span class="line">mipsel-openwrt-linux-</span><br><span class="line">/home/router-dev/openwrt/branches/barrier_breaker/staging_dir/toolchain-mipsel_24kec+dsp_gcc-4.8-linaro_uClibc-0.9.33.2/bin</span><br><span class="line">/home/router-dev/openwrt/branches/barrier_breaker/build_dir/toolchain-mipsel_24kec+dsp_gcc-4.8-linaro_uClibc-0.9.33.2/gdb-linaro-7.6-2013.05/gdb/gdb</span><br></pre></td></tr></table></figure>
<p>############################################################<br>??? 问题<br>mipsel-openwrt-linux-g++: warning: environment variable ‘STAGING_DIR’ not defined<br>!!! 解决<br>eclipse菜单Window-&gt;Preferences-&gt;C/C++-&gt;Environmentz增加<br>STAGING_DIR　<br>/home/router-dev/openwrt/trunk-dev/staging_dir<br><a href="http://downloads.openwrt.org/attitude_adjustment/12.09/ar71xx/generic/packages/" target="_blank" rel="noopener">http://downloads.openwrt.org/attitude_adjustment/12.09/ar71xx/generic/packages/</a><br>//////////////////////////////////////////////////////////////////////////////////////<br>//////////////////////////////////////////////////////////////////////////////////////<br>将vsftpd编译进openwrt的固件中去</p>
<h1 id="http-chaochaoblog-com-archives-1007"><a href="#http-chaochaoblog-com-archives-1007" class="headerlink" title="http://chaochaoblog.com/archives/1007"></a><a href="http://chaochaoblog.com/archives/1007" target="_blank" rel="noopener">http://chaochaoblog.com/archives/1007</a></h1><p>首先进去我们已经下载好了源码的目录，如backfire或者其它分支的。然后利用feeds来下载安装vsftpd<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">~$ ./scripts/feeds update</span><br><span class="line">~$ ./scripts/feeds install -d m vsftpd</span><br></pre></td></tr></table></figure></p>
<p>之后你可以到目录/feeds/package/net/下看了，就会发现我们的vsftpd这个源码包都下载下来了。<br>之后回根目录，输入<br>~$ make menuconfig<br>在network –&gt; file trasfer下就可以找到vsftpd了，果断按下y选择编译进固件，当然你也可以选择m那么就只会编译出ipk文件来了。<br>~$ make V=s 编译出bin的固件镜像文件来，刷入flash，然后ssh之后ps查看进程<br>OpenWrt开启sftp，方便传输文件。修改opkg.conf文件</p>
<p>#<a href="http://see.sl088.com/wiki/Openwrt_opkg%E6%BA%90%E8%AE%BE%E7%BD%AE" target="_blank" rel="noopener">http://see.sl088.com/wiki/Openwrt_opkg%E6%BA%90%E8%AE%BE%E7%BD%AE</a><br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">root@OpenWrt:~<span class="comment"># vi /etc/opkg.conf</span></span><br></pre></td></tr></table></figure></p>
<p>为<br>option overlay_root /overlay<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># src/gz chaos_calmer_base http://downloads.openwrt.org/snapshots/trunk/ramips/mt7620/packages/base</span></span><br><span class="line"><span class="comment"># src/gz chaos_calmer_luci http://downloads.openwrt.org/snapshots/trunk/ramips/mt7620/packages/luci</span></span><br><span class="line">src/gz chaos_calmer_packages http://downloads.openwrt.org/chaos_calmer/15.05-rc2/ramips/mt7620/packages/packages</span><br><span class="line"><span class="comment"># option check_signature 1</span></span><br></pre></td></tr></table></figure></p>
<p>主要去掉签名check,增加<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">src/gz chaos_calmer_packages http://downloads.openwrt.org/chaos_calmer/15.05-rc2/ramips/mt7620/packages/packages</span><br><span class="line">root@OpenWrt:~<span class="comment"># opkg update</span></span><br><span class="line">root@OpenWrt:~<span class="comment"># opkg install vsftpd openssh-sftp-server</span></span><br><span class="line">root@OpenWrt:~<span class="comment"># /etc/init.d/vsftpd enable</span></span><br><span class="line">root@OpenWrt:~<span class="comment"># /etc/init.d/vsftpd start</span></span><br><span class="line">.....................</span><br></pre></td></tr></table></figure></p>
<p>#<a href="http://www.cnblogs.com/peteryj/archive/2011/08/23/2151216.html" target="_blank" rel="noopener">http://www.cnblogs.com/peteryj/archive/2011/08/23/2151216.html</a><br>a).建立调试环境<br>配置编译OpenWRT<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make menuconfig</span><br></pre></td></tr></table></figure></p>
<p>启动以下两项<br>Advanced configuration options (for developers) –&gt; Toolchain options –&gt; Build gdb<br>Development –&gt; gdbserver<br>b).编译<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make V=99，如果已经编译过，则make toolchain/install 编译下gdb即可</span><br></pre></td></tr></table></figure></p>
<p>c).编译待调试程序<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make menuconfig</span><br></pre></td></tr></table></figure></p>
<p>启动Advanced configuration options (for developers) –&gt; Build options –&gt; Enable debugging<br>编译程序<br>以snmpd为例 ，使用make package/net-snmp/compile去编译程序，生成带调试信息的snmpd，作为宿主机调试使用。<br>以上就是准备工作。下面简单介绍一下调试过程。<br>d).调试程序<br>启动目标机上的待调试程序<br>首先加载并启动编译好的OpenWRT系统，然后<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gdbserver &lt;local_IP&gt;:&lt;port&gt; &lt;program&gt; &lt;args&gt;</span><br></pre></td></tr></table></figure></p>
<p>启动宿主机gdb<br>(这里要修复一个bug，方法是：cd <openwrtdir>/staging<em>dir/<targetarch>; rmdir lib; ln -s ../toolchain-<targetarch></targetarch></targetarch></em><gccver>/lib lib)。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> &lt;openwrtdir&gt;/build_dir/toolchain-&lt;targetarch&gt;_&lt;gccver&gt;/gdb-6.3/gdb</span><br></pre></td></tr></table></figure></gccver></openwrtdir></p>
<p>./gdb– 启动<br>设置gdb，并启动调试程序<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">set</span> solib-absolute-prefix &lt;openwrtdir&gt;/staging_dir/&lt;targetarch&gt;</span><br><span class="line">file &lt;openwrtdir&gt;/build_dir/&lt;targetarch&gt;/&lt;path&gt;/&lt;executable&gt;</span><br></pre></td></tr></table></figure></p>
<p>连接目标机：target remote <ip>:<port><br>连接成功之后，就可以按正常的gdb调试流程进行调试了。</port></ip></p>

      
    </div>
    
  </div>
  
    
    <div class="copyright">
        <p><span>本文标题:</span><a href="/2015/07/08/2015-07-08-OpenWRT折腾日记/">OpenWRT折腾日记</a></p>
        <p><span>文章作者:</span><a href="/" title="回到主页">cuiqingwei</a></p>
        <p><span>发布时间:</span>2015-07-08, 18:00:00</p>
        <p><span>最后更新:</span>2018-03-08, 23:04:54</p>
        <p>
            <span>原始链接:</span><a class="post-url" href="/2015/07/08/2015-07-08-OpenWRT折腾日记/" title="OpenWRT折腾日记">http://cuiqingwei.github.io/2015/07/08/2015-07-08-OpenWRT折腾日记/</a>
            <span class="copy-path" data-clipboard-text="原文: http://cuiqingwei.github.io/2015/07/08/2015-07-08-OpenWRT折腾日记/　　作者: cuiqingwei" title="点击复制文章链接"><i class="fa fa-clipboard"></i></span>
            <script> var clipboard = new Clipboard('.copy-path'); </script>
        </p>
        <p>
            <span>许可协议:</span><i class="fa fa-creative-commons"></i> <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" title="CC BY-NC-SA 4.0 International" target="_blank">"署名-非商用-相同方式共享 4.0"</a> 转载请保留原文链接及作者。
        </p>
    </div>



    <nav id="article-nav">
        
            <div id="article-nav-newer" class="article-nav-title">
                <a href="/2015/07/09/2015-07-09-OpenWRT-usefull-commands/">
                    OpenWRT usefull commands
                </a>
            </div>
        
        
            <div id="article-nav-older" class="article-nav-title">
                <a href="/2015/07/07/2015-07-07-OpenWRT之dl下载分享/">
                    OpenWRT之dl下载分享
                </a>
            </div>
        
    </nav>

  
</article>

    <div id="toc" class="toc-article">
        <strong class="toc-title">文章目录</strong>
        
            <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#2016-04-23-Openwrt-Yun"><span class="toc-number">1.</span> <span class="toc-text">2016-04-23 Openwrt Yun</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#FEEDS"><span class="toc-number">1.0.1.</span> <span class="toc-text">FEEDS</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#CONFIG"><span class="toc-number">1.0.2.</span> <span class="toc-text">CONFIG</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#BUILDING"><span class="toc-number">1.0.3.</span> <span class="toc-text">BUILDING</span></a></li></ol></li></ol><li class="toc-item toc-level-2"><a class="toc-link" href="#2016-04-11-DraginoYun-Shield"><span class="toc-number">2.</span> <span class="toc-text">2016-04-11 DraginoYun Shield</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#更新package"><span class="toc-number">2.0.1.</span> <span class="toc-text">更新package</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#安装package"><span class="toc-number">2.0.2.</span> <span class="toc-text">安装package</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#单独编译package"><span class="toc-number">2.0.3.</span> <span class="toc-text">单独编译package</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2016-04-08-DraginoYun-Shield"><span class="toc-number">3.</span> <span class="toc-text">2016-04-08 DraginoYun Shield</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#断开packages-链接本地dragino-packages"><span class="toc-number">3.0.1.</span> <span class="toc-text">断开packages,链接本地dragino-packages</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#卸载package"><span class="toc-number">3.0.2.</span> <span class="toc-text">卸载package</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#更新package-1"><span class="toc-number">3.0.3.</span> <span class="toc-text">更新package</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#安装package-1"><span class="toc-number">3.0.4.</span> <span class="toc-text">安装package</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#单独编译package-1"><span class="toc-number">3.0.5.</span> <span class="toc-text">单独编译package</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#安装package-2"><span class="toc-number">3.0.6.</span> <span class="toc-text">安装package</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2016-04-05-ArduinoYun-Shield"><span class="toc-number">4.</span> <span class="toc-text">2016-04-05 ArduinoYun Shield</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#使用putty登陆openwrt输入"><span class="toc-number">4.0.1.</span> <span class="toc-text">使用putty登陆openwrt输入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#自动挂载（这样就不需要每次都执行上面的命令挂载SD卡了）"><span class="toc-number">4.0.2.</span> <span class="toc-text">自动挂载（这样就不需要每次都执行上面的命令挂载SD卡了）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#移到最下面，按i键（编辑模式）然后复制下面，右击到putty就自动粘贴上去了！"><span class="toc-number">4.0.3.</span> <span class="toc-text">移到最下面，按i键（编辑模式）然后复制下面，右击到putty就自动粘贴上去了！</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#安装一个时区信息软件包，否则系统无法识别时区。"><span class="toc-number">4.0.4.</span> <span class="toc-text">安装一个时区信息软件包，否则系统无法识别时区。</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#建立软连接，不然会找不到对应的库和配置文件："><span class="toc-number">4.0.5.</span> <span class="toc-text">建立软连接，不然会找不到对应的库和配置文件：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#安装到内存"><span class="toc-number">4.0.6.</span> <span class="toc-text">安装到内存</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#编辑php-ini，方法如下。"><span class="toc-number">4.0.7.</span> <span class="toc-text">编辑php.ini，方法如下。</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#找到下面的字段修改为如下，如果有用”-”注析的就删掉："><span class="toc-number">4.0.8.</span> <span class="toc-text">找到下面的字段修改为如下，如果有用”;”注析的就删掉：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#和上面一样，打开-etc-config-uhttpd"><span class="toc-number">4.0.9.</span> <span class="toc-text">和上面一样，打开/etc/config/uhttpd</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#然后重启uhttpd（在putty里输入命令回车）："><span class="toc-number">4.0.10.</span> <span class="toc-text">然后重启uhttpd（在putty里输入命令回车）：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#使用putty安装mysql"><span class="toc-number">4.0.11.</span> <span class="toc-text">使用putty安装mysql</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#创建数据库目录"><span class="toc-number">4.0.12.</span> <span class="toc-text">创建数据库目录</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查找到以下内容并修改如下："><span class="toc-number">4.0.13.</span> <span class="toc-text">查找到以下内容并修改如下：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#bind-address-192-168-1-1"><span class="toc-number">4.0.14.</span> <span class="toc-text">bind-address = 192.168.1.1</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#初始化建库"><span class="toc-number">4.0.15.</span> <span class="toc-text">初始化建库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#以关闭授权的方式启动mysql"><span class="toc-number">4.0.16.</span> <span class="toc-text">以关闭授权的方式启动mysql</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#进入mysql-修改账号连接权限"><span class="toc-number">4.0.17.</span> <span class="toc-text">进入mysql,修改账号连接权限</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#进入mysql以后出现mysql-gt-提示符，再修改账号连接权限："><span class="toc-number">4.0.18.</span> <span class="toc-text">进入mysql以后出现mysql&gt;提示符，再修改账号连接权限：</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#修改数据库密码为edutech"><span class="toc-number">4.0.19.</span> <span class="toc-text">修改数据库密码为edutech</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#刷新数据库"><span class="toc-number">4.0.20.</span> <span class="toc-text">刷新数据库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#上面ok了以后，退出mysql"><span class="toc-number">4.0.21.</span> <span class="toc-text">上面ok了以后，退出mysql</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#重启mysql，以授权验证方式启动（为了系统安全）"><span class="toc-number">4.0.22.</span> <span class="toc-text">重启mysql，以授权验证方式启动（为了系统安全）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#设定开机运行"><span class="toc-number">4.0.23.</span> <span class="toc-text">设定开机运行</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#启动MySQL服务"><span class="toc-number">4.0.24.</span> <span class="toc-text">启动MySQL服务</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#用Navicat新建数据库"><span class="toc-number">4.0.25.</span> <span class="toc-text">用Navicat新建数据库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#新建查询"><span class="toc-number">4.0.26.</span> <span class="toc-text">新建查询</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#安装python"><span class="toc-number">4.0.27.</span> <span class="toc-text">安装python</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2016-03-03-luci"><span class="toc-number">5.</span> <span class="toc-text">2016-03-03 luci</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2016-01-22-web摄像头、mjpg-streamer"><span class="toc-number">6.</span> <span class="toc-text">2016-01-22 web摄像头、mjpg-streamer</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2015-08-25-mtk-openwrt-sdk"><span class="toc-number">7.</span> <span class="toc-text">2015-08-25 mtk openwrt-sdk</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#for-mtksdk-openwrt-3-10-14-20141127-30965ec3-tar-bz2"><span class="toc-number">7.0.1.</span> <span class="toc-text">for mtksdk-openwrt-3.10.14-20141127-30965ec3.tar.bz2</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#改logo-MediaTek-gt-Edutech"><span class="toc-number">7.0.2.</span> <span class="toc-text">改logo MediaTek-&gt;Edutech</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#luci-改language"><span class="toc-number">7.0.3.</span> <span class="toc-text">luci 改language</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#mt7612e-sh-改SSID"><span class="toc-number">7.0.4.</span> <span class="toc-text">mt7612e.sh 改SSID</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#for-mtksdk-openwrt-3-10-14-20150311-d021c937-tar-bz2"><span class="toc-number">7.0.5.</span> <span class="toc-text">for mtksdk-openwrt-3.10.14-20150311-d021c937.tar.bz2</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#改logo-MediaTek-gt-Edutech-1"><span class="toc-number">7.0.6.</span> <span class="toc-text">改logo MediaTek-&gt;Edutech</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#luci-改language-1"><span class="toc-number">7.0.7.</span> <span class="toc-text">luci 改language</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#mt7620-sh-改SSID"><span class="toc-number">7.0.8.</span> <span class="toc-text">mt7620.sh 改SSID</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#mt7612e-sh-改SSID-1"><span class="toc-number">7.0.9.</span> <span class="toc-text">mt7612e.sh 改SSID</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#更新opkg-config源"><span class="toc-number">7.0.10.</span> <span class="toc-text">更新opkg.config源</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#版本号"><span class="toc-number">7.0.11.</span> <span class="toc-text">版本号</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#banner"><span class="toc-number">7.0.12.</span> <span class="toc-text">banner</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#profiles-和-固件名"><span class="toc-number">7.0.13.</span> <span class="toc-text">profiles 和　固件名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#add-by-cuiqingwei-at-20150828"><span class="toc-number">7.0.14.</span> <span class="toc-text">add by cuiqingwei at 20150828</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#去除有问题的iw"><span class="toc-number">7.0.15.</span> <span class="toc-text">去除有问题的iw</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2015-08-13-openwrt-yun"><span class="toc-number">8.</span> <span class="toc-text">2015-08-13 openwrt-yun</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2015-08-12-arduino-yun"><span class="toc-number">9.</span> <span class="toc-text">2015-08-12 arduino-yun</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#If-rng-tools-is-not-installable-then-install-it-by-hand-from-e-g-http-download-linino-org-linino-distro-linino-dev-latest-packages-rng-tools-3-2-ar71xx-ipk"><span class="toc-number">9.0.1.</span> <span class="toc-text">If rng-tools is not installable, then install it by hand from e.g., http://download.linino.org/linino_distro/linino_dev/latest/packages/rng-tools_3-2_ar71xx.ipk</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Edit-your-etc-opkg-conf-add"><span class="toc-number">9.0.2.</span> <span class="toc-text">Edit your /etc/opkg.conf, add</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Comment-out-your-earlier-src-gz"><span class="toc-number">9.0.3.</span> <span class="toc-text">Comment out your earlier src/gz</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Need-to-edit-in-order-to-change-to-correct-LED"><span class="toc-number">9.0.4.</span> <span class="toc-text">Need to edit in order to change to correct LED</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#In-etc-avahi-avahi-daemon-conf-edit"><span class="toc-number">9.0.5.</span> <span class="toc-text">In /etc/avahi/avahi-daemon.conf edit</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#NEED-TO-GENERATE-A-GPG-KEY-–-WHY"><span class="toc-number">9.0.6.</span> <span class="toc-text">NEED TO GENERATE A GPG KEY – WHY???</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Works-only-if-rngd-is-there-generates"><span class="toc-number">9.0.7.</span> <span class="toc-text">Works only if rngd is there, generates</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2015-07-24-YunWebUI"><span class="toc-number">10.</span> <span class="toc-text">2015-07-24 YunWebUI</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#ubuntu系统设置"><span class="toc-number">10.0.0.1.</span> <span class="toc-text">ubuntu系统设置</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2015-07-22-zigbeegw-luci"><span class="toc-number"></span> <span class="toc-text">2015-07-22 zigbeegw-luci</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2015-07-10-13-16-21-OpenWRT下远程调试"><span class="toc-number">1.</span> <span class="toc-text">2015-07-10,13,16,21 OpenWRT下远程调试</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2015-07-09-OpenWRT下远程调试"><span class="toc-number">2.</span> <span class="toc-text">2015-07-09 OpenWRT下远程调试</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#OpenWRT下远程调试-attitude-adjustment-WR703N"><span class="toc-number">2.0.1.</span> <span class="toc-text">OpenWRT下远程调试 attitude_adjustment WR703N</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2015-07-08-OpenWRT下远程调试-7620n"><span class="toc-number">3.</span> <span class="toc-text">2015-07-08 OpenWRT下远程调试 7620n</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#OpenWRT下远程调试-barrier-breaker-7620n"><span class="toc-number">3.0.1.</span> <span class="toc-text">OpenWRT下远程调试 barrier_breaker 7620n</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2015-07-07-helloworld"><span class="toc-number">4.</span> <span class="toc-text">2015-07-07 helloworld</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2015-07-06-OpenWRT-Build"><span class="toc-number">5.</span> <span class="toc-text">2015-07-06 OpenWRT Build</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-增加profile"><span class="toc-number">5.0.1.</span> <span class="toc-text">2. 增加profile</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-更改kernel-console打印波特率"><span class="toc-number">5.0.2.</span> <span class="toc-text">3.更改kernel console打印波特率</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#常用命令"><span class="toc-number"></span> <span class="toc-text">常用命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#常用命令-1"><span class="toc-number">0.1.</span> <span class="toc-text">常用命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#装-Luci-web-UI"><span class="toc-number">0.2.</span> <span class="toc-text">装 Luci web UI :</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tftp更新固件"><span class="toc-number">0.3.</span> <span class="toc-text">tftp更新固件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#scp至路由器更新固件"><span class="toc-number">0.4.</span> <span class="toc-text">scp至路由器更新固件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Network-testing-with-iperf"><span class="toc-number">0.5.</span> <span class="toc-text">Network-testing with iperf</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#TCP"><span class="toc-number">0.6.</span> <span class="toc-text">TCP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#UDP"><span class="toc-number">0.7.</span> <span class="toc-text">UDP</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#eclipse调试-没有成功"><span class="toc-number">0.8.</span> <span class="toc-text">eclipse调试[没有成功]</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#http-chaochaoblog-com-archives-1007"><span class="toc-number"></span> <span class="toc-text">http://chaochaoblog.com/archives/1007</span></a>
        
    </li></div>
    <style>
        .left-col .switch-btn,
        .left-col .switch-area {
            display: none;
        }
        .toc-level-3 i,
        .toc-level-3 ol {
            display: none !important;
        }
    </style>

    <input type="button" id="tocButton" value="隐藏目录" title="点击按钮隐藏或者显示文章目录">

    <script>
        yiliaConfig.toc = ["隐藏目录", "显示目录", !!"false"];
    </script>



    
<div class="share">
    
        <div class="bdsharebuttonbox">
            <a href="#" class="fa fa-twitter bds_twi" data-cmd="twi" title="分享到推特"></a>
            <a href="#" class="fa fa-weibo bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
            <a href="#" class="fa fa-qq bds_sqq" data-cmd="sqq" title="分享给 QQ 好友"></a>
            <a href="#" class="fa fa-files-o bds_copy" data-cmd="copy" title="复制网址"></a>
            <a href="#" class="fa fa fa-envelope-o bds_mail" data-cmd="mail" title="通过邮件分享"></a>
            <a href="#" class="fa fa-weixin bds_weixin" data-cmd="weixin" title="生成文章二维码"></a>
            <a href="#" class="fa fa-share-alt bds_more" data-cmd="more"></a>
        </div>
        <script>
            window._bd_share_config={
                "common":{"bdSnsKey":{},"bdText":"OpenWRT折腾日记　| iZheteng　","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"24"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
        </script>
    

    
</div>







    
      <div class="duoshuo" id="comments">
    <div id="comment-box"></div>
    <div class="ds-thread" id="ds-thread" data-thread-key="2015/07/08/2015-07-08-OpenWRT折腾日记/" data-title="OpenWRT折腾日记" data-url="http://cuiqingwei.github.io/2015/07/08/2015-07-08-OpenWRT折腾日记/"></div>
    <script>
        var duoshuoQuery = {short_name:"cuiqingwei"};
        var loadComment = function(){
            var d = document, s = d.createElement('script');
            s.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
            s.async = true; s.charset = 'UTF-8';
            (d.head || d.body).appendChild(s);
        }

        
            // Add comment count
            $(function(){ 
                var jsonUrl = "http://api.duoshuo.com/threads/counts.jsonp?short_name=cuiqingwei&threads=2015/07/08/2015-07-08-OpenWRT折腾日记/&callback=?";
                $.getJSON(jsonUrl, function(result){
                    $.each(result.response, function(i, field){
                        var value = field.comments;
                        if (value > 0) {
                            $(".count-comment").text(value);
                            return;
                        }
                    })
                })
            })
        
    </script>
    
    <aside class="comment-bar">
        <a href="javascript:void(0);">
            <i class="fa fa-commenting-o animated infinite pulse"></i>
            <i class="fa fa-spinner fa-pulse"></i>
            <span class="count-comment"></span>
        </a>
    </aside>
    <script>
        var $commentBar = $("#comments aside.comment-bar");
        var load$hide = function(){
            $commentBar.find("a > i").toggle();
            loadComment();
            $commentBar.fadeOut(800);
        }
        $commentBar.click(function(){
            load$hide();
        })
        $commentBar.children("a").hover(function(){
            load$hide();
        })
        if (window.location.hash === "#comments") {
            load$hide();
        }
    </script>

</div>
    




    <div class="scroll" id="post-nav-button">
        
            <a href="/2015/07/09/2015-07-09-OpenWRT-usefull-commands/" title="上一篇: OpenWRT usefull commands">
                <i class="fa fa-angle-left"></i>
            </a>
        

        <a title="文章列表"><i class="fa fa-bars"></i><i class="fa fa-times"></i></a>

        
            <a href="/2015/07/07/2015-07-07-OpenWRT之dl下载分享/" title="下一篇: OpenWRT之dl下载分享">
                <i class="fa fa-angle-right"></i>
            </a>
        
    </div>

    <ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/09/13/2018-09-13-Raspberry安装Domoticz/">Raspberry安装Domoticz</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/27/2018-06-27-大疆“御”Mavic系列教程/">大疆“御”Mavic系列教程</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/27/2018-06-27-DJI大疆创新多边形禁飞区策略/">DJI大疆创新发布多边形禁飞区策略</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/20/2018-06-20-QSDK编译/">QSDK编译</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/20/2018-06-20-什么是LEDE/">什么是LEDE?</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/14/2018-06-18-WiFi探针的工作原理/">WiFi探针的工作原理</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/14/2018-05-14-OpenWRT的WiFi带机量修改方法/">OpenWRT的WiFi带机量修改方法</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/05/08/2018-05-08-Android-MulticastSocket-组播/">Android MulticastSocket 组播</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/24/2018-04-24-Proguard-And-DexGuard/">Proguard And DexGuard</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/04/24/2018-04-24-OSX安装nginx和rtmp模块/">OSX安装nginx和rtmp模块</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/03/16/2018-03-16-802-11ac-Wave2到底好在哪/">802.11ac Wave2到底好在哪?</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/02/05/2018-02-05-DCS和PLC的区别/">DCS和PLC的区别</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/26/2017-12-26-SSH与SSM对比/">SSH与SSM对比</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/05/2017-12-05-curl模拟http发送get或post接口测试/">curl模拟http发送get或post接口测试</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/05/2017-12-22-分布式文件系统-FastDFS-5-Linux-CentOS-7-搭建/">分布式文件系统 FastDFS 5 & Linux CentOS 7 搭建</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/12/04/2017-12-04-怎样的家居照明才有质感/">怎样的家居照明才有质感?</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/29/2017-11-29-CentOS7添加开机启动服务脚本/">CentOS7添加开机启动服务脚本</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/27/2017-11-27-基于红外阵列传感器的检测系统/">基于红外阵列传感器的检测系统</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/26/2017-11-26-松下Grid-EYE红外阵列医疗传感器解析/">松下Grid-EYE红外阵列传感器解析</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/11/23/2017-11-23-git中避免提交-DS-Store文件/">git中避免提交.DS_Store文件</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/10/31/2017-10-31-如何查看网站是用什么语言开发的/">如何查看网站是用什么语言开发的?</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/21/2017-09-21-酒店PMS/">酒店PMS</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/19/2017-09-19-使用Ionic框架开发Hybird应用/">使用Ionic框架开发Hybird应用</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/09/2017-02-09-Homekit初体验/">HomeKit初体验</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/08/2017-02-08-OpenWRT之HomeKit/">OpenWRT之HomeKit</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/08/2017-02-08-Raspberry安装HAP-NodeJS/">Raspberry安装HAP-NodeJS</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/02/01/2017-02-01-图文解说水滴轮三大刹车系统/">图文解说水滴轮三大刹车系统</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/02/2017-01-02-夏利俊超级远投讲解/">夏利俊超级远投讲解</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/01/01/2017-01-01-路亚装逼指南/">路亚装逼指南</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/30/2016-12-30-用ASP-NET开发的大型网站有哪些架构方式/">谈谈用ASP.NET开发的大型网站有哪些架构方式</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/12/30/2016-12-30-基于微软平台IIS-ASP-NET开发的大型网站有哪些/">基于微软平台IIS/ASP.NET开发的大型网站有哪些?</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/17/2016-12-15-GoAhead移植到OpenWRT/">GoAhead移植到OpenWRT</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/17/2016-11-17-Contiki-CC2538-CoAP/">Contiki-CC2538-CoAP</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/11/09/2016-11-09-Contiki-CC2538/">Contiki-CC2538</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/29/2016-10-29-基于Contiki-Cooja的6lbr模拟仿真/">基于Contiki-Cooja的6lbr模拟仿真</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/27/2016-10-27-利用Travis-CI、MkDocs自動部署Blog至GitHub-Pages/">利用Travis CI、MkDocs自動部署Blog至GitHub Pages</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/16/2016-10-16-linkit-smart-7688-build/">linkit-smart-7688-build</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/13/2016-10-13-路亚水滴轮的速比的选择/">路亚水滴轮的速比的选择</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/13/2016-10-13-常用路亚线的区别/">常用路亚线的区别</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/13/2016-10-13-如何选择一根适合自己的BASS竿/">如何选择一根适合自己的BASS竿</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/13/2016-10-13-善用路亚软饵/">善用路亚软饵</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/13/2016-10-13-几种常用有效的线结介绍/">几种常用有效的线结介绍</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/12/2016-10-12-路亚竿的硬度与调性你是否混淆/">路亚竿的硬度与调性你是否混淆</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/11/2016-10-11-活鱼放血/">活鱼放血</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/10/2016-10-10-高田路亚视频/">高田路亚视频</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/10/2016-10-10-个人路亚装备/">个人路亚装备</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/10/2016-10-10-Kali-Linux-Live-USB-on-MAC/">Kali Linux Live USB on MAC</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/09/2016-10-09-路亚绑法/">路亚绑法</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/08/2016-10-08-OpenWRT开源硬件汇总/">OpenWRT开源硬件汇总</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/08/2016-10-08-拟饵手法/">拟饵手法</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/10/08/2016-10-08-路亚术语/">路亚术语</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/05/13/2016-05-13-IoT知识点汇总/">IoT知识点汇总</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/05/12/2016-05-12-网站设计的最简主义/">网站设计的最简主义</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/03/09/2016-03-09-MEAN/">MEAN</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/03/08/2016-03-08-eMaker-Space/">eMaker.Space</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/02/15/2016-02-15-Raspberry-Pi/">Raspberry Pi</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/11/18/2015-11-18-创客硬件/">创客硬件</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/10/03/2015-10-03-折叠公路车/">折叠公路车</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/08/19/2015-08-19-Linux打补丁和git打patch方法/">Linux打补丁和git打patch方法 </a></li><li class="post-list-item"><a class="post-list-link" href="/2015/08/18/2015-08-18-Linux/">Linux</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/08/15/2015-08-15-亚马逊云服务免费一年VPS主机翻墙术/">亚马逊云服务免费一年VPS主机翻墙术</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/07/23/2015-07-23-常用Wi-Fi网络评测工具/">常用Wi-Fi网络评测工具</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/07/16/2015-07-16-有趣的Linux命令行功效/">有趣的Linux命令行功效</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/07/09/2015-07-09-OpenWRT-usefull-commands/">OpenWRT usefull commands</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/07/08/2015-07-08-OpenWRT折腾日记/">OpenWRT折腾日记</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/07/07/2015-07-07-OpenWRT之dl下载分享/">OpenWRT之dl下载分享</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/07/06/2015-07-06-OpenWRT下ifconfig各接口说明/">OpenWRT下ifconfig各接口说明</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/07/01/2015-07-01-OpenWRT经典网站/">OpenWRT经典网站</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/06/24/2015-06-24-技术领域的深刻体会、教训/">技术领域的深刻体会、教训</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/06/03/2015-06-03-三星平板工厂模式/">三星平板工厂模式</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/03/01/2015-03-01-ZigBee射频模块晶振选型/">ZigBee射频模块晶振选型</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/01/15/2015-01-15-xclip-pbcopy-xsel用法-terminal-复制粘帖-mac-ubuntu/">xclip,pbcopy,xsel用法 terminal 复制粘帖 (mac, ubuntu)</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/01/13/2015-01-13-Ubuntu/">Ubuntu</a></li><li class="post-list-item"><a class="post-list-link" href="/2015/01/13/2015-01-13-MacOS/">MacOS</a></li><li class="post-list-item"><a class="post-list-link" href="/2014/12/08/2014-12-08-SDK之uClinux、Ralink、Atheros、Realtek、Broadcom/">SDK之uClinux、Ralink、Atheros、Realtek、Broadcom</a></li><li class="post-list-item"><a class="post-list-link" href="/2014/06/08/2014-06-08-骑行7：滴水湖2014/">骑行7：滴水湖2014</a></li><li class="post-list-item"><a class="post-list-link" href="/2014/05/21/2014-05-21-骑行6：上海南京路步行街/">骑行6：上海南京路步行街</a></li><li class="post-list-item"><a class="post-list-link" href="/2014/04/17/2014-04-17-网络命令/">网络命令</a></li><li class="post-list-item"><a class="post-list-link" href="/2013/07/05/2013-07-05-Marketplace-Client/">Marketplace Client</a></li><li class="post-list-item"><a class="post-list-link" href="/2013/06/15/2013-06-15-骑行5：沪杭公路到九龙山/">骑行5：沪杭公路到九龙山</a></li><li class="post-list-item"><a class="post-list-link" href="/2013/04/29/2013-04-29-骑行4：老上海-浦西世博园/">骑行4：老上海&浦西世博园</a></li><li class="post-list-item"><a class="post-list-link" href="/2013/04/20/2013-04-20-骑行3：天马山-淀山湖/">骑行3：天马山&淀山湖</a></li><li class="post-list-item"><a class="post-list-link" href="/2013/04/06/2013-04-06-我的单车装备/">我的单车装备</a></li><li class="post-list-item"><a class="post-list-link" href="/2013/04/05/2013-04-05-骑行2：滴水湖/">骑行2：滴水湖</a></li><li class="post-list-item"><a class="post-list-link" href="/2013/04/02/2013-04-02-骑行1：佘山/">骑行1：佘山</a></li><li class="post-list-item"><a class="post-list-link" href="/2013/03/23/2013-03-23-GitHub建立个人站点/">GitHub建立个人站点</a></li><li class="post-list-item"><a class="post-list-link" href="/2013/01/11/2013-01-11-InstantContiki2-6-for-CC2530/">InstantContiki2.6 for CC2530</a></li><li class="post-list-item"><a class="post-list-link" href="/2012/10/14/2012-10-14-曾经折腾过的那些/">曾经折腾过的那些</a></li><li class="post-list-item"><a class="post-list-link" href="/2012/09/07/2012-09-07-autoRootfs-sh/">autoRootfs.sh</a></li><li class="post-list-item"><a class="post-list-link" href="/2012/09/07/2012-09-07-SQLite移植到ARM开发板/">SQLite移植到ARM开发板</a></li><li class="post-list-item"><a class="post-list-link" href="/2012/09/07/2012-09-07-goAhead2-5嵌入式web服务器移植/">goAhead2.5嵌入式web服务器移植</a></li><li class="post-list-item"><a class="post-list-link" href="/2012/09/07/2012-09-07-jffs2根文件系统制作/">jffs2根文件系统制作</a></li><li class="post-list-item"><a class="post-list-link" href="/2012/09/07/2012-09-07-at91sam9x5编译过程/">at91sam9x5编译过程</a></li><li class="post-list-item"><a class="post-list-link" href="/2012/09/07/2012-09-07-ubuntu11-04安装arm开发环境/">ubuntu11.04安装arm开发环境</a></li><li class="post-list-item"><a class="post-list-link" href="/2012/09/07/2012-09-08-Linux中生成shadow的加密密码/">Linux中生成shadow的加密密码.04安装arm开发环境</a></li><li class="post-list-item"><a class="post-list-link" href="/2012/08/08/2012-08-08-vim循序渐进/">vim循序渐进</a></li><li class="post-list-item"><a class="post-list-link" href="/2012/08/02/2012-08-02-如何选择开源许可证/">如何选择开源许可证?</a></li><li class="post-list-item"><a class="post-list-link" href="/2012/08/01/2012-08-01-vi备忘/">vi备忘</a></li><li class="post-list-item"><a class="post-list-link" href="/2010/07/23/2010-07-23-Telnet-Socket调试工具/">Telnet&Socket调试工具</a></li><li class="post-list-item"><a class="post-list-link" href="/2009/07/28/2009-07-28-基于Altium-Designer-Winter-09在PCB中放置LOGO/">基于Altium Designer Winter 09在PCB中放置LOGO</a></li><li class="post-list-item"><a class="post-list-link" href="/2009/03/13/2009-03-13-在TI-CC1111-CC25111上搞定USBHID/">在TI-CC1111&CC25111上搞定USBHID</a></li><li class="post-list-item"><a class="post-list-link" href="/2008/07/09/2008-07-09-Rf-Calc/">Rf_Calc</a></li><li class="post-list-item"><a class="post-list-link" href="/2008/05/11/2008-05-11-Proteus产品仿真/">Proteus产品仿真</a></li><li class="post-list-item"><a class="post-list-link" href="/2008/01/03/2008-01-03-USB-M8-RGBLED彩灯/">USB_M8_RGBLED彩灯</a></li><li class="post-list-item"><a class="post-list-link" href="/2007/11/19/2007-11-19-EAGLE3D终于搞定了！/">EAGLE3D终于搞定了!</a></li><li class="post-list-item"><a class="post-list-link" href="/2007/10/12/2007-10-12-CC2430模块自测程序/">CC2430模块自测程序</a></li><li class="post-list-item"><a class="post-list-link" href="/2006/12/25/2006-12-25-基于Cport的多功能串口调试工具/">基于Cport的多功能串口调试工具</a></li><li class="post-list-item"><a class="post-list-link" href="/2006/12/06/2006-12-06-AT91SAM7S64的定时器初始化计算工器/">AT91SAM7S64的定时器初始化计算器</a></li><li class="post-list-item"><a class="post-list-link" href="/2006/10/31/2006-10-31-闪动的“LOVE”/">闪动的“LOVE”</a></li><li class="post-list-item"><a class="post-list-link" href="/2006/10/01/2006-10-01-活着，就要折腾/">活着，就要折腾</a></li></ul>




    <script>
        
    </script>
</div>
      <footer id="footer">
    <div class="outer">
        <div id="footer-info">
            <div class="footer-left">
                <i class="fa fa-copyright"></i>
                2016-2018 cuiqingwei
            </div>
            <div class="footer-right">
                <!-- <a href="http://hexo.io/" target="_blank" title="快速、简洁且高效的博客框架">Hexo</a>  Theme <a href="https://github.com/MOxFIVE/hexo-theme-yelee" target="_blank" title="简而不减 Hexo 双栏博客主题  v3.5">Yelee</a> by MOxFIVE <i class="fa fa-heart animated infinite pulse"></i> -->
                Old Blog <a href="https://cuiqingwei1981.github.io">https://cuiqingwei1981.github.io</a>
            </div>
        </div>
        
            <div class="visit">
                
                    <span id="busuanzi_container_site_pv" style="display:none">
                        <span id="site-visit" title="本站到访数"><i class="fa fa-user" aria-hidden="true"></i><span id="busuanzi_value_site_uv"></span>
                        </span>
                    </span>
                
                
                    <span>| </span>
                
                
                    <span id="busuanzi_container_page_pv" style="display:none">
                        <span id="page-visit" title="本页阅读量"><i class="fa fa-eye animated infinite pulse" aria-hidden="true"></i><span id="busuanzi_value_page_pv"></span>
                        </span>
                    </span>
                
            </div>
        
    </div>
</footer>

    </div>
    
<script data-main="/js/main.js" src="//cdn.bootcss.com/require.js/2.2.0/require.min.js"></script>



<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-42607542-2', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->



<div class="scroll" id="scroll">
    <a href="#" title="返回顶部"><i class="fa fa-arrow-up"></i></a>
    <a href="#comments" onclick="load$hide();" title="查看评论"><i class="fa fa-comments-o"></i></a>
    <a href="#footer" title="转到底部"><i class="fa fa-arrow-down"></i></a>
</div>
<script>
    // Open in New Window
    
        var oOpenInNew = {
            
            
            
            
            
            
             archives: ".archive-article-title", 
             miniArchives: "a.post-list-link", 
            
             friends: "#js-friends a", 
             socail: ".social a" 
        }
        for (var x in oOpenInNew) {
            $(oOpenInNew[x]).attr("target", "_blank");
        }
    
</script>

<script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
  </div>
</body>
</html>