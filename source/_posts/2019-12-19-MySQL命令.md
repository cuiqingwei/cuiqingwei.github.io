---
layout: post
title: 'MySQL命令'
date: 2019-12-19 10:54
comments: true
tags:
  - MySQL
  - 备忘
---

## 库外操作

- 导出整个数据库

> mysqldump -u 用户名 -p –default-character-set=latin1 数据库名 > 导出的文件名(数据库默认编码是latin1)

`mysqldump -u root -p dbname > dbname.sql；`

- 导出一个表

> mysqldump -u 用户名 -p 数据库名 表名> 导出的文件名

`mysqldump -u root -p dbname tablename> dbname_tablename.sql；`

<!--more-->

- 导出一个数据库结构

`mysqldump -u root -p -d –add-drop-table dbname >d:name_db.sql；`

-d 没有数据 –add-drop-table 在每个create语句之前增加一个drop table

- 导入数据库

1. 常用source 命令

   进入mysql数据库控制台，

   如`mysql -u root -p；`

   mysql>use 数据库

   然后使用source命令，后面参数为脚本文件(如这里用到的.sql)

   `mysql>source dbname.sql；`

2. 使用mysqldump命令

   `mysqldump -u username -p dbname < dbnam.sql；`

3. 使用mysql命令

   `mysql -u username -p -D dbname < dename.sql；`

- 启动与退出

7. 进入MySQL：启动MySQL Command Line Client（MySQL的DOS界面），直接输入安装时的密码即可。此时的提示符是：`mysql>`
8. 退出MySQL：`quit；`或`exit；`

## 数据库操作

- 创建数据库

mysql> `create database dbname;`

- 显示所有的数据库

mysql> `show databases;`

- 删除数据库

mysql> `drop database dbname;`

- 连接数据库

mysql> `use dbname;`

- 查看当前使用的数据库

mysql> `select database();`

- 当前数据库包含的表信息：

mysql> `show tables; `

## 表单操作

- 建表

> 命令：create table <表名> ( <字段名> <类型> [,..<字段名n> <类型n>]);

```mysql
mysql>create table MyClass(

>id int(4) not null primary key auto_increment,

>name char(20) not null,

>sex int(4) not null default ’′,

>degree double(16,2));
```

- 获取表结构

> 命令：desc 表名，或者show columns from 表名

```mysql
mysql>DESCRIBE MyClass

mysql> desc MyClass;

mysql> show columns from MyClass;
```

- 删除表

> 命令：drop table <表名>

`mysql> drop table MyClass;`

- 插入数据

> 命令：insert into <表名> [( <字段名>[,..<字段名n > ])] values ( 值 )[, ( 值n )]

例如，往表 MyClass中插入二条记录, 这二条记录表示：编号为的名为Tom的成绩为.45, 编号为 的名为Joan 的成绩为.99，编号为 的名为Wang 的成绩为.5.

`mysql> insert into MyClass values(1,’Tom’,96.45),(2,’Joan’,82.99), (2,’Wang’, 96.59);`

- 查询表中的数据

1. 查询所有行

> 命令：select <字段，字段，...> from < 表名 > where < 表达式 >

例如：查看表 MyClass 中所有数据

`mysql> select * from MyClass;`

2. 查询前几行数据

> 例如：查看表 MyClass 中前行数据

`mysql> select * from MyClass order by id limit 0,2;`

或者：

`mysql> select * from MyClass limit 0,2;`

- 删除表中数据

> 命令：delete from 表名 where 表达式

例如：删除表 MyClass中编号为 的记录

`mysql> delete from MyClass where id=1;`

- 修改表中数据

> 命令：update 表名 set 字段=新值,…where 条件

`mysql> update MyClass set name=’Mary’where id=1;`

- 在表中增加字段：

> 命令：alter table 表名 add字段 类型 其他;

例如：在表MyClass中添加了一个字段passtest，类型为int(4)，默认值为

`mysql> alter table MyClass add passtest int(4) default ’′`

- 更改表名：

> 命令：rename table 原表名 to 新表名;

例如：在表MyClass名字更改为YouClass

`mysql> rename table MyClass to YouClass;`

- 更新字段内容

> update 表名 set 字段名 = 新内容
> update 表名 set 字段名 = replace(字段名,’旧内容’,'新内容’)
