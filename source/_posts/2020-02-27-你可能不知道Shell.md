---
layout: post
title: '你可能不知道的Shell'
date: 2020-02-27 21:37
comments: true
tags:
  - Shell
  - 备忘
---

1、 `sudo !!`

以root的身份执行上一条命令 。

场景举例：比如Ubuntu里用apt-get安装软件包的时候是需要root身份的，我们经常会忘记在apt-get前加sudo。每次不得不加上sudo再重新键入这行命令，这时可以很方便的用sudo !!完事。

<!--more-->

2、`cd –`

回到上一次的目录 。

场景举例：当前目录为/home/a，用cd ../b切换到/home/b。这时可以通过反复执行cd –命令在/home/a和/home/b之间来回方便的切换。

<!--more-->

3、`^old^new`

替换前一条命令里的部分字符串。

场景：echo "wanderful"，其实是想输出echo "wonderful"。只需要^a^o就行了，对很长的命令的错误拼写有很大的帮助。

4、 `man ascii`

显示ascii码表。

场景：忘记ascii码表的时候还需要google么?尤其在天朝网络如此“顺畅”的情况下，就更麻烦在GWF多应用一次规则了，直接用本地的man ascii吧。

5、 `ctrl-x e`

快速启动你的默认编辑器（由变量$EDITOR设置）。

6、 `netstat –tlnp`

列出本机进程监听的端口号。

7、 `tail -f /path/to/file.log | sed '/^Finished: SUCCESS$/ q'`

当file.log里出现Finished: SUCCESS时候就退出tail，这个命令用于实时监控并过滤log是否出现了某条记录。

8、 `ssh user@server bash < /path/to/local/script.sh`

在远程机器上运行一段脚本。这条命令最大的好处就是不用把脚本拷到远程机器上。

9、 `screen -d -m -S some_name ping my_router`

后台运行一段不终止的程序，并可以随时查看它的状态。-d -m参数启动“分离”模式，-S指定了一个session的标识。可以通过-R命令来重新“挂载”一个标识的session。更多细节请参考screen用法 man screen。

10、 `wget --random-wait -r -p -e robots=off -U mozilla http://www.example.com`

下载整个 www.example.com 网站。

11、 `curl ifconfig.me`

当你的机器在内网的时候，可以通过这个命令查看外网的IP。

12、 `lsof –i`

实时查看本机网络服务的活动状态。

13、 `python -m SimpleHTTPServer`

一句话实现一个HTTP server，把当前目录设为HTTP服务目录，可以通过 http://localhost:8000 访问 这也许是这个星球上最简单的HTTP服务器的实现了。

最后来个复杂的——

14、 `history | awk '{CMD[$2]++;count++;} END { for (a in CMD )print CMD[a] " " CMD[a]/count*100 "% " a }' | grep -v "./" | column -c3 -s " " -t | sort -nr | nl | head -n10`

![3w5Kln.png](https://s2.ax1x.com/2020/02/27/3w5Kln.png)

--- 转自·[图灵社区](https://www.ituring.com.cn/)·免费电子书《[码农增刊·Linus与Linux](https://www.ituring.com.cn/book/1501)》
